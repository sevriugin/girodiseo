{"version":3,"sources":["webpack:///(webpack)/buildin/global.js","webpack:///./src/$_lazy_route_resource lazy namespace object","webpack:///./src/app/about/about.component.css","webpack:///./src/app/about/about.component.html","webpack:///./src/app/about/about.component.ts","webpack:///./src/app/admin/admin.component.css","webpack:///./src/app/admin/admin.component.html","webpack:///./src/app/admin/admin.component.ts","webpack:///./src/app/app-routing.module.ts","webpack:///./src/app/app.component.css","webpack:///./src/app/app.component.html","webpack:///./src/app/app.component.ts","webpack:///./src/app/app.module.ts","webpack:///./src/app/auth.service.ts","webpack:///./src/app/bikeshop/bikeshop.component.css","webpack:///./src/app/bikeshop/bikeshop.component.html","webpack:///./src/app/bikeshop/bikeshop.component.ts","webpack:///./src/app/clock.service.ts","webpack:///./src/app/cust-ext-browser-xhr.ts","webpack:///./src/app/dashboard/dashboard.component.css","webpack:///./src/app/dashboard/dashboard.component.html","webpack:///./src/app/dashboard/dashboard.component.ts","webpack:///./src/app/ethereum/ethcontract.service.ts","webpack:///./src/app/ethereum/ethereum.module.ts","webpack:///./src/app/ethereum/tokens.ts","webpack:///./src/app/expert/expert.component.css","webpack:///./src/app/expert/expert.component.html","webpack:///./src/app/expert/expert.component.ts","webpack:///./src/app/frame/frame.component.css","webpack:///./src/app/frame/frame.component.html","webpack:///./src/app/frame/frame.component.ts","webpack:///./src/app/geo-ride/geo-ride.component.css","webpack:///./src/app/geo-ride/geo-ride.component.html","webpack:///./src/app/geo-ride/geo-ride.component.ts","webpack:///./src/app/getstarted/getstarted.component.css","webpack:///./src/app/getstarted/getstarted.component.html","webpack:///./src/app/getstarted/getstarted.component.ts","webpack:///./src/app/header/header.component.css","webpack:///./src/app/header/header.component.html","webpack:///./src/app/header/header.component.ts","webpack:///./src/app/images.service.ts","webpack:///./src/app/item-dialog/item-dialog.component.css","webpack:///./src/app/item-dialog/item-dialog.component.html","webpack:///./src/app/item-dialog/item-dialog.component.ts","webpack:///./src/app/item/item.component.css","webpack:///./src/app/item/item.component.html","webpack:///./src/app/item/item.component.ts","webpack:///./src/app/landing/landing.component.css","webpack:///./src/app/landing/landing.component.html","webpack:///./src/app/landing/landing.component.ts","webpack:///./src/app/login/login.component.css","webpack:///./src/app/login/login.component.html","webpack:///./src/app/login/login.component.ts","webpack:///./src/app/nav-bar/nav-bar.component.css","webpack:///./src/app/nav-bar/nav-bar.component.html","webpack:///./src/app/nav-bar/nav-bar.component.ts","webpack:///./src/app/order.service.ts","webpack:///./src/app/order.ts","webpack:///./src/app/order/order.component.css","webpack:///./src/app/order/order.component.html","webpack:///./src/app/order/order.component.ts","webpack:///./src/app/parameters.ts","webpack:///./src/app/profile-update/profile-update.component.css","webpack:///./src/app/profile-update/profile-update.component.html","webpack:///./src/app/profile-update/profile-update.component.ts","webpack:///./src/app/qrcode-dialog/qrcode-dialog.component.css","webpack:///./src/app/qrcode-dialog/qrcode-dialog.component.html","webpack:///./src/app/qrcode-dialog/qrcode-dialog.component.ts","webpack:///./src/app/ride-detail/ride-detail.component.css","webpack:///./src/app/ride-detail/ride-detail.component.html","webpack:///./src/app/ride-detail/ride-detail.component.ts","webpack:///./src/app/ride.service.ts","webpack:///./src/app/ride/ride.component.css","webpack:///./src/app/ride/ride.component.html","webpack:///./src/app/ride/ride.component.ts","webpack:///./src/app/rider.service.ts","webpack:///./src/app/rider.ts","webpack:///./src/app/shopping-result/shopping-result.component.css","webpack:///./src/app/shopping-result/shopping-result.component.html","webpack:///./src/app/shopping-result/shopping-result.component.ts","webpack:///./src/app/shopping/shopping.component.css","webpack:///./src/app/shopping/shopping.component.html","webpack:///./src/app/shopping/shopping.component.ts","webpack:///./src/app/sms-confirmation/sms-confirmation.component.css","webpack:///./src/app/sms-confirmation/sms-confirmation.component.html","webpack:///./src/app/sms-confirmation/sms-confirmation.component.ts","webpack:///./src/app/tag-detail/tag-detail.component.css","webpack:///./src/app/tag-detail/tag-detail.component.html","webpack:///./src/app/tag-detail/tag-detail.component.ts","webpack:///./src/app/tag-reg-sms/tag-reg-sms.component.css","webpack:///./src/app/tag-reg-sms/tag-reg-sms.component.html","webpack:///./src/app/tag-reg-sms/tag-reg-sms.component.ts","webpack:///./src/app/tag-registration/tag-registration.component.css","webpack:///./src/app/tag-registration/tag-registration.component.html","webpack:///./src/app/tag-registration/tag-registration.component.ts","webpack:///./src/app/tag.service.ts","webpack:///./src/app/tags/tags.component.css","webpack:///./src/app/tags/tags.component.html","webpack:///./src/app/tags/tags.component.ts","webpack:///./src/app/tnx-detail/tnx-detail.component.css","webpack:///./src/app/tnx-detail/tnx-detail.component.html","webpack:///./src/app/tnx-detail/tnx-detail.component.ts","webpack:///./src/app/transaction.service.ts","webpack:///./src/app/use-points/use-points.component.css","webpack:///./src/app/use-points/use-points.component.html","webpack:///./src/app/use-points/use-points.component.ts","webpack:///./src/app/user-orders/user-orders.component.css","webpack:///./src/app/user-orders/user-orders.component.html","webpack:///./src/app/user-orders/user-orders.component.ts","webpack:///./src/app/user-profile/user-profile.component.css","webpack:///./src/app/user-profile/user-profile.component.html","webpack:///./src/app/user-profile/user-profile.component.ts","webpack:///./src/app/user-tags/user-tags.component.css","webpack:///./src/app/user-tags/user-tags.component.html","webpack:///./src/app/user-tags/user-tags.component.ts","webpack:///./src/app/user-tnx/user-tnx.component.css","webpack:///./src/app/user-tnx/user-tnx.component.html","webpack:///./src/app/user-tnx/user-tnx.component.ts","webpack:///./src/environments/environment.ts","webpack:///./src/environments/errors.ts","webpack:///./src/main.ts","webpack:///util (ignored)","webpack:///util (ignored)?340a","webpack:///buffer (ignored)","webpack:///crypto (ignored)"],"names":[],"mappings":";;;;;;;;;AAAA;;AAEA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;;AAEA;AACA;AACA,4CAA4C;;AAE5C;;;;;;;;;;;;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA,4CAA4C,WAAW;AACvD;AACA;AACA,4E;;;;;;;;;;;ACZA,mB;;;;;;;;;;;ACAA,6ZAA6Z,SAAS,uW;;;;;;;;;;;;;;;;;;;;;;;;;ACApX;AACO;AAOzD;IAGE;IAAgB,CAAC;IAEjB,iCAAQ,GAAR;QACE,IAAI,CAAC,OAAO,GAAG,iEAAO,CAAC;IACzB,CAAC;IAPU,cAAc;QAL1B,+DAAS,CAAC;YACT,QAAQ,EAAE,WAAW;;;SAGtB,CAAC;;OACW,cAAc,CAS1B;IAAD,qBAAC;CAAA;AAT0B;;;;;;;;;;;;ACR3B,gCAAgC,uBAAuB,GAAG,C;;;;;;;;;;;ACA1D,s3H;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAkD;AACA;AACJ;AACH;AACc;AAQzD;IAYE,wBACU,WAAwB,EACxB,MAAc,EACd,IAAgB,EAChB,QAAkB,EAClB,KAAqB;QAJrB,gBAAW,GAAX,WAAW,CAAa;QACxB,WAAM,GAAN,MAAM,CAAQ;QACd,SAAI,GAAJ,IAAI,CAAY;QAChB,aAAQ,GAAR,QAAQ,CAAU;QAClB,UAAK,GAAL,KAAK,CAAgB;IACzB,CAAC;IAEP,iCAAQ,GAAR;QAAA,iBA+BC;QA9BC,IAAI,CAAC,MAAM,GAAG,SAAS,CAAC;QACxB,IAAI,CAAC,MAAM,GAAG,SAAS,CAAC;QACxB,IAAI,CAAC,IAAI,GAAG,SAAS,CAAC;QACtB,IAAI,CAAC,IAAI,GAAG,SAAS,CAAC;QACtB,IAAI,CAAC,KAAK,GAAG,SAAS,CAAC;QACvB,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;QACrB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,WAAW,CAAC,OAAO,EAAE,CAAC,SAAS,CAAC,UAAC,IAAI;YACzD,IAAI,IAAI,EAAE;gBACR,KAAI,CAAC,MAAM,GAAG,IAAI,CAAC,WAAW,CAAC;gBAC/B,IAAI,CAAC,gBAAgB,EAAE;qBACpB,IAAI,CAAC,UAAC,aAAa;oBAClB,gCAAgC;oBAChC,IAAI,CAAC,CAAC,aAAa,CAAC,MAAM,CAAC,KAAK,EAAE;wBAChC,KAAI,CAAC,KAAK,GAAG,IAAI,CAAC;wBAClB,KAAI,CAAC,KAAK,GAAG,aAAa,CAAC,KAAK,CAAC;wBACjC,OAAO,CAAC,GAAG,CAAC,mBAAiB,KAAI,CAAC,MAAQ,CAAC,CAAC;qBAC7C;yBAAM;wBACL,KAAI,CAAC,KAAK,GAAG,KAAK,CAAC;wBACnB,KAAI,CAAC,KAAK,GAAG,SAAS,CAAC;qBACxB;gBACL,CAAC,CAAC;qBACD,KAAK,CAAC,UAAC,KAAK;oBACX,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;gBACrB,CAAC,CAAC,CAAC;aACJ;iBAAM;gBACL,KAAI,CAAC,MAAM,GAAG,IAAI,CAAC;gBACnB,KAAI,CAAC,KAAK,GAAG,KAAK,CAAC;gBACnB,KAAI,CAAC,KAAK,GAAG,SAAS,CAAC;aACxB;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IAED,kCAAS,GAAT;QACE,OAAO,CAAC,GAAG,CAAC,oBAAoB,CAAC,CAAC;QAClC,IAAI,CAAC,MAAM,GAAG,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC;IACjC,CAAC;IAED,gCAAO,GAAP;QACE,OAAO,CAAC,GAAG,CAAC,kBAAkB,CAAC,CAAC;QAChC,IAAI,CAAC,MAAM,GAAG,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC;IAC/B,CAAC;IAED,oCAAW,GAAX;QACE,OAAO,CAAC,GAAG,CAAC,uBAAuB,CAAC,CAAC;QACrC,IAAI,CAAC,MAAM,GAAG,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC;IAC/B,CAAC;IAED,6BAAI,GAAJ;QACE,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE;YAChB,OAAO;SACR;QACD,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE;YACf,OAAO;SACR;QACD,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE;YAChB,OAAO;SACR;QACD,IAAI,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE;YACtB,OAAO,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;YAC3B,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,EAAE,QAAQ,CAAC,CAAC;YACnC,IAAI,CAAC,MAAM,GAAG,SAAS,CAAC;SACzB;aAAM,IAAI,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE;YAC3B,OAAO,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;YACzB,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;YAC/B,IAAI,CAAC,MAAM,GAAG,SAAS,CAAC;SACzB;aAAM,IAAI,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE;YAC3B,OAAO,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;YACzB,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;YAC/B,IAAI,CAAC,MAAM,GAAG,SAAS,CAAC;SACzB;aAAM;YACL,OAAO,CAAC,KAAK,CAAC,gBAAgB,CAAC,CAAC;YAChC,IAAI,CAAC,MAAM,GAAG,SAAS,CAAC;SACzB;IACH,CAAC;IAED,+BAAM,GAAN,UAAO,KAAa,EAAE,KAAa;QAAnC,iBASC;QARC,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;QAEpB,IAAM,GAAG,GAAG,0EAA0E,CAAC;QACvF,IAAM,IAAI,GAAG,EAAE,MAAM,EAAE,IAAI,CAAC,MAAM,EAAE,OAAO,EAAE,IAAI,CAAC,KAAK,EAAE,KAAK,SAAE,KAAK,SAAE,CAAC;QACxE,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,IAAI,EAAE,EAAE,YAAY,EAAE,MAAM,EAAE,CAAC,CAAC,SAAS,CAAC,UAAC,GAAW;YACxE,KAAI,CAAC,OAAO,GAAG,KAAK,CAAC;YACrB,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QACjB,CAAC,CAAC,CAAC;IACP,CAAC;IAzGU,cAAc;QAL1B,+DAAS,CAAC;YACT,QAAQ,EAAE,WAAW;;;SAGtB,CAAC;yCAcuB,yDAAW;YAChB,sDAAM;YACR,+DAAU;YACN,wDAAQ;YACX,8DAAc;OAjBpB,cAAc,CA2G1B;IAAD,qBAAC;CAAA;AA3G0B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACZc;AACc;AACD;AACiB;AACkB;AAChB;AACV;AACN;AACoB;AACY;AAChC;AAC0B;AAC7B;AACoB;AACL;AACG;AACD;AACA;AACL;AACZ;AACgC;AAC7B;AACA;AACG;AACM;AACT;AACQ;AAGjE,IAAM,MAAM,GAAW;IACrB,EAAE,IAAI,EAAE,EAAE,EAAE,UAAU,EAAE,UAAU,EAAE,SAAS,EAAE,MAAM,EAAE;IACvD,EAAE,IAAI,EAAE,SAAS,EAAE,SAAS,EAAE,2EAAgB,EAAE;IAChD,EAAE,IAAI,EAAE,MAAM,EAAE,SAAS,EAAE,kEAAa,EAAE;IAC1C,EAAE,IAAI,EAAE,KAAK,EAAE,SAAS,EAAE,qGAAwB,EAAE;IACpD,EAAE,IAAI,EAAE,SAAS,EAAE,SAAS,EAAE,mFAAkB,EAAE;IAClD,EAAE,IAAI,EAAE,oBAAoB,EAAE,SAAS,EAAE,qFAAkB,EAAE;IAC7D,EAAE,IAAI,EAAE,OAAO,EAAE,SAAS,EAAE,qEAAc,EAAE;IAC5C,EAAE,IAAI,EAAE,aAAa,EAAE,SAAS,EAAE,qEAAc,EAAE;IAClD,EAAE,IAAI,EAAE,SAAS,EAAE,SAAS,EAAE,yFAAoB,EAAE;IACpD,EAAE,IAAI,EAAE,oBAAoB,EAAE,SAAS,EAAE,qGAAwB,EAAE;IACnE,EAAE,IAAI,EAAE,0BAA0B,EAAE,SAAS,EAAE,qGAAwB,EAAE;IACzE,EAAE,IAAI,EAAE,OAAO,EAAE,SAAS,EAAE,sEAAc,EAAE;IAC5C,EAAE,IAAI,EAAE,QAAQ,EAAE,SAAS,EAAE,gGAAsB,EAAE;IACrD,EAAE,IAAI,EAAE,MAAM,EAAE,SAAS,EAAE,mEAAa,EAAE;IAC1C,EAAE,IAAI,EAAE,SAAS,EAAE,SAAS,EAAE,8EAAgB,EAAE;IAChD,EAAE,IAAI,EAAE,UAAU,EAAE,SAAS,EAAE,uFAAmB,EAAE;IACpD,EAAE,IAAI,EAAE,UAAU,EAAE,SAAS,EAAE,mEAAa,EAAE;IAC9C,EAAE,IAAI,EAAE,eAAe,EAAE,SAAS,EAAE,mEAAa,EAAE;IACnD,EAAE,IAAI,EAAE,uBAAuB,EAAE,SAAS,EAAE,mEAAa,EAAE;IAC3D,EAAE,IAAI,EAAE,WAAW,EAAE,SAAS,EAAE,kFAAkB,EAAE;IACpD,EAAE,IAAI,EAAE,UAAU,EAAE,SAAS,EAAE,+EAAiB,EAAE;IAClD,EAAE,IAAI,EAAE,iBAAiB,EAAE,SAAS,EAAE,+EAAiB,EAAE;IACzD,EAAE,IAAI,EAAE,kBAAkB,EAAE,SAAS,EAAE,mGAAuB,EAAE;IAChE,EAAE,IAAI,EAAE,YAAY,EAAE,SAAS,EAAE,qFAAmB,EAAE;IACtD,EAAE,IAAI,EAAE,kBAAkB,EAAE,SAAS,EAAE,oFAAkB,EAAE;IAC3D,EAAE,IAAI,EAAE,WAAW,EAAE,SAAS,EAAE,oFAAkB,EAAE;IACpD,EAAE,IAAI,EAAE,OAAO,EAAE,SAAS,EAAE,sEAAc,EAAE;IAC5C,EAAE,IAAI,EAAE,WAAW,EAAE,SAAS,EAAE,sEAAc,EAAE;IAChD,EAAE,IAAI,EAAE,mBAAmB,EAAE,SAAS,EAAE,sEAAc,EAAE;IACxD,EAAE,IAAI,EAAE,OAAO,EAAE,SAAS,EAAE,sEAAc,EAAE;IAC5C,EAAE,IAAI,EAAE,QAAQ,EAAE,SAAS,EAAE,yEAAe,EAAE;IAC9C,EAAE,IAAI,EAAE,UAAU,EAAE,SAAS,EAAE,+EAAiB,EAAE;IAClD,EAAE,IAAI,EAAE,YAAY,EAAE,SAAS,EAAE,sEAAc,EAAE;CAClD,CAAC;AAMF;IAAA;IAAgC,CAAC;IAApB,gBAAgB;QAJ5B,8DAAQ,CAAC;YACR,OAAO,EAAE,CAAE,4DAAY,CAAE;YACzB,OAAO,EAAE,CAAE,4DAAY,CAAC,OAAO,CAAC,MAAM,CAAC,CAAE;SAC1C,CAAC;OACW,gBAAgB,CAAI;IAAD,uBAAC;CAAA;AAAJ;;;;;;;;;;;;ACrE7B,mB;;;;;;;;;;;ACAA,0J;;;;;;;;;;;;;;;;;;;;;ACAkD;AASlD;IALA;QAME,UAAK,GAAG,aAAa,CAAC;IACxB,CAAC;IAFY,YAAY;QALxB,+DAAS,CAAC;YACT,QAAQ,EAAE,UAAU;;;SAGrB,CAAC;OACW,YAAY,CAExB;IAAD,mBAAC;CAAA;AAFwB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACTiC;AACjB;AAEM;AAEG;AACe;AACA;AACP;AACJ;AACC;AACI;AACF;AACZ;AACY;AACsB;AAClB;AACF;AACJ;AACgB;AACkB;AAChB;AAC5B;AACa;AACI;AACP;AACQ;AACC;AACP;AACgC;AACZ;AAClC;AACsB;AACtB;AACc;AAC0B;AAClB;AACE;AACX;AACT;AACO;AACP;AACU;AACiB;AACL;AACvB;AACG;AACqB;AACE;AACxB;AACQ;AACO;AACL;AACH;AACa;AACR;AACU;AACD;AACV;AACX;AACQ;AACe;AACZ;AACA;AACY;AACS;AACrB;AAClB;AACgB;AACD;AACI;AACQ;AACH;AACC;AACnB;AACO;AACoB;AACY;AACR;AACrB;AACA;AACA;AACA;AACG;AACM;AACT;AACiB;AACT;AACD;AAEhE,IAAM,QAAQ,GAAG,yCAAyC,CAAC;AA0G3D;IAAA;IAAyB,CAAC;IAAb,SAAS;QAvGrB,8DAAQ,CAAC;YACR,YAAY,EAAE;gBACZ,2DAAY;gBACZ,kEAAa;gBACb,oFAAkB;gBAClB,sGAAwB;gBACxB,sFAAkB;gBAClB,2EAAe;gBACf,4EAAgB;gBAChB,sEAAc;gBACd,sGAAwB;gBACxB,0FAAoB;gBACpB,sEAAc;gBACd,gGAAsB;gBACtB,mEAAa;gBACb,uFAAmB;gBACnB,kFAAkB;gBAClB,qFAAmB;gBACnB,oFAAkB;gBAClB,oFAAkB;gBAClB,6FAAqB;gBACrB,yEAAe;gBACf,iFAAiB;gBACjB,8EAAgB;gBAChB,+EAAiB;gBACjB,mEAAa;gBACb,uFAAmB;gBACnB,mGAAuB;gBACvB,sEAAc;gBACd,sEAAc;gBACd,yEAAe;gBACf,+EAAiB;gBACjB,sEAAc;gBACd,uFAAmB;gBACnB,8EAAgB;aACjB;YACD,eAAe,EAAE;gBACf,6FAAqB;gBACrB,uFAAmB;aACpB;YACD,OAAO,EAAE;gBACP,uEAAa;gBACb,6F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","file":"main.js","sourcesContent":["var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1, eval)(\"this\");\r\n} catch (e) {\r\n\t// This works if the window reference is available\r\n\tif (typeof window === \"object\") g = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error('Cannot find module \"' + req + '\".');\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./src/$$_lazy_route_resource lazy recursive\";","module.exports = \"\"","module.exports = \"\\n<mat-grid-list cols=\\\"3\\\" rowHeight=\\\"4em\\\">\\n    <mat-grid-tile [routerLink]=\\\"['/landing']\\\" [rowspan]=\\\"3\\\" [colspan]=\\\"3\\\">\\n        <img  src=\\\"../assets/group-6.svg\\\">\\n    </mat-grid-tile>\\n\\n    <mat-grid-tile rowHeight=\\\"3em\\\" [colspan]=\\\"3\\\">\\n      <p>GIRO d'ISEO Web Application</p>\\n    </mat-grid-tile>\\n\\n    <mat-grid-tile rowHeight=\\\"3em\\\" [colspan]=\\\"3\\\">\\n      <p><small>{{version}}</small></p>\\n    </mat-grid-tile>\\n\\n    <mat-grid-tile rowHeight=\\\"3em\\\" [colspan]=\\\"3\\\">\\n        <p><small>Ethereum Rinkiby network via https proxy</small></p>\\n      </mat-grid-tile>\\n\\n    <mat-grid-tile rowHeight=\\\"3em\\\" [colspan]=\\\"3\\\">\\n      <p><small>Copyright REGA Risk Sharing (C) 2019</small></p>\\n    </mat-grid-tile>\\n    \\n</mat-grid-list>\\n\"","import { Component, OnInit } from '@angular/core';\nimport { version } from '../../environments/environment';\n\n@Component({\n  selector: 'app-about',\n  templateUrl: './about.component.html',\n  styleUrls: ['./about.component.css']\n})\nexport class AboutComponent implements OnInit {\n  version: string;\n\n  constructor() { }\n\n  ngOnInit() {\n    this.version = version;\n  }\n\n}\n","module.exports = \".action-card {\\n    max-width: 200px;\\n}\"","module.exports = \"<app-header [title]=\\\"'Admin'\\\"></app-header>\\n\\n<br>\\n<div *ngIf=\\\"!action\\\" fxLayout=\\\"row\\\"  fxLayout.xs=\\\"column\\\" fxLayoutAlign.xs=\\\"start center\\\" fxLayoutWrap fxLayoutGap=\\\"1.5%\\\" fxLayoutAlign=\\\"left\\\">\\n  <mat-card (click)=\\\"addExpert()\\\" class=\\\"action-card\\\">\\n    <mat-card-header>\\n      <mat-card-title>Expert</mat-card-title>\\n      <mat-card-subtitle>Add expert account</mat-card-subtitle>\\n    </mat-card-header>\\n    <img mat-card-image [src]=\\\"'../assets/' + 'expert.png'\\\">\\n  </mat-card>\\n\\n  <mat-card (click)=\\\"addShop()\\\" class=\\\"action-card\\\">\\n      <mat-card-header>\\n        <mat-card-title>Shop</mat-card-title>\\n        <mat-card-subtitle>Add shop account</mat-card-subtitle>\\n      </mat-card-header>\\n      <img mat-card-image [src]=\\\"'../assets/' + 'shop.png'\\\">\\n    </mat-card>\\n\\n    <mat-card (click)=\\\"addBikeShop()\\\" class=\\\"action-card\\\">\\n        <mat-card-header>\\n          <mat-card-title>Bike Shop</mat-card-title>\\n          <mat-card-subtitle>Add Bike shop</mat-card-subtitle>\\n        </mat-card-header>\\n        <img mat-card-image [src]=\\\"'../assets/' + 'bike-shop.png'\\\">\\n    </mat-card>\\n\\n</div>\\n\\n<div *ngIf=\\\"action && action.expert\\\" fxLayout=\\\"row\\\"  fxLayout.xs=\\\"column\\\" fxLayoutAlign.xs=\\\"start center\\\" fxLayoutWrap fxLayoutGap=\\\"1.5%\\\" fxLayoutAlign=\\\"left\\\">\\n    <mat-card class=\\\"action-card\\\">\\n      <mat-card-header>\\n        <mat-card-title>Expert</mat-card-title>\\n        <mat-card-subtitle>Add expert account</mat-card-subtitle>\\n      </mat-card-header>\\n      <img mat-card-image [src]=\\\"'../assets/' + 'expert.png'\\\">\\n\\n      <mat-card-content >\\n          <mat-form-field>\\n            <input matInput name=\\\"expert\\\" type=\\\"text\\\" placeholder=\\\"Phone number\\\" required [(ngModel)]=\\\"expert\\\">\\n          </mat-form-field>\\n        </mat-card-content>\\n        <mat-card-actions>\\n            <button (click)=\\\"save()\\\" mat-button>SAVE</button>\\n            <button (click)=\\\"action=undefined\\\" mat-button>CANCEL</button>\\n          </mat-card-actions>\\n    </mat-card> \\n  </div>\\n\\n  <div *ngIf=\\\"action && action.shop\\\" fxLayout=\\\"row\\\"  fxLayout.xs=\\\"column\\\" fxLayoutAlign.xs=\\\"start center\\\" fxLayoutWrap fxLayoutGap=\\\"1.5%\\\" fxLayoutAlign=\\\"left\\\">\\n      <mat-card class=\\\"action-card\\\">\\n        <mat-card-header>\\n          <mat-card-title>Shop</mat-card-title>\\n          <mat-card-subtitle>Add shop account</mat-card-subtitle>\\n        </mat-card-header>\\n        <img mat-card-image [src]=\\\"'../assets/' + 'shop.png'\\\">\\n  \\n        <mat-card-content >\\n            <mat-form-field>\\n              <input matInput name=\\\"shop\\\" type=\\\"text\\\" placeholder=\\\"Phone number\\\" required [(ngModel)]=\\\"shop\\\">\\n            </mat-form-field>\\n          </mat-card-content>\\n          <mat-card-actions>\\n              <button (click)=\\\"save()\\\" mat-button>SAVE</button>\\n              <button (click)=\\\"action=undefined\\\" mat-button>CANCEL</button>\\n            </mat-card-actions>\\n      </mat-card> \\n  </div>\\n\\n  <div *ngIf=\\\"action && action.bike\\\" fxLayout=\\\"row\\\"  fxLayout.xs=\\\"column\\\" fxLayoutAlign.xs=\\\"start center\\\" fxLayoutWrap fxLayoutGap=\\\"1.5%\\\" fxLayoutAlign=\\\"left\\\">\\n      <mat-card class=\\\"action-card\\\">\\n        <mat-card-header>\\n          <mat-card-title>Bike Shop</mat-card-title>\\n          <mat-card-subtitle>Add bike shop</mat-card-subtitle>\\n        </mat-card-header>\\n        <img mat-card-image [src]=\\\"'../assets/' + 'bike-shop.png'\\\">\\n  \\n        <mat-card-content >\\n            <mat-form-field>\\n              <input matInput name=\\\"bike\\\" type=\\\"text\\\" placeholder=\\\"Phone number\\\" required [(ngModel)]=\\\"bike\\\">\\n            </mat-form-field>\\n          </mat-card-content>\\n          <mat-card-actions>\\n              <button (click)=\\\"save()\\\" mat-button>SAVE</button>\\n              <button (click)=\\\"action=undefined\\\" mat-button>CANCEL</button>\\n            </mat-card-actions>\\n      </mat-card> \\n  </div>\\n\"","import { Component, OnInit } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { AuthService } from '../auth.service';\nimport { Location } from '@angular/common';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { Subscription } from 'rxjs';\n\n@Component({\n  selector: 'app-admin',\n  templateUrl: './admin.component.html',\n  styleUrls: ['./admin.component.css']\n})\nexport class AdminComponent implements OnInit {\n  action: any;\n  expert: string;   // mobile number\n  shop: string;     // mobile number\n  bike: string;     // mobile number\n  mobile: string;   // admin mobile\n  admin: boolean;   // true if mobile\n  token: string;    // the Firebase Auth ID token JWT string.\n  process: boolean;\n\n  user_subs: Subscription;\n\n  constructor(\n    private authService: AuthService,\n    private router: Router,\n    private http: HttpClient,\n    private location: Location,\n    private route: ActivatedRoute\n    ) { }\n\n  ngOnInit() {\n    this.action = undefined;\n    this.expert = undefined;\n    this.shop = undefined;\n    this.bike = undefined;\n    this.token = undefined;\n    this.process = false;\n    this.user_subs = this.authService.getUser().subscribe((user) => {\n      if (user) {\n        this.mobile = user.phoneNumber;\n        user.getIdTokenResult()\n          .then((idTokenResult) => {\n            // Confirm the user is an Admin.\n            if (!!idTokenResult.claims.admin) {\n              this.admin = true;\n              this.token = idTokenResult.token;\n              console.log(`Admin account ${this.mobile}`);\n            } else {\n              this.admin = false;\n              this.token = undefined;\n            }\n        })\n        .catch((error) => {\n          console.log(error);\n        });\n      } else {\n        this.mobile = null;\n        this.admin = false;\n        this.token = undefined;\n      }\n    });\n  }\n\n  addExpert(): void {\n    console.log('Add expert account');\n    this.action = { expert: true };\n  }\n\n  addShop(): void {\n    console.log('Add shop account');\n    this.action = { shop: true };\n  }\n\n  addBikeShop(): void {\n    console.log('Add bike shop account');\n    this.action = { bike: true };\n  }\n\n  save(): void {\n    if (!this.action) {\n      return;\n    }\n    if (!this.token) {\n      return;\n    }\n    if (!this.mobile) {\n      return;\n    }\n    if (this.action.expert) {\n      console.log('Save expert');\n      this.claims(this.expert, 'expert');\n      this.action = undefined;\n    } else if (this.action.shop) {\n      console.log('Save shop');\n      this.claims(this.shop, 'shop');\n      this.action = undefined;\n    } else if (this.action.bike) {\n      console.log('Save bike');\n      this.claims(this.bike, 'bike');\n      this.action = undefined;\n    } else {\n      console.error('Invalid action');\n      this.action = undefined;\n    }\n  }\n\n  claims(phone: string, claim: string): void {\n    this.process = true;\n\n    const url = 'https://us-central1-cloud-firestore-test-d95bf.cloudfunctions.net/claims';\n    const data = { mobile: this.mobile, idToken: this.token, phone, claim };\n    this.http.post(url, data, { responseType: 'json' }).subscribe((res: string) => {\n      this.process = false;\n      console.log(res);\n      });\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { TagsComponent } from './tags/tags.component';\nimport { TagDetailComponent } from './tag-detail/tag-detail.component';\nimport { TagRegistrationComponent } from './tag-registration/tag-registration.component';\nimport { TagRegSmsComponent } from './tag-reg-sms/tag-reg-sms.component';\nimport { LandingComponent } from './landing/landing.component';\nimport { LoginComponent } from './login/login.component';\nimport { UserProfileComponent } from './user-profile/user-profile.component';\nimport { SmsConfirmationComponent } from './sms-confirmation/sms-confirmation.component';\nimport { AboutComponent } from './about/about.component';\nimport { ProfileUpdateComponent } from './profile-update/profile-update.component';\nimport { RideComponent } from './ride/ride.component';\nimport { RideDetailComponent } from './ride-detail/ride-detail.component';\nimport { DashboardComponent } from './dashboard/dashboard.component';\nimport { GetstartedComponent } from './getstarted/getstarted.component';\nimport { UsePointsComponent } from './use-points/use-points.component';\nimport { TnxDetailComponent } from './tnx-detail/tnx-detail.component';\nimport { ShoppingComponent } from './shopping/shopping.component';\nimport { ItemComponent } from './item/item.component';\nimport { ShoppingResultComponent } from './shopping-result/shopping-result.component';\nimport { FrameComponent } from './frame/frame.component';\nimport { AdminComponent } from './admin/admin.component';\nimport { ExpertComponent } from './expert/expert.component';\nimport { BikeshopComponent } from './bikeshop/bikeshop.component';\nimport { OrderComponent } from './order/order.component';\nimport { GeoRideComponent } from './geo-ride/geo-ride.component';\n\n\nconst routes: Routes = [\n  { path: '', redirectTo: '/landing', pathMatch: 'full' },\n  { path: 'landing', component: LandingComponent },\n  { path: 'tags', component: TagsComponent },\n  { path: 'reg', component: TagRegistrationComponent },\n  { path: 'tag/:id', component: TagDetailComponent },\n  { path: 'regsms/:id/:mobile', component: TagRegSmsComponent },\n  { path: 'login', component: LoginComponent },\n  { path: 'login/:page', component: LoginComponent },\n  { path: 'profile', component: UserProfileComponent },\n  { path: 'smsconfirm/:mobile', component: SmsConfirmationComponent },\n  { path: 'smsconfirm/:mobile/:page', component: SmsConfirmationComponent },\n  { path: 'about', component: AboutComponent },\n  { path: 'update', component: ProfileUpdateComponent },\n  { path: 'ride', component: RideComponent },\n  { path: 'georide', component: GeoRideComponent },\n  { path: 'ride/:id', component: RideDetailComponent },\n  { path: 'item/:id', component: ItemComponent },\n  { path: 'item/:id/:ref', component: ItemComponent },\n  { path: 'item/:id/:ref/:locked', component: ItemComponent },\n  { path: 'dashboard', component: DashboardComponent },\n  { path: 'shopping', component: ShoppingComponent },\n  { path: 'shoppingtag/:id', component: ShoppingComponent },\n  { path: 'shopping/:result', component: ShoppingResultComponent },\n  { path: 'getstarted', component: GetstartedComponent },\n  { path: 'use/:acc/:points', component: UsePointsComponent },\n  { path: 'tnx/:hash', component: TnxDetailComponent },\n  { path: 'frame', component: FrameComponent },\n  { path: 'frame/:id', component: FrameComponent },\n  { path: 'frame/:id/:locked', component: FrameComponent },\n  { path: 'admin', component: AdminComponent },\n  { path: 'expert', component: ExpertComponent },\n  { path: 'bikeshop', component: BikeshopComponent },\n  { path: 'order/:ref', component: OrderComponent },\n];\n\n@NgModule({\n  exports: [ RouterModule ],\n  imports: [ RouterModule.forRoot(routes) ],\n})\nexport class AppRoutingModule { }\n","module.exports = \"\"","module.exports = \"<!--The content below is only a placeholder and can be replaced.-->\\n<app-nav-bar></app-nav-bar>\\n<router-outlet></router-outlet>\\n\\n\\n\"","import { Component, OnInit } from '@angular/core';\nimport { TagService } from './tag.service';\nimport { Tag } from './tag';\n\n@Component({\n  selector: 'app-root',\n  styleUrls: ['./app.component.css'],\n  templateUrl: './app.component.html'\n})\nexport class AppComponent {\n  title = `Giro d'Iseo`;\n}\n","import { BrowserModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\n\nimport { AppComponent } from './app.component';\n\nimport { AngularFireModule } from '@angular/fire';\nimport { AngularFirestoreModule } from '@angular/fire/firestore';\nimport { AngularFireStorageModule } from '@angular/fire/storage';\nimport { environment } from '../environments/environment';\nimport { TagsComponent } from './tags/tags.component';\nimport { MatListModule } from '@angular/material/list';\nimport { MatButtonModule } from '@angular/material/button';\nimport { AppRoutingModule } from './/app-routing.module';\nimport { FormsModule } from '@angular/forms';\nimport { MatInputModule } from '@angular/material/input';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\nimport { MatDividerModule } from '@angular/material/divider';\nimport { MatSelectModule } from '@angular/material/select';\nimport { MatIconModule } from '@angular/material/icon';\nimport { TagDetailComponent } from './tag-detail/tag-detail.component';\nimport { TagRegistrationComponent } from './tag-registration/tag-registration.component';\nimport { TagRegSmsComponent } from './tag-reg-sms/tag-reg-sms.component';\nimport { AuthService } from './auth.service';\nimport { AngularFireAuthModule } from 'angularfire2/auth';\nimport { NavBarComponent } from './nav-bar/nav-bar.component';\nimport { MatMenuModule } from '@angular/material/menu';\nimport { LandingComponent } from './landing/landing.component';\nimport { MatGridListModule } from '@angular/material/grid-list';\nimport { LoginComponent } from './login/login.component';\nimport { SmsConfirmationComponent } from './sms-confirmation/sms-confirmation.component';\nimport { UserProfileComponent } from './user-profile/user-profile.component';\nimport { TagService } from './tag.service';\nimport { MatExpansionModule } from '@angular/material/expansion';\nimport { DatePipe } from '@angular/common';\nimport { AboutComponent } from './about/about.component';\nimport { ProfileUpdateComponent } from './profile-update/profile-update.component';\nimport { MatPaginatorModule } from '@angular/material/paginator';\nimport { MatDatepickerModule } from '@angular/material/datepicker';\nimport { MatNativeDateModule } from '@angular/material';\nimport { RiderService } from './rider.service';\nimport { RideComponent } from './ride/ride.component';\nimport { ClockService } from './clock.service';\nimport { MatTableModule } from '@angular/material/table';\nimport { RideDetailComponent } from './ride-detail/ride-detail.component';\nimport { DashboardComponent } from './dashboard/dashboard.component';\nimport { GravatarModule } from 'ngx-gravatar';\nimport { ImagesService } from './images.service';\nimport { MatProgressBarModule } from '@angular/material/progress-bar';\nimport { GetstartedComponent } from './getstarted/getstarted.component';\nimport { VgCoreModule } from 'videogular2/core';\nimport { VgControlsModule } from 'videogular2/controls';\nimport { VgOverlayPlayModule } from 'videogular2/overlay-play';\nimport { VgBufferingModule } from 'videogular2/buffering';\nimport { MatCardModule } from '@angular/material/card';\nimport { EthcontractService } from './ethereum/ethcontract.service';\nimport { EthereumModule } from './ethereum/ethereum.module';\nimport { MatSlideToggleModule } from '@angular/material/slide-toggle';\nimport { HttpClientModule, HttpBackend } from '@angular/common/http';\nimport { CustExtBrowserXhr } from './cust-ext-browser-xhr';\nimport { ClipboardModule } from 'ngx-clipboard';\nimport { ZXingScannerModule } from '@zxing/ngx-scanner';\nimport { UsePointsComponent } from './use-points/use-points.component';\nimport { MatSliderModule } from '@angular/material/slider';\nimport { TransactionService } from './transaction.service';\nimport { TnxDetailComponent } from './tnx-detail/tnx-detail.component';\nimport { QrcodeDialogComponent } from './qrcode-dialog/qrcode-dialog.component';\nimport { MatDialogModule } from '@angular/material/dialog';\nimport { NgxKjuaModule } from 'ngx-kjua';\nimport { MatRippleModule } from '@angular/material/core';\nimport { FlexLayoutModule } from '@angular/flex-layout';\nimport { HeaderComponent } from './header/header.component';\nimport { UserTagsComponent } from './user-tags/user-tags.component';\nimport { UserTnxComponent } from './user-tnx/user-tnx.component';\nimport { ShoppingComponent } from './shopping/shopping.component';\nimport { OrderService } from './order.service';\nimport { ItemComponent } from './item/item.component';\nimport { ItemDialogComponent } from './item-dialog/item-dialog.component';\nimport { ShoppingResultComponent } from './shopping-result/shopping-result.component';\nimport { MatProgressSpinnerModule } from '@angular/material/progress-spinner';\nimport { FrameComponent } from './frame/frame.component';\nimport { MatChipsModule } from '@angular/material/chips';\nimport { MatRadioModule } from '@angular/material/radio';\nimport { AdminComponent } from './admin/admin.component';\nimport { ExpertComponent } from './expert/expert.component';\nimport { BikeshopComponent } from './bikeshop/bikeshop.component';\nimport { OrderComponent } from './order/order.component';\nimport { UserOrdersComponent } from './user-orders/user-orders.component';\nimport { GeoRideComponent } from './geo-ride/geo-ride.component';\nimport { AgmCoreModule, GoogleMapsAPIWrapper } from '@agm/core';\n\nconst gMapsKey = 'AIzaSyDvc8SLjfA0D-hLcNrB01q58Uh2As98A14';\n\n\n@NgModule({\n  declarations: [\n    AppComponent,\n    TagsComponent,\n    TagDetailComponent,\n    TagRegistrationComponent,\n    TagRegSmsComponent,\n    NavBarComponent,\n    LandingComponent,\n    LoginComponent,\n    SmsConfirmationComponent,\n    UserProfileComponent,\n    AboutComponent,\n    ProfileUpdateComponent,\n    RideComponent,\n    RideDetailComponent,\n    DashboardComponent,\n    GetstartedComponent,\n    UsePointsComponent,\n    TnxDetailComponent,\n    QrcodeDialogComponent,\n    HeaderComponent,\n    UserTagsComponent,\n    UserTnxComponent,\n    ShoppingComponent,\n    ItemComponent,\n    ItemDialogComponent,\n    ShoppingResultComponent,\n    FrameComponent,\n    AdminComponent,\n    ExpertComponent,\n    BikeshopComponent,\n    OrderComponent,\n    UserOrdersComponent,\n    GeoRideComponent,\n  ],\n  entryComponents: [\n    QrcodeDialogComponent,\n    ItemDialogComponent\n  ],\n  imports: [\n    BrowserModule,\n    BrowserAnimationsModule,\n    AngularFireModule.initializeApp(environment.firebase),\n    AngularFirestoreModule,\n    AngularFireStorageModule,\n    MatListModule,\n    MatButtonModule,\n    AppRoutingModule,\n    FormsModule,\n    MatInputModule,\n    MatDividerModule,\n    MatSelectModule,\n    MatIconModule,\n    AngularFireAuthModule,\n    MatMenuModule,\n    MatGridListModule,\n    MatExpansionModule,\n    MatPaginatorModule,\n    MatDatepickerModule,\n    MatNativeDateModule,\n    MatTableModule,\n    GravatarModule,\n    MatProgressBarModule,\n    VgCoreModule,\n    VgBufferingModule,\n    VgControlsModule,\n    VgOverlayPlayModule,\n    MatCardModule,\n    EthereumModule,\n    MatSlideToggleModule,\n    HttpClientModule,\n    ClipboardModule,\n    ZXingScannerModule,\n    MatSliderModule,\n    MatDialogModule,\n    NgxKjuaModule,\n    MatRippleModule,\n    FlexLayoutModule,\n    MatProgressSpinnerModule,\n    MatChipsModule,\n    MatRadioModule,\n    AgmCoreModule.forRoot({\n      apiKey: gMapsKey\n    })\n  ],\n  providers: [\n    AngularFirestoreModule,\n    AngularFireAuthModule,\n    AuthService,\n    TagService,\n    DatePipe,\n    RiderService,\n    ClockService,\n    ImagesService,\n    EthcontractService,\n    TransactionService,\n    OrderService,\n    { provide: HttpBackend, useClass: CustExtBrowserXhr },\n    GoogleMapsAPIWrapper\n  ],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n","import { Injectable } from '@angular/core';\nimport { Router } from '@angular/router';\n\nimport { AngularFireAuth } from 'angularfire2/auth';\nimport * as firebase from 'firebase/app';\nimport { Observable, of  } from 'rxjs';\n\n@Injectable()\nexport class AuthService {\n  private user: Observable<firebase.User>;\n  private confirmation: firebase.auth.ConfirmationResult;\n  private userDetails: firebase.User = null;\n\n  constructor(private _firebaseAuth: AngularFireAuth, private router: Router) {\n      this.user = _firebaseAuth.authState;\n\n      this.user.subscribe((user) => {\n        if (user) {\n          this.userDetails = user;\n          console.log(`AuthService: constructor: userDetails:`);\n          console.log(this.userDetails);\n        } else {\n          this.userDetails = null;\n        }\n      }\n    );\n  }\n\n  getUser(): Observable<firebase.User> {\n    return this.user;\n  }\n\n  signInWithPhoneNumber(phoneNumber: string, appVerifier: any, cb: Function) {\n    this._firebaseAuth.auth.signInWithPhoneNumber(phoneNumber, appVerifier)\n      .then(confirmationResult => {\n        this.confirmation = confirmationResult; // make a copy\n        console.log(`AuthService: signInWithPhoneNumber: confirmation object`);\n        console.log(this.confirmation);\n\n        cb(null, confirmationResult);\n      })\n      .catch(error => {\n        console.error(`AuthService: signInWithPhoneNumber: ${error}`);\n        cb(error, null);\n      });\n  }\n\n  getConfirmation(code: string, cb: Function) {\n    if (!this.confirmation) {\n      const errMsg = 'AuthSevice: error: the confirmationResult object is missing';\n      console.error(errMsg);\n      cb(errMsg, null);\n    } else {\n      // check confirmation\n      this.confirmation.confirm(code)\n        .then(result => { this.user = of(result.user); cb(null, result.user); })\n        .catch(error => cb(error, null));\n    }\n  }\n\n  authenticated(): boolean {\n    if (this.userDetails == null ) {\n      return false;\n    } else {\n      return true;\n    }\n  }\n\n  getUID(): string | null {\n    if (this.userDetails == null ) {\n      return null;\n    } else {\n      return this.userDetails.uid;\n    }\n  }\n\n  logout(): void {\n    this._firebaseAuth.auth.signOut().then(() => {\n      // Sign-out successful.\n      console.log(`AuthService: sing out`);\n      this.router.navigate(['/']);\n    }).catch((error) => {\n      console.error(`AuthService: error: ${error}`);\n    });\n  }\n\n  getUserPhone(): string | null {\n    if (!this.userDetails) {\n      return null;\n    } else {\n      return this.userDetails.phoneNumber;\n    }\n  }\n\n  getUserName(): string | null {\n    if (!this.userDetails) {\n      return null;\n    } else {\n      return this.userDetails.displayName;\n    }\n  }\n\n  getUserEmail(): string | null {\n    if (!this.userDetails) {\n      return null;\n    } else {\n      return this.userDetails.email;\n    }\n  }\n\n  getUserPhotoURL(): string | null {\n    if (!this.userDetails) {\n      return null;\n    } else {\n      return this.userDetails.photoURL;\n    }\n  }\n\n  updateProfileCB(username: string, photoURL: string, cb: Function): void {\n    const user = this._firebaseAuth.auth.currentUser;\n    user.updateProfile({ displayName: username, photoURL: photoURL })\n      .then(() => cb(null))\n      .catch((error) => cb(error));\n  }\n\n  updateEmailCB(email: string, cb: Function): void {\n    const user = this._firebaseAuth.auth.currentUser;\n    user.updateEmail(email)\n      .then(() => cb(null))\n      .catch((error) => cb(error));\n  }\n}\n","module.exports = \".message {\\n    color: red;\\n}\\ntable {\\n    width: 100%;\\n  }\\n.mat-cell .mat-icon {\\n    -webkit-transform: scale(0.6);\\n            transform: scale(0.6);\\n}\\n.payment {\\n  color: gold;\\n}\\n.bike {\\n  color: green;\\n}\\n.error {\\n  color: red;\\n}\\n.test {\\n  color: gray;\\n}\"","module.exports = \"<app-header [title]=\\\"'Bikes'\\\"></app-header>\\n<br>\\n<div *ngIf=\\\"!action\\\" fxLayout=\\\"row\\\"  fxLayout.xs=\\\"column\\\" fxLayoutAlign.xs=\\\"start center\\\" fxLayoutWrap fxLayoutGap=\\\"1.5%\\\" fxLayoutAlign=\\\"left\\\">\\n    <mat-card (click)=\\\"action={inspect:true}\\\" class=\\\"action-card\\\">\\n        <mat-card-header>\\n          <mat-card-title>Bike</mat-card-title>\\n          <mat-card-subtitle>Inspect bike</mat-card-subtitle>\\n        </mat-card-header>\\n        <img mat-card-image [src]=\\\"'../assets/' + 'bike-shop.png'\\\">\\n    </mat-card>\\n\\n    <mat-card (click)=\\\"action={claim:true}\\\" class=\\\"action-card\\\">\\n        <mat-card-header>\\n          <mat-card-title>Claim</mat-card-title>\\n          <mat-card-subtitle>Make Claim</mat-card-subtitle>\\n        </mat-card-header>\\n        <img mat-card-image [src]=\\\"'../assets/' + 'claim.png'\\\">\\n    </mat-card>\\n\\n</div>\\n\\n<div *ngIf=\\\"action && action.inspect\\\" fxLayout=\\\"row\\\"  fxLayout.xs=\\\"column\\\" fxLayoutAlign.xs=\\\"start center\\\" fxLayoutWrap fxLayoutGap=\\\"1.5%\\\" fxLayoutAlign=\\\"left\\\">\\n    <mat-card class=\\\"action-card\\\">\\n      <mat-card-header>\\n        <mat-card-title>Bike</mat-card-title>\\n        <mat-card-subtitle>Start inspection</mat-card-subtitle>\\n      </mat-card-header>\\n      <img mat-card-image [src]=\\\"'../assets/' + 'bike-shop.png'\\\">\\n      <p class=\\\"message\\\" *ngIf=\\\"msg\\\">{{msg}}</p>\\n\\n      <mat-card-content >\\n          <mat-form-field>\\n            <input matInput name=\\\"tagid\\\" type=\\\"text\\\" placeholder=\\\"Tag Id or mobile start +\\\" required [(ngModel)]=\\\"tagid\\\">\\n          </mat-form-field>\\n        </mat-card-content>\\n        <mat-card-actions>\\n            <button [disabled]=\\\"!tagid\\\" (click)=\\\"startInspection()\\\" mat-button>START</button>\\n            <button (click)=\\\"action=undefined;msg=undefined;tagid=undefined\\\" mat-button>CANCEL</button>\\n          </mat-card-actions>\\n    </mat-card> \\n</div>\\n\\n<div *ngIf=\\\"action && action.claim\\\" fxLayout=\\\"row\\\"  fxLayout.xs=\\\"column\\\" fxLayoutAlign.xs=\\\"start center\\\" fxLayoutWrap fxLayoutGap=\\\"1.5%\\\" fxLayoutAlign=\\\"left\\\">\\n    <mat-card class=\\\"action-card\\\">\\n      <mat-card-header>\\n        <mat-card-title>Claim</mat-card-title>\\n        <mat-card-subtitle>Start claim process</mat-card-subtitle>\\n      </mat-card-header>\\n      <img mat-card-image [src]=\\\"'../assets/' + 'claim.png'\\\">\\n      <p class=\\\"message\\\" *ngIf=\\\"msg\\\">{{msg}}</p>\\n\\n      <mat-card-content >\\n          <mat-form-field>\\n            <input matInput name=\\\"tagid\\\" type=\\\"text\\\" placeholder=\\\"Enter Tag Id\\\" required [(ngModel)]=\\\"tagid\\\">\\n          </mat-form-field>\\n        </mat-card-content>\\n        <mat-card-actions>\\n            <button (click)=\\\"startInspection()\\\" mat-button>START</button>\\n            <button (click)=\\\"action=undefined;msg=undefined\\\" mat-button>CANCEL</button>\\n          </mat-card-actions>\\n    </mat-card> \\n</div>\\n\\n<div *ngIf=\\\"action && action.selection\\\" fxLayout=\\\"row\\\" fxLayoutWrap=\\\"wrap\\\" fxLayoutAlign=\\\"start center\\\">\\n\\n    <div fxFlex=\\\"2\\\"></div>\\n    <div fxFlex=\\\"78\\\"><h4>Select tag to start</h4></div>\\n   \\n\\n    <div fxFlex=\\\"8\\\">\\n        <button (click)=\\\"action={inspect: true}\\\" mat-icon-button>\\n            <mat-icon>close</mat-icon>\\n          </button>\\n    </div>\\n    <div fxFlex=\\\"2\\\"></div>\\n</div>\\n\\n<div *ngIf=\\\"action && action.selection\\\" fxLayout=\\\"row\\\"  fxLayout.xs=\\\"column\\\" fxLayoutAlign.xs=\\\"start center\\\" fxLayoutWrap fxLayoutGap=\\\"1.5%\\\" fxLayoutAlign=\\\"left\\\">\\n    \\n    <table *ngIf=\\\"tags.length>0\\\" mat-table [dataSource]=\\\"tags | slice:start:end\\\" class=\\\"mat-elevation-z8\\\">\\n\\n        <!--- Note that these columns can be defined in any order.\\n              The actual rendered columns are set as a property on the row definition\\\" -->\\n      \\n        \\n  \\n        <!-- Position Column -->\\n  \\n        <ng-container matColumnDef=\\\"status\\\">\\n            <th mat-header-cell *matHeaderCellDef> </th>\\n            <td mat-cell *matCellDef=\\\"let element\\\"> <mat-icon [ngClass]=\\\"status(element)\\\">radio_button_checked</mat-icon></td>\\n          </ng-container>\\n  \\n        <ng-container matColumnDef=\\\"id\\\">\\n          <th mat-header-cell *matHeaderCellDef> ID </th>\\n          <td mat-cell *matCellDef=\\\"let element\\\"> {{showTagId(element.id)}}</td>\\n        </ng-container>\\n  \\n        <!-- Position Column -->\\n        <ng-container matColumnDef=\\\"date\\\">\\n          <th mat-header-cell *matHeaderCellDef> Date </th>\\n          <td mat-cell *matCellDef=\\\"let element\\\"> {{element.regDate}}</td>\\n        </ng-container>\\n      \\n        <!-- Name Column -->\\n        <ng-container matColumnDef=\\\"mobile\\\">\\n          <th mat-header-cell *matHeaderCellDef> Mobile </th>\\n          <td mat-cell *matCellDef=\\\"let element\\\"> {{showMobile(element.reg.mobile)}}</td>\\n        </ng-container>\\n      \\n  \\n        <!-- Weight Column -->\\n        <ng-container matColumnDef=\\\"link\\\">\\n            <th mat-header-cell *matHeaderCellDef> Start </th>\\n            <td mat-cell *matCellDef=\\\"let element\\\"> <button (click)=\\\"gotoTagById(element)\\\" mat-icon-button> <mat-icon>play_arrow</mat-icon></button> </td>\\n          </ng-container>\\n      \\n      \\n        <tr mat-header-row *matHeaderRowDef=\\\"displayedColumns\\\"></tr>\\n        <tr mat-row *matRowDef=\\\"let row; columns: displayedColumns;\\\"></tr>\\n      </table>\\n      <br>\\n      \\n  <mat-paginator *ngIf=\\\"tags.length>0\\\" [length]=\\\"tags.length\\\"\\n                [pageSize]=\\\"10\\\"\\n                [pageSizeOptions]=\\\"[1, 5, 10, 25, 100]\\\"\\n                (page)=\\\"setPage($event)\\\">\\n  </mat-paginator>\\n  </div>\"","import { Component, OnInit } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { AuthService } from '../auth.service';\nimport { Location } from '@angular/common';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { Observable, Subscription } from 'rxjs';\nimport { Action } from 'rxjs/internal/scheduler/Action';\nimport { Frame, Bike, Rider, brands } from '../rider';\nimport { TagService } from '../tag.service';\nimport { Tag } from '../tag';\nimport { OrderService } from '../order.service';\nimport { Order, Payment, ORDERSTATUS } from '../order';\nimport { ReturnStatement } from '@angular/compiler';\nimport { PageEvent } from '@angular/material';\nimport { DatePipe } from '@angular/common';\n\n\n@Component({\n  selector: 'app-bikeshop',\n  templateUrl: './bikeshop.component.html',\n  styleUrls: ['./bikeshop.component.css']\n})\nexport class BikeshopComponent implements OnInit {\n  action: any;\n  tagid: string;\n  tag: Tag;\n  msg: string;\n  order: Order;\n  mobile: string;\n  tags: Tag[];\n  start: number;\n  end: number;\n\n  displayedColumns: string[] = ['status', 'id', 'date', 'mobile', 'link'];\n\n  constructor(\n    private authService: AuthService,\n    private tagService: TagService,\n    private router: Router,\n    private http: HttpClient,\n    private location: Location,\n    private route: ActivatedRoute,\n    private orderService: OrderService,\n    private datePipe: DatePipe\n  ) { }\n\n  ngOnInit() {\n    this.tag = undefined;\n    this.tagid = undefined;\n    this.action = undefined;\n    this.msg = undefined;\n    this.mobile = undefined;\n    this.start = 0;\n    this.end = 10;\n  }\n\n  startInspection() {\n    if (!this.action) {\n      return;\n    }\n    if (this.action.inspect) {\n      console.log('Start inspection');\n      if (this.tagid.startsWith('+')) {\n        this.mobile = this.tagid;\n        this.tagService.getTagsByMobile(this.mobile).subscribe(tags => {\n          if (tags.length > 0 ) {\n            this.action = {selection: true};\n            this.tags = tags;\n          } else {\n            this.action = {inspect: true};\n            this.msg = `Tag is not found`;\n          }\n        });\n        return;\n      }\n      this.tagService.getTagById(this.tagid)\n        .subscribe(tags => {\n          if (tags.length > 0) {\n            this.tag = tags[0];\n            if (!this.tag.payment) {\n              this.msg = 'TAG is not paid';\n              console.log(`TAG ${this.tag.id} is not paid`);\n              return;\n            }\n            const payment = this.tag.payment;\n            this.orderService.getOrderByRef(payment.reference).subscribe(orders => {\n              if (orders.length > 0) {\n                this.order = orders[0];\n                if (this.order.status === ORDERSTATUS.PAID || this.order.status === ORDERSTATUS.CLOSED ) {\n                  console.log(`Tag status is paid, start bike inspection`);\n                  if (this.tag.bike) {\n                    // bike inspection is done already\n                    this.msg = `Bike is inspected already`;\n                    return;\n                  }\n                  this.msg = undefined;\n                  this.router.navigate([`/frame/${tags[0].id}`]);\n                } else {\n                  this.msg = `Wrong status ${this.order.status}`;\n                  return;\n                }\n              } else {\n                console.error(`The order for reference ${payment.reference} id not found`);\n              }\n            });\n          } else {\n            this.tag = undefined;\n            this.msg = 'Tag not found';\n            console.error('Tag not found');\n          }\n      });\n    } else if (this.action.claim) {\n      console.log('Start claim process');\n      this.tagService.getTagById(this.tagid)\n        .subscribe(tags => {\n          if (tags.length > 0) {\n            this.tag = tags[0];\n            this.msg = 'Process not defined';\n            // start claim process\n          } else {\n            this.tag = undefined;\n            this.msg = 'Tag not found';\n            console.error('Tag not found');\n          }\n      });\n    } else {\n      console.error('Invalid action');\n    }\n  }\n\n  status(tag: Tag): string {\n    if (tag.payment && tag.bike) {\n      return 'bike';\n    } else if (tag.bike && !tag.payment) {\n      return 'error';\n    } else if (!tag.bike && tag.payment) {\n      return 'payment';\n    } else {\n      return 'test';\n    }\n  }\n\n  setPage(e: PageEvent): void {\n    console.log(e);\n    const { pageIndex, pageSize } = e;\n    this.start = pageIndex * pageSize;\n    this.end = this.start + pageSize;\n  }\n\n\n  showMobile(mobile: string): string {\n    const start = mobile.length - 7;\n    if (start < 0) {\n      return mobile;\n    } else {\n      return `${mobile.slice(start, start + 3)}-${mobile.slice(start + 3, start + 5)}-${mobile.slice(start + 5)}`;\n    }\n  }\n\n  showTagId(id: string): string {\n    const start = id.length - 4;\n    if (id.length > 7) {\n      return `${id.slice(0, 3)}...${id.slice(start)}`;\n    } else {\n      return id;\n    }\n  }\n\n  gotoTagById(tag: Tag): void {\n    this.action = { inspect: true };\n    this.tagid = tag.id;\n    this.mobile = undefined;\n    this.msg = undefined;\n  }\n\n}\n","import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ClockService {\n  private clock: Observable<Date>;\n  private timeoutId;\n\n  constructor() {\n    this.clock = new Observable(obsever => {\n      this.timeoutId = setTimeout(() => {\n        obsever.next(new Date);\n        return {unsubscribe() {\n          clearTimeout(this.timeoutId);\n        }};\n      }, 100);\n    });\n  }\n  getClock(): Observable<Date> {\n    return this.clock;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { HttpXhrBackend, HttpRequest, HttpEvent, XhrFactory } from '@angular/common/http';\nimport { Observable } from 'rxjs';\n\n@Injectable()\nexport class CustExtBrowserXhr extends HttpXhrBackend {\n    constructor(xhrFactory: XhrFactory) {\n        super(xhrFactory);\n    }\n    handle(req: HttpRequest<any>): Observable<HttpEvent<any>> {\n        const event = super.handle(req);\n        req.headers.set('Access-Control-Allow-Origin', '*');\n        return event;\n      }\n}\n","module.exports = \"table {\\n    width: 100%;\\n  }\\n\\n.mat-cell .mat-icon {\\n    -webkit-transform: scale(0.6);\\n            transform: scale(0.6);\\n}\"","module.exports = \"<app-header [back]=\\\"true\\\" [title]=\\\"'Dashboard'\\\" [reload]=\\\"true\\\" [parent]=\\\"'dashboard'\\\"></app-header>\\n\\n<div *ngIf=\\\"rides\\\">\\n  <table *ngIf=\\\"rides.length>0\\\" mat-table [dataSource]=\\\"rides | slice:start:end\\\" class=\\\"mat-elevation-z8\\\">\\n    <!-- Position Column -->\\n    <ng-container matColumnDef=\\\"position\\\">\\n      <th mat-header-cell *matHeaderCellDef> No. </th>\\n      <td mat-cell *matCellDef=\\\"let element; let i = index;\\\"> {{i+1}} </td>\\n    </ng-container>\\n\\n    <ng-container matColumnDef=\\\"avatar\\\">\\n        <th mat-header-cell *matHeaderCellDef></th>\\n        <td mat-cell *matCellDef=\\\"let element\\\"><img *ngIf=\\\"element.rider && element.rider.avatar\\\" ngxGravatar size=\\\"30\\\" [fallback]=\\\"'monsterid'\\\" [src]=\\\"element.rider.avatar\\\"></td>\\n      </ng-container>\\n\\n    <ng-container matColumnDef=\\\"nikname\\\">\\n      <th mat-header-cell *matHeaderCellDef> Rider </th>\\n      <td mat-cell *matCellDef=\\\"let element\\\"> {{element.rider?element.rider.nikname:\\\"N/A\\\"}}</td>\\n    </ng-container>\\n    \\n    <ng-container matColumnDef=\\\"date\\\">\\n      <th mat-header-cell *matHeaderCellDef> Date </th>\\n      <td mat-cell *matCellDef=\\\"let element\\\"> {{element.start|date:\\\"dd-MM-yyyy\\\"}}</td>\\n    </ng-container>\\n    \\n    <ng-container matColumnDef=\\\"start\\\">\\n      <th mat-header-cell *matHeaderCellDef> Start </th>\\n      <td mat-cell *matCellDef=\\\"let element\\\"> {{element.start|date:\\\"HH:mm\\\"}}</td>\\n    </ng-container>\\n    \\n    <ng-container matColumnDef=\\\"finish\\\">\\n      <th mat-header-cell *matHeaderCellDef> Finish </th>\\n      <td mat-cell *matCellDef=\\\"let element\\\"> {{element.finish|date:\\\"HH:mm:ss\\\"}}</td>\\n    </ng-container>\\n      \\n    <ng-container matColumnDef=\\\"time\\\">\\n      <th mat-header-cell *matHeaderCellDef> Time </th>\\n      <td mat-cell *matCellDef=\\\"let element\\\"> {{(element.finish-element.start)|date:\\\"HH:mm:ss\\\":\\\"+00\\\"}} </td>\\n    </ng-container>\\n    \\n    <ng-container matColumnDef=\\\"link\\\">\\n      <th mat-header-cell *matHeaderCellDef> Details </th>\\n      <td mat-cell *matCellDef=\\\"let element\\\"> <button (click)=\\\"gotoRide(element.id)\\\" mat-icon-button> <mat-icon>call_made</mat-icon></button> </td>\\n    </ng-container>\\n      \\n    <tr mat-header-row *matHeaderRowDef=\\\"displayedColumns\\\"></tr>\\n    <tr mat-row *matRowDef=\\\"let row; columns: displayedColumns;\\\"></tr>\\n  </table>\\n  <br>\\n      \\n  <mat-paginator *ngIf=\\\"rides.length>0\\\" [length]=\\\"rides.length\\\"\\n                [pageSize]=\\\"10\\\"\\n                [pageSizeOptions]=\\\"[1, 5, 10, 25, 100]\\\"\\n                (page)=\\\"setPage($event)\\\">\\n  </mat-paginator>\\n</div>\\n\"","import { Component, OnInit, OnDestroy, AfterViewInit, NgZone } from '@angular/core';\nimport { Router, ActivatedRoute, ParamMap } from '@angular/router';\nimport { Location } from '@angular/common';\nimport { TagService } from '../tag.service';\nimport { AuthService } from '../auth.service';\nimport { RiderService } from '../rider.service';\nimport { RideService } from '../ride.service';\nimport { Rider, Bike} from '../rider';\nimport { Ride } from '../ride';\nimport { Tag } from '../tag';\nimport { PageEvent } from '@angular/material';\nimport { DatePipe } from '@angular/common';\nimport { Subscription, Observable, timer } from 'rxjs';\nimport { Parameters, RideParameters } from '../parameters';\n\n@Component({\n  selector: 'app-dashboard',\n  templateUrl: './dashboard.component.html',\n  styleUrls: ['./dashboard.component.css'],\n  providers: [RideParameters]\n})\nexport class DashboardComponent implements OnInit, OnDestroy {\n  rides: Ride[];\n  start: number;\n  end: number;\n\n  sub: Subscription;\n\n  displayedColumns: string[] = ['position', 'avatar', 'nikname',  'start', 'time', 'link'];\n\n  constructor(\n    private zone: NgZone,\n    private tagService: TagService,\n    private authService: AuthService,\n    private route: ActivatedRoute,\n    private router: Router,\n    private riderService: RiderService,\n    private rideService: RideService,\n    private datePipe: DatePipe,\n    private location: Location,\n    private param: RideParameters\n    ) { console.log(this.param); }\n\n  ngOnInit() {\n    this.start = 0;\n    this.end = 10;\n    this.getRides();\n  }\n\n  ngOnDestroy() {\n    this.sub.unsubscribe();\n  }\n\n  setPage(e: PageEvent): void {\n    console.log(e);\n    const { pageIndex, pageSize } = e;\n    this.start = pageIndex * pageSize;\n    this.end = this.start + pageSize;\n  }\n\n  update(): void {\n    this.rideService.setOrder('time');\n  }\n\n  gotoBack(): void {\n    this.location.back();\n  }\n\n  getRides(): void {\n    this.sub = this.rideService.getRides()\n      .subscribe(rides => this.rides = rides);\n  }\n\n  gotoRide(id: number): void {\n    this.router.navigate([`/ride/${id}`]);\n  }\n\n}\n","import { Injectable, Inject } from '@angular/core';\nimport { TransactionService } from '../transaction.service';\nimport { Transaction } from '../transaction';\n\nimport { WEB3 } from './tokens';\nimport Web3 from 'web3';\n\n\nimport { Observable, bindNodeCallback, of } from 'rxjs';\nimport { map, tap, catchError } from 'rxjs/operators';\n\ndeclare function require(url: string);\ndeclare let window: any;\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class EthcontractService {\n\n  readonly ethHdWallet = require('eth-hd-wallet');\n  readonly TokenLoyalty = require('./build/contracts/TokenLoyalty.json');\n  readonly TokenContainer = require('./build/contracts/TokenContainer.json');\n  readonly TokenPool = require('./build/contracts/TokenPool.json');\n\n  private mnemonic: string;\n  private wallet: any;\n  private contract: any;\n  private accounts: string[];\n  private container: any;\n  private pool: any;\n\n  constructor(@Inject(WEB3) private web3: Web3, private transactions: TransactionService) {\n    const { generateMnemonic, EthHdWallet } = this.ethHdWallet;\n\n    this.mnemonic = 'dish hip orange move divert opera primary sketch empty pistol car boil';\n    this.wallet = EthHdWallet.fromMnemonic(this.mnemonic);\n    this.accounts = this.wallet.generateAddresses(2);\n\n    this.contract = new web3.eth.Contract(\n      this.TokenLoyalty.abi,\n      this.TokenLoyalty.networks['4'].address,\n      {from: this.accounts[0]}\n      );\n\n    this.container = new web3.eth.Contract(\n      this.TokenContainer.abi,\n      this.TokenContainer.networks['4'].address,\n      {from: this.accounts[0]}\n      );\n\n    this.pool = new web3.eth.Contract(\n      this.TokenPool.abi,\n      this.TokenPool.networks['4'].address,\n      {from: this.accounts[0]}\n    );\n\n    if (typeof this.contract !== 'undefined') {\n      console.log(`EthcontractService: TokenLoyalty contract is here ${this.contract.options.address}`);\n    }\n\n    if (typeof this.container !== 'undefined') {\n      console.log(`EthcontractService: TokenContainer contract is here ${this.container.options.address}`);\n    }\n\n    if (typeof this.pool !== 'undefined') {\n      console.log(`EthcontractService: TokenPool contract is here ${this.pool.options.address}`);\n    }\n\n    console.log(this.accounts);\n    console.log(this.mnemonic);\n  }\n\n  alife() {\n    if (typeof this.web3 !== 'undefined') {\n      console.log('EthcontractService: web3 is here');\n    } else {\n      console.error('EthcontractService: web3 is not injected');\n    }\n  }\n\n  getAccounts(): Observable<string[]> {\n    return of(this.accounts);\n  }\n\n  getMnemonic(): Observable<string> {\n    return of(this.mnemonic);\n  }\n\n  getBalance(): Observable<any[] | Error> {\n    console.log('getBalance');\n    return bindNodeCallback(this.contract.methods.getBalance().call)({from: this.accounts[0], gasPrice: '8000000000', gas: '1000000'});\n  }\n\n  getAccountBalance(account: string | null): Observable<string[]> {\n    const acc = account ? account : this.accounts[0];\n    console.log(`getAccountBalance: ${acc}`);\n    return bindNodeCallback(this.web3.eth.getBalance)(acc);\n  }\n\n  getAccountNonce(account: string | null): Observable<any[]> {\n    const acc = account ? account : this.accounts[0];\n    console.log(`getAccountBalance: ${acc}`);\n    return bindNodeCallback(this.web3.eth.getTransactionCount)(acc);\n  }\n\n  getTokenBalance(account: string | null): Observable<string[]> {\n    const acc = account ? account : this.accounts[0];\n    console.log(`getTokenBalance: ${acc}`);\n    return bindNodeCallback(this.container.methods.balanceOf(acc).call)({from: this.accounts[0], gasPrice: '8000000000', gas: '1000000'});\n  }\n\n  getTokenIds(): Observable<any[]> {\n    // tslint:disable-next-line:max-line-length\n    return bindNodeCallback(this.container.methods.tokensOfOwner(this.accounts[0]).call)({from: this.accounts[0], gasPrice: '8000000000', gas: '1000000'});\n  }\n\n  transfer(account: string): void {\n    // get token id\n    this.getTokenIds().subscribe(result => {\n      console.log('Token ID :' + result[0]);\n      const id = result[0];\n      const data = this.container.methods.transfer(account, id).encodeABI();\n      console.log('Data: ' + data);\n      // get account nonce\n      this.getAccountNonce(null).subscribe(nonce => {\n        console.log(`Nonce ${nonce}`);\n        const rawTx = this.wallet.signTransaction({\n          from: this.accounts[0],\n          to: this.container.options.address,\n          value: 0x0,\n          nonce: nonce,\n          gasPrice: 80000000000,\n          gasLimit: 1000000,\n          chainId: 4,\n          data: data,\n        });\n        console.log(rawTx);\n        this.web3.eth.sendSignedTransaction(rawTx)\n          .on('receipt', (receipt) => {\n            const tnx: Transaction = {\n              from: this.accounts[0],\n              to: this.container.options.address,\n              value: 0x0,\n              nonce: +nonce,\n              chainId: 4,\n              points: 1,\n              hash: receipt.transactionHash,\n              block: receipt.blockNumber\n            };\n            console.log(receipt);\n            console.log(tnx);\n            this.transactions.addTransaction(tnx);\n          })\n          .on('error', console.error);\n\n      });\n    });\n\n  }\n\n}\n","import { NgModule, ModuleWithProviders, Type, Optional } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n// Web3\nimport { WEB3 } from './tokens';\n\ndeclare function require(url: string);\n\nconst Web3 = require('web3');\n\n// Services\nimport { EthcontractService } from './ethcontract.service';\n\n@NgModule({\n imports: [CommonModule],\n declarations: [],\n providers: [ EthcontractService , {\n         provide: WEB3,\n         useFactory: () => new Web3('https://us-central1-cloud-firestore-test-d95bf.cloudfunctions.net/proxy')\n  }]\n})\nexport class EthereumModule {}\n","import { InjectionToken } from '@angular/core';\nimport Web3 from 'web3';\nexport const WEB3 = new InjectionToken<Web3>('web3');\n","module.exports = \"\"","module.exports = \"<p>\\n  expert works!\\n</p>\\n\"","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-expert',\n  templateUrl: './expert.component.html',\n  styleUrls: ['./expert.component.css']\n})\nexport class ExpertComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n}\n","module.exports = \".brand-card {\\n    max-width: 200px;\\n}\\n\\n.colnago-header-image {\\n    background-image: url('colnago-logo.png');\\n    background-size: cover;\\n}\\n\\n.pinarello-header-image {\\n    background-image: url('data:image/gif;base64,R0lGODdhyADIAOcAAAQCBISChMTCxOwOFPRKTPSChOTi5ERCRPSipPzCxOwuNPRmbPTy9CQiJKSipGRiZPyytPRaXPzS1Ow+RPzi5PSSlBQSFJSSlNTS1OweJFRSVPR2fDQyNLSytHRydPz6/PRSVPyqrPzKzPy6vOxGTPzq7PSKjOw2PPzy9PRiZPza3AwKDIyKjMzKzOwWHOzq7ExKTPRudCwqLKyqrGxqbPQ+RPSanBwaHJyanNza3OwmLFxaXPR+hDw6PLy6vHx6fPROVPSGjPymrPzGxOwyNPy2tPReZPzW1OxCRPzm5PR6fPRWXPyurPzOzPy+vPzu7Pz29AQGBISGhMTGxOwSHPRKVPSCjOTm5ERGRPSmrPRqbPT29CQmJKSmpGRmZPRaZPSWnBQWFJSWlNTW1OwiLFRWVDQ2NLS2tHR2dPz+/PRSXPRGTPSOlOw6RPRibPze3AwODIyOjMzOzOwaJOzu7ExOTPRydCwuLKyurGxubPSepBweHJyenNze3OwqNFxeXDw+PLy+vHx+fPzGzOwyPPy2vPzW3OxCTPzm7PR6hPyutPzO1Py+xPzu9Pz2/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAAyADIAAAI/gDTCBxIsKDBgwgTKlzIsKHDhxAjSpxIsaLFixgzatzIsaPHjyBDihxJsqTJkyhTqlzJsqXLlzBjypxJs6bNmzhz6tzJs6fPn0CDCh1KtKjRo0iTKl3KtKnTp1CjSp1KtarVq1izat3KtavXr2DDih1LtqzZs2jTql3Ltq3bt3Djyp1Lt67du3jz6t3Lt6/fv4ADCx5MuLDhw4gTK17MuLHjx5AjS55MubLly5gza97MuTPWD45QPCmBKAmiNyooICrRCMoHzxQdPVExIoSNIDyUbIgRQ4sWN0a0xLCjhEcQMIoYvUHhCLbCRk7A8LBjpMqhGjUIESLiR0eGOeDB/rvIkIGMnxpI3GwIImRIo9fOBaoQAqZCEDYV9AjJkgWCf0UhCCFEBSYoEQMQhJDhwhwuNDhHBjqcQEAMQUBAAXyeUTDEIEdQUAIKaWBY0AdQNJKECiIUIUQQC9TwXXgMllfDFwUMIqJmN0rkSAm02RDDCQzCuCAZa2xgY3wXQfEGIya4GN6LD65RwBNIYlSCCEEQAd53UOqgxRtVWunEGls+aGYGbpQQ5kUfLFJDmWbOQUYFa2JUhA5lQgkCFHVaRIEfeb64RiN9VqQHeXCCt0SOhTYkwZtnhudHEY1G9IEiEzxppgtzMlrpQY4kYASeiVKhAAJ8fqrQB2/YAAIZ/jBu6sISR3ha6Qc8ChFDDd7B+OIAZETgBIhVokCBCkcMAoEiikAwAiOKBEEdECfoAKuDkS5YQwEq2OrZayRScAQjbCyhgAsDUEHFgk8iGh4ZIIxArKoFlQAGIYHG+V2wTXj76QciRDCevjAqIMS89A4E2mxCAMHllg/PUYUI/vaJQiMUOGHFEqRCHOccRqiQ8EIlQLAEohG7sEYTI68KRQl6AEmwAkU01/JBxopQAQGwPgilCWrebNCOFOicwglQMgjCIkIz1EgFpO4rRKpNG4RrEyEs0HMGs7Jc9UFQDFJAG+xyaQPVXxtUgg0yM1hDAmk/xwag4PGASNwKSRAB/ng6CFHx146woSABcOOtUBE1ULFBEoYrpEIKc1SAduMFoaCEHyFQntAHQRDAiOYJgWGHIaAjNCDjpRvk3+SppzEIxa0XdITIsRP0BgW1E1Ra7gM1QijvabgGfIh/N1788Mgnr/zyzDfvfFPghih99NGvSvyI0y8EbvHVM0R99t8/9H34Ckvv0PYUfcDACwb0ccUVL9Dxwd8vaLDDH/jnrz/+NAQwQx8MEJEB8rCD+2lgDAJxxB/ut8AdIPAgW5iBBvBXBgfYDCEfwEEBNXCBC4LqDBPcnwjx94AAYGALCNnCC3wQAC+MEH87CAAD0iAHD5RhgR7AAEMkeL8yoAEi/gzAwAU00AALrAAOFkjiDXrwABz0AYUJaQEApkjFKlpxiivAwhkwxIcGUDEMOkyDAcJgxTu84CAv8AAVoxAAKCIEB2ScYhQeiBA6COKKeKwiHFhAh4IwQAB1sIAVo7CCQhpyBQ/oIw5WQEVATIEhGqjiDhzCgEDsAA55tOIK/oABRn2ABVWMQhhGScowGNGKDcDDQH4gyCn2wAACkQMjQ1kGNw6kBYD44gU25wMvVrEMtsLAAfRYylFaAA6zlKMD3JiDHSQzChbgAhZowIILWPMCcRCEA9QnhWR6AZYKccQd1siChhjgB3GcIhxuIAMzAAIQMoBDFKpoATmA6g9U/lyBF+jAT34ywAACEEMuqyiFGX6gDJK8gkCkME8rWkAMN/KBDKjIgTMkRA7jBEAYMDnFFkRxD1TkggP6SYd/yqEDUuhBQwGABXBiYKJfLEMgAmgrBvygim1cyAtAisUwKiQHD9AjFvhggC1sYX4MwINKqyiDGfrRDF8UQ0IcwNMpPqAPaXgBDAgKxUh+cZYNsCdB8MBRAMBArAbJQQ+mmModNJQDtiSID1YKCLQaJBAcCCkCX5BXKjagAw7pQ1CxeIG4prWsYVCoQtJYxRvE4YwHMcABVgqARxbkCum8gQ8S0gEuVJEGsBzDWqnoA3D5EgBRcAA+pwgIxabBEThY/qkXIFsQA2wVAHDowhZakE6LGmQLDqhiHcBpEAbg4LQw6MMHPJBMAPi2IQIYqEa7wBAHJLMBhiXIB7qQTjb2carpBMAPDIKBlXIBq99zhAEE0UrUxgGFDjgtHCx7hRtQEQ4MuEJfLeABpzJAClX8QY5e4AVMRsEDZ/zAMKd4B6cShAGgpOJZc4CBMVA4B2NowQUyitouqPe0qJ3CGCxcYQyT2MLg7MBpASEAhqBhpVjQKRqqiAWPKmQG4f1hQTrQWD4IwAeBCHIgfDADL4QXC5YNQDpl8EA5lHUPAQwET2/Ah9dcYcZTDEMcDPICdE6xDlgVyBk4GoUZGMQAq8Vi/gO4IAMZsJkLXLDASuFQBqzyob2odbOe98zmNgsiRIukYhnomJAdVPHPCmnBgqeIBgcj5AJ43qV286DJIxoSmZSFwwE6AB8vJHMHimVBMs3wmi3wgaMcsGcOEMpgVRKEDizg6R5malRHvMCzU+SCo9Pw0kxeMQoNMEMeciAQGmQ6ichOdhLhcAccpGELLFhpoxeyBZhO8bkIEUBfAbACKWSXIGgoKwDsGiLprjEK6GYkIVcQBi4c4AdopUMdqoiG77qVipMUyAseMM8oaOAKAsA1S336Wj4IXAZS4IMDFB4HgUfB2QSZQlnhYIYDWBwQHBC3DJwIRUfAgLJ5+MEP/tAw8pKTfORx0OEL7ihHFnx7IDtdo2uzve0wSDohDBjtFC1AXIEwwL5yBMQOylBAohN9B/3Dw8zTkINFA0C3IYIqFbc8kBxgYYo3EASk8U3cD5xB6r6uYgNo6/UqHmAMH0DhFuTghfZyoQNu3AIgVhoFYjvEAIPldhz8hYF0wmHpBtF2VBciZeHeqA/J3EML0s74ox41IT7gcBRanNWqAgCwCmuB1KO50jxgSACLjsIeRk/60TegrFGgehqM+8sbYUADKy2D3UNUB8pieyEtuDoV670QH+CZ8gmZgs6jANqE5ODjVLQA8AcigCre4bsQYUE69yDWvq+x58+egeXV/imFW9ZenTuIAw7GT34c8EEQZeUCOF+AZdR63iB42HYULuBgFuAZCz7og/73z/8cKNYAXlBFZuAARZUQfWB5MNAC8oMQgiV2gtACL/B4r3UFPuBM94UGhhVhrOVBDfEBxkZFB2B3XdBeFmBYL9BNVsQF1MVr94ZaD0BoBeEI84ZFgvAafXBbGhUAB/EBUtBeZgB8L/AHGvcARFiERvgAhRUiXQBiXEADF+AAUOgAXeAAOGAA85MHzXUAAaBwUQiFHcAAjoAHIKZpaHAB5BcHeWBtAMAF02YQOBgFfyARdOBVjAZZebeGjNIHhmZ2HpUDNEBmGkBuBjEDYudRGAB0/mu4ggYxBjM4Rd80EH2ABj0QBpSVR1HwAE71AhdgBs3FbcgEB8i0AoHwGi9AA4h4X59oRAeAVS8gBj0gbpkUBVywA1B3EBpwBxxwBz3ABxIBgLnIATLAB071AL/IBXlwUXWAi7iYB1cAXFiQi3egAZalEPqljD2wZRhgBr/oQAmBA4BgjaM4EFsQCBeQBw9QBhqgjcr4i7pYTgPBAGeABmWAcbjIAfZoj3dwdgNBBxfgBcn4i/f4izTwXVsgAIKwA4DQABtVSEi0B1zQAzuABg5wBbbiAx1wBh3QAWEGRAKAB2dwBv8DHwJwkSC5kUMzBnhwkR0gB2nXAimJkSfUoBAW+ZEdEAhpQAckWZO7RhArRJIzkAM5sj7tEwgfWZQ0eQazJ44AlZMYiZEd4AO7Rgc5QJJNmZPTKBAfAHB8cAFSEACCIAVxIAZdIAAF+DxmeZZomZZquZZs2ZZu+ZZwGZdyOZd0WZd2eZd4mZd6uZd82Zd++ZeAGZiCOZiEWZiGeZiImZiKuZiM2ZiO+ZiQGZmSOZmUWZmWeZmYmZlwERAAOw==');\\n    background-size: cover;\\n}\\n\\n.argon18-header-image {\\n    background-image: url('argon18-logo.png');\\n    background-size: cover;\\n}\\n\\n.cervelo-header-image {\\n    background-image: url('cervelo-logo.png');\\n    background-size: cover;\\n}\\n\\n.noname-header-image {\\n    background-image: url('giro_logo_big.png');\\n    background-size: cover;\\n}\\n\\n.model-card {\\n    max-width: 400px;\\n}\\n\\n.group-radio-group {\\n    display: flex;\\n    flex-direction: column;\\n    margin: 15px 0;\\n}\\n\\n.group-radio-button {\\n    margin: 5px;\\n}\\n\\n.mat-spinner {\\n    position: absolute;\\n    top: 150px;\\n    left: 150px;\\n}\\n\\n.file-upload {\\n    width: 0px;\\n    height: 0px;\\n    overflow: hidden;\\n}\\n\\n.custom-file-upload {\\n        border: 1px solid #ccc;\\n        display: inline-block;\\n        padding: 6px 12px;\\n        cursor: pointer;\\n}\\n\\n.mat-progress-bar {\\n    width: 400px;\\n}\"","module.exports = \"<br>\\n<div *ngIf=\\\"!selected\\\" fxLayout=\\\"row\\\"  fxLayout.xs=\\\"column\\\" fxLayoutAlign.xs=\\\"start center\\\" fxLayoutWrap fxLayoutGap=\\\"1.5%\\\" fxLayoutAlign=\\\"left\\\">\\n  <mat-card *ngFor=\\\"let brand of brands\\\" (click)=\\\"select(brand)\\\" class=\\\"brand-card\\\">\\n    <img mat-card-image [src]=\\\"'../assets/' + brand.logo\\\">\\n  </mat-card>\\n</div>\\n\\n<div *ngIf=\\\"selected && step==1\\\" fxLayout=\\\"column\\\" fxLayoutAlign.xs=\\\"center\\\" fxLayoutGap=\\\"1.5%\\\" >\\n  <div *ngIf=\\\"selected.change\\\">\\n    {{selected.name}}\\n  </div>\\n  <div *ngIf=\\\"!selected.change\\\" fxLayout=\\\"row\\\" fxLayoutWrap=\\\"wrap\\\" fxLayoutAlign=\\\"start center\\\">\\n      <div fxFlex=\\\"2\\\"></div>\\n      <div fxFlex=\\\"8\\\">\\n          <button (click)=\\\"unselect()\\\" class=\\\"header-btn\\\" mat-icon-button>\\n              <mat-icon>arrow_back_ios</mat-icon>\\n          </button>\\n      </div>\\n  \\n      <div fxFlex=\\\"25\\\"></div>\\n      <div fxFlex=\\\"65\\\"><h3 class=\\\"header-title\\\">{{selected.name}}</h3></div>\\n  </div>\\n  <mat-card *ngFor=\\\"let model of selected.models\\\" (click)=\\\"select(model)\\\" class=\\\"model-card\\\">\\n      <mat-card-header>\\n          <div mat-card-avatar [ngClass]=\\\"selected.class\\\"></div>\\n          <mat-card-title>{{model.name}}</mat-card-title>\\n          <mat-card-subtitle>{{model.desc}}</mat-card-subtitle>\\n        </mat-card-header>\\n    <img mat-card-image [src]=\\\"'../assets/' + model.img\\\">\\n  </mat-card>\\n</div>\\n\\n<div *ngIf=\\\"model && step==2\\\" fxLayout=\\\"column\\\" fxLayoutAlign.xs=\\\"center\\\" fxLayoutGap=\\\"1.5%\\\" >\\n    <div fxLayout=\\\"row\\\" fxLayoutWrap=\\\"wrap\\\" fxLayoutAlign=\\\"start center\\\">\\n        <div fxFlex=\\\"2\\\"></div>\\n        <div fxFlex=\\\"8\\\">\\n            <button (click)=\\\"unselect()\\\" class=\\\"header-btn\\\" mat-icon-button>\\n                <mat-icon>arrow_back_ios</mat-icon>\\n            </button>\\n        </div>\\n    \\n        <div fxFlex=\\\"25\\\"></div>\\n        <div fxFlex=\\\"65\\\"><h3 class=\\\"header-title\\\">{{model.name}}</h3></div>\\n    </div>\\n    <mat-card *ngIf=\\\"!change\\\" class=\\\"model-card\\\">\\n        <mat-card-header>\\n            <div mat-card-avatar [ngClass]=\\\"selected.class\\\"></div>\\n            <mat-card-title>{{model.name}}</mat-card-title>\\n            <mat-card-subtitle>{{model.desc}}</mat-card-subtitle>\\n          </mat-card-header>\\n      <img *ngIf=\\\"frame.images==undefined\\\" mat-card-image [src]=\\\"'../assets/' + model.img\\\">\\n      <img *ngIf=\\\"frame.images!=undefined\\\" mat-card-image [src]=\\\"frame.images[0]\\\">\\n      <mat-card-content>\\n          <mat-chip-list>\\n            <mat-chip>{{frame.model}}</mat-chip>\\n            <mat-chip>{{frame.year}}</mat-chip>\\n            <mat-chip>{{frame.type}}</mat-chip>\\n            <mat-chip>{{frame.material}}</mat-chip>\\n            <mat-chip *ngIf=\\\"frame.electronic==undefined\\\" (click)=\\\"edit('group')\\\" color=\\\"warn\\\" [selected]=\\\"!locked\\\">Group?</mat-chip>\\n            <mat-chip *ngIf=\\\"frame.electronic!=undefined\\\" (click)=\\\"edit('group')\\\" [selected]=\\\"!locked\\\">{{frame.electronic?\\\"electronic\\\":\\\"mechanic\\\"}}</mat-chip>\\n            <mat-chip *ngIf=\\\"frame.bin==undefined\\\" (click)=\\\"edit('bin')\\\" color=\\\"warn\\\" [selected]=\\\"!locked\\\">BIN?</mat-chip>\\n            <mat-chip *ngIf=\\\"frame.bin!=undefined\\\" (click)=\\\"edit('bin')\\\" [selected]=\\\"!locked\\\">{{frame.bin}}</mat-chip>\\n            <mat-chip *ngIf=\\\"frame.disk==undefined\\\" (click)=\\\"edit('disk')\\\" color=\\\"warn\\\" [selected]=\\\"!locked\\\">Brakes?</mat-chip>\\n            <mat-chip *ngIf=\\\"frame.disk!=undefined\\\" (click)=\\\"edit('disk')\\\" [selected]=\\\"!locked\\\">{{frame.disk?\\\"disk\\\":\\\"rim\\\"}}</mat-chip>\\n            <mat-chip *ngIf=\\\"frame.new==undefined\\\" (click)=\\\"edit('new')\\\" color=\\\"warn\\\" [selected]=\\\"!locked\\\">New?</mat-chip>\\n            <mat-chip *ngIf=\\\"frame.new!=undefined\\\" (click)=\\\"edit('new')\\\" [selected]=\\\"!locked\\\">{{frame.new?\\\"new\\\":\\\"used\\\"}}</mat-chip>\\n            <mat-chip *ngIf=\\\"frame.images==undefined\\\" (click)=\\\"edit('images')\\\" color=\\\"warn\\\" [selected]=\\\"!locked\\\"><mat-icon>photo</mat-icon>&nbsp;0</mat-chip>\\n            <mat-chip *ngIf=\\\"frame.images!=undefined\\\" (click)=\\\"edit('images')\\\" [selected]=\\\"!locked\\\"><mat-icon>photo</mat-icon>&nbsp;{{frame.images.length}}</mat-chip>\\n          </mat-chip-list>\\n        </mat-card-content>\\n        <mat-card-actions>\\n            <button [disabled]=\\\"!complited() || locked\\\" (click)=\\\"save()\\\" mat-button>SAVE</button>\\n            <button (click)=\\\"unselect()\\\" mat-button>CANCEL</button>\\n          </mat-card-actions>\\n    </mat-card>\\n\\n    <mat-card *ngIf=\\\"change==='group'\\\" class=\\\"model-card\\\">\\n        <mat-card-header>\\n            <div mat-card-avatar [ngClass]=\\\"selected.class\\\"></div>\\n            <mat-card-title>{{model.name}}</mat-card-title>\\n            <mat-card-subtitle>{{model.desc}}</mat-card-subtitle>\\n          </mat-card-header>\\n    \\n        <mat-card-content >\\n          <label id=\\\"group-radio-group-label\\\"><h3>Select bike group type</h3></label>\\n          <mat-radio-group\\n            aria-labelledby=\\\"group-radio-group-label\\\"\\n            class=\\\"group-radio-group\\\"\\n            [(ngModel)]=\\\"grouptype\\\">\\n            <mat-radio-button class=\\\"group-radio-button\\\" *ngFor=\\\"let type of model.group\\\" [value]=\\\"type\\\">\\n              {{type}}\\n            </mat-radio-button>\\n          </mat-radio-group>\\n        </mat-card-content>\\n        <mat-card-actions>\\n            <button (click)=\\\"grouptype==='electronic'?frame.electronic=true:frame.electronic=false;change=undefined\\\"mat-button>SAVE</button>\\n            <button (click)=\\\"change=undefined\\\" mat-button>CANCEL</button>\\n          </mat-card-actions>\\n    </mat-card>\\n\\n    <mat-card *ngIf=\\\"change==='disk'\\\" class=\\\"model-card\\\">\\n        <mat-card-header>\\n            <div mat-card-avatar [ngClass]=\\\"selected.class\\\"></div>\\n            <mat-card-title>{{model.name}}</mat-card-title>\\n            <mat-card-subtitle>{{model.desc}}</mat-card-subtitle>\\n          </mat-card-header>\\n    \\n        <mat-card-content >\\n          <label id=\\\"group-radio-group-label\\\"><h3>Select bike brake types</h3></label>\\n          <mat-radio-group\\n            aria-labelledby=\\\"group-radio-group-label\\\"\\n            class=\\\"group-radio-group\\\"\\n            [(ngModel)]=\\\"braketype\\\">\\n            <mat-radio-button class=\\\"group-radio-button\\\" *ngFor=\\\"let type of model.brakes\\\" [value]=\\\"type\\\">\\n              {{type}}\\n            </mat-radio-button>\\n          </mat-radio-group>\\n        </mat-card-content>\\n        <mat-card-actions>\\n            <button (click)=\\\"braketype==='disk'?frame.disk=true:frame.disk=false;change=undefined\\\"mat-button>SAVE</button>\\n            <button (click)=\\\"change=undefined\\\" mat-button>CANCEL</button>\\n          </mat-card-actions>\\n    </mat-card>\\n\\n    <mat-card *ngIf=\\\"change==='new'\\\" class=\\\"model-card\\\">\\n        <mat-card-header>\\n            <div mat-card-avatar [ngClass]=\\\"selected.class\\\"></div>\\n            <mat-card-title>{{model.name}}</mat-card-title>\\n            <mat-card-subtitle>{{model.desc}}</mat-card-subtitle>\\n          </mat-card-header>\\n    \\n        <mat-card-content >\\n          <label id=\\\"group-radio-group-label\\\"><h3>Select new or used</h3></label>\\n          <mat-radio-group\\n            aria-labelledby=\\\"group-radio-group-label\\\"\\n            class=\\\"group-radio-group\\\"\\n            [(ngModel)]=\\\"neworused\\\">\\n            <mat-radio-button class=\\\"group-radio-button\\\" *ngFor=\\\"let type of options\\\" [value]=\\\"type\\\">\\n              {{type}}\\n            </mat-radio-button>\\n          </mat-radio-group>\\n        </mat-card-content>\\n        <mat-card-actions>\\n            <button (click)=\\\"neworused==='new'?frame.new=true:frame.new=false;change=undefined\\\"mat-button>SAVE</button>\\n            <button (click)=\\\"change=undefined\\\" mat-button>CANCEL</button>\\n          </mat-card-actions>\\n    </mat-card>\\n\\n    <mat-card *ngIf=\\\"change==='bin'\\\" class=\\\"model-card\\\">\\n        <mat-card-header>\\n            <div mat-card-avatar [ngClass]=\\\"selected.class\\\"></div>\\n            <mat-card-title>{{model.name}}</mat-card-title>\\n            <mat-card-subtitle>{{model.desc}}</mat-card-subtitle>\\n          </mat-card-header>\\n    \\n        <mat-card-content >\\n          <mat-form-field>\\n            <input matInput name=\\\"bin\\\" type=\\\"text\\\" placeholder=\\\"Enter frame id number\\\" required [(ngModel)]=\\\"frame.bin\\\">\\n          </mat-form-field>\\n        </mat-card-content>\\n        <mat-card-actions>\\n            <button (click)=\\\"change=undefined\\\"mat-button>SAVE</button>\\n            <button (click)=\\\"change=undefined\\\" mat-button>CANCEL</button>\\n          </mat-card-actions>\\n    </mat-card>\\n\\n    <mat-card *ngIf=\\\"change==='images'\\\" class=\\\"model-card\\\">\\n        <mat-card-header>\\n            <div mat-card-avatar [ngClass]=\\\"selected.class\\\"></div>\\n            <mat-card-title>{{model.name}}</mat-card-title>\\n            <mat-card-subtitle>{{model.desc}}</mat-card-subtitle>\\n          </mat-card-header>\\n\\n        <img *ngIf=\\\"!frame.images || progress\\\" mat-card-image [src]=\\\"'../assets/' + 'bike-blurred.jpg'\\\">\\n        <img *ngIf=\\\"frame.images && frame.images.length > 0 && !progress\\\" mat-card-image [src]=\\\"frame.images[current]\\\">\\n        <mat-spinner *ngIf=\\\"progress\\\"></mat-spinner>\\n    \\n        <mat-card-content >\\n            <mat-chip-list *ngIf=\\\"frame.images\\\">\\n              <mat-chip *ngFor=\\\"let image of frame.images; index as i\\\" [selected]=\\\"current==i\\\" (click)=\\\"current=i\\\">{{i+1}}</mat-chip>\\n              <label for=\\\"file-upload-1\\\">\\n                  <mat-chip><mat-icon>cloud_upload</mat-icon></mat-chip>\\n                 \\n                    <input id=\\\"file-upload-1\\\"  style=\\\"display: none\\\" accept=\\\"image/*\\\" type=\\\"file\\\" (change)=\\\"handleFileInput($event.target.files)\\\"/>\\n                  \\n                </label>\\n            </mat-chip-list>\\n\\n            <mat-chip-list *ngIf=\\\"!frame.images\\\">\\n                <label for=\\\"file-upload-2\\\">\\n                  <mat-chip><mat-icon>cloud_upload</mat-icon></mat-chip>\\n                  \\n                    <input id=\\\"file-upload-2\\\" style=\\\"display: none\\\" accept=\\\"image/*\\\" type=\\\"file\\\" (change)=\\\"handleFileInput($event.target.files)\\\"/>\\n                 \\n                </label>\\n              </mat-chip-list>\\n          \\n        </mat-card-content>\\n        <mat-card-actions>\\n            <button (click)=\\\"change=undefined\\\"mat-button>SAVE</button>\\n            <button (click)=\\\"change=undefined\\\" mat-button>CANCEL</button>\\n          </mat-card-actions>\\n    </mat-card>\\n    \\n  </div>\\n\"","import { Component, OnInit, Output } from '@angular/core';\nimport { Frame, Bike, Rider, brands } from '../rider';\nimport { Observable, Subscription } from 'rxjs';\nimport { AngularFireStorage, AngularFireUploadTask } from '@angular/fire/storage';\nimport { finalize } from 'rxjs/operators';\nimport { TagService } from '../tag.service';\nimport { Tag, Registration } from '../tag';\nimport { Location } from '@angular/common';\nimport { Router, ActivatedRoute } from '@angular/router';\n\n@Component({\n  selector: 'app-frame',\n  templateUrl: './frame.component.html',\n  styleUrls: ['./frame.component.css']\n})\nexport class FrameComponent implements OnInit {\n  @Output() frame: Frame;\n\n  brands: any;\n  step: number;\n  selected: any;\n  model: any;\n  change: string;\n  grouptype: string;\n  braketype: string;\n  neworused: string;\n  options = ['new', 'used'];\n  current: number;\n  uploadPercent: Observable<number>;\n  downloadURL: Observable<string>;\n  percentage: number;\n  progress: boolean;\n  tagid: string;\n  tags: Tag[];\n  tag: Tag;\n  locked: string;\n\n  constructor(\n    private storage: AngularFireStorage,\n    private tagService: TagService,\n    private location: Location,\n    private router: Router,\n    private route: ActivatedRoute\n    ) { }\n\n  ngOnInit() {\n    this.tagid = this.route.snapshot.paramMap.get('id');\n    this.locked = this.route.snapshot.paramMap.get('locked');\n    this.brands = brands;\n    this.step = 0;\n    this.selected = undefined;\n    this.change = undefined;\n    this.progress = false;\n    this.tag = undefined;\n    this.current = 0;\n    this.frame = undefined;\n    this.tagService.getTagById(this.tagid)\n      .subscribe(tags => {\n        console.log(`FrameComponent: Tags fround for tagid: ${this.tagid}`);\n        this.tags = tags;\n        if (this.tags.length > 0) {\n          this.tag = this.tags[0];\n          if (this.tag.bike) {\n            console.log('FrameComponent bike record is found');\n            console.log(this.tag.bike);\n            this.step = 2;\n            this.frame = this.tag.bike.frame;\n            console.log('FrameComponemt setting frame');\n            console.log(this.frame);\n            this.model = {\n              name: this.frame.model,\n              desc: `${this.frame.brand} ${this.frame.model}`,\n              img: 'bike-blurred.jpg',\n              brakes: ['disk'],\n              group: ['electronic', 'mechanical'],\n              };\n            for (let i = 0; i < this.brands.length; i++ ) {\n              if (this.brands[i].name === this.frame.brand) {\n                this.selected = this.brands[i];\n                break;\n              }\n            }\n            if (!this.selected) {\n              this.selected = { name: this.frame.brand, logo: 'giro_logo_big.png', class: 'noname-header-image'};\n            }\n          }\n        }\n      });\n  }\n  checkstatus() {\n    console.log(`Check Status: ${this.neworused}`);\n  }\n\n  select(selection: any): void {\n    if (this.step === 0) {\n      console.log(`Brand: ${selection.name} selected`);\n      this.step = 1;\n      this.selected = selection;\n    } else {\n      console.log(`Model: ${selection.name} selected`);\n      this.step = 2;\n      this.model = selection;\n      this.frame = {\n        year: this.model.year,\n        brand: this.selected.name,\n        type: this.model.type,\n        material: this.model.material,\n        model: this.model.name\n      };\n    }\n  }\n\n  selectImage(event: any) {\n    const index = event.target.innerHTML.indexOf('<div');\n    console.log(event.target.innerHTML.slice(0, index));\n    this.current = parseInt(event.target.innerHTML.slice(0, index), 10) - 1;\n  }\n\n  edit(field: string): void {\n    if (this.locked) {\n      return;\n    }\n    this.change = field;\n    console.log(`Change: ${this.change}`);\n  }\n\n  unselect(): void {\n    if (this.step === 1) {\n      this.step = 0;\n      this.selected = undefined;\n    } else {\n      if (this.tagid) {\n        this.location.back();\n      } else {\n        this.step = 1;\n        this.model = undefined;\n        this.frame = undefined;\n      }\n    }\n    this.change = undefined;\n  }\n\n  complited(): boolean {\n    return this.frame.bin !== undefined &&\n      this.frame.electronic !== undefined &&\n      this.frame.disk !== undefined &&\n      this.frame.new !== undefined &&\n      this.frame.images !== undefined;\n  }\n\n  handleFileInput(files: FileList): void {\n    const file = files[0];\n    const filePath = `bikes/${file.name}`;\n    const fileRef = this.storage.ref(filePath);\n    const task = this.storage.upload(filePath, file);\n\n    // observe percentage changes\n    this.uploadPercent = task.percentageChanges();\n    this.progress = true;\n    // get notified when the download URL is available\n    task.snapshotChanges()\n      .pipe(finalize(() => {\n        this.downloadURL = fileRef.getDownloadURL();\n        this.downloadURL.subscribe(url => {\n          if (this.frame.images === undefined) {\n            this.frame.images = [];\n          }\n          this.current = this.frame.images.length;\n          this.frame.images.push(url);\n          this.progress = false;\n        });\n      }))\n      .subscribe();\n  }\n\n  save(): void {\n    if (!this.tag) {\n      console.log('FrameComponent: Save: No Tag to save bike');\n      return;\n    } else {\n      if (this.tag.bike) {\n        this.tag.bike.frame = this.frame;\n      } else {\n        this.tag.bike = {tagid: this.tag.id, frame: this.frame};\n      }\n      console.log(`FrameComponent: Save : saving bike to TAG id ${this.tag.id}`);\n      this.tagService.setBike(this.tag.id, this.tag.bike);\n      this.locked = 'saved';\n    }\n  }\n\n}\n","module.exports = \"table {\\n    width: 100%;\\n  }\\n\\n  .mat-cell .mat-icon {\\n    -webkit-transform: scale(0.6);\\n            transform: scale(0.6);\\n}\\n\\n  agm-map {\\n    height: 300px;\\n}\"","module.exports = \"<app-header [title]=\\\"'Georide'\\\" [back]=\\\"true\\\" [subtitle]=\\\"nikname\\\"></app-header>\\n\\n\\n<mat-accordion>\\n      <mat-expansion-panel (opened)=\\\"getTags()\\\">\\n        <mat-expansion-panel-header>\\n          <mat-panel-title>\\n            Tags\\n          </mat-panel-title>\\n          <mat-panel-description>\\n            Select tag to start a ride\\n          </mat-panel-description>\\n        </mat-expansion-panel-header>\\n    \\n        <span *ngFor=\\\"let tag of tags\\\">\\n            <button mat-stroked-button [disabled]=\\\"tagid === tag.id\\\" (click)=\\\"select(tag.id)\\\">{{tag.id}}</button>&nbsp;\\n        </span>\\n    \\n      </mat-expansion-panel>\\n  </mat-accordion>\\n\\n  <agm-map *ngIf=\\\"ride; else loading\\\" [(latitude)]=\\\"loc.lat\\\" [(longitude)]=\\\"loc.lng\\\" [(zoom)]=\\\"loc.zoom\\\" [disableDefaultUI]=\\\"true\\\" [zoomControl]=\\\"true\\\" >\\n      <agm-marker iconUrl=\\\"../assets/icons8-bicycle-48.png\\\" [(latitude)]=\\\"loc.marker.lat\\\" [(longitude)]=\\\"loc.marker.lng\\\" [markerDraggable]=\\\"loc.marker.draggable\\\" (dragEnd)='markerDragEnd($event)'></agm-marker>\\n      <agm-marker [label]=\\\"startLoc.marker.label\\\" [(latitude)]=\\\"startLoc.marker.lat\\\" [(longitude)]=\\\"startLoc.marker.lng\\\" [markerDraggable]=\\\"startLoc.marker.draggable\\\" (dragEnd)='markerDragEnd($event)'></agm-marker>\\n      <agm-marker [label]=\\\"eePointLocA.marker.label\\\" [(latitude)]=\\\"eePointLocA.marker.lat\\\" [(longitude)]=\\\"eePointLocA.marker.lng\\\" [markerDraggable]=\\\"eePointLocA.marker.draggable\\\" (dragEnd)='markerDragEnd($event)'></agm-marker>\\n      <agm-marker [label]=\\\"eePointLocB.marker.label\\\" [(latitude)]=\\\"eePointLocB.marker.lat\\\" [(longitude)]=\\\"eePointLocB.marker.lng\\\" [markerDraggable]=\\\"eePointLocB.marker.draggable\\\" (dragEnd)='markerDragEnd($event)'></agm-marker>\\n      <agm-marker [label]=\\\"eePointLocC.marker.label\\\" [(latitude)]=\\\"eePointLocC.marker.lat\\\" [(longitude)]=\\\"eePointLocC.marker.lng\\\" [markerDraggable]=\\\"eePointLocC.marker.draggable\\\" (dragEnd)='markerDragEnd($event)'></agm-marker>\\n      <agm-circle *ngIf=\\\"true\\\" [latitude]=\\\"startLoc.marker.lat\\\" [longitude]=\\\"startLoc.marker.lng\\\" [(radius)]=\\\"radius\\\" [fillColor]=\\\"'blue'\\\" [circleDraggable]=\\\"true\\\" [editable]=\\\"true\\\"></agm-circle>\\n    </agm-map>\\n\\n  <mat-grid-list *ngIf=\\\"ride; else loading\\\" cols=\\\"3\\\" rowHeight=\\\"3em\\\">\\n    <mat-grid-tile [colspan]=\\\"3\\\">\\n      <h3>Current Ride</h3>\\n    </mat-grid-tile>\\n  \\n    <mat-grid-tile>\\n      {{ride.start|date:\\\"dd-MM-yyyy\\\"}}\\n    </mat-grid-tile>\\n  \\n    <mat-grid-tile>\\n      {{ride.start|date:\\\"HH:mm:ss\\\"}}\\n    </mat-grid-tile>\\n  \\n    <mat-grid-tile *ngIf=\\\"!ride.finish\\\">\\n      {{timestemp|date:\\\"HH:mm:ss\\\":\\\"+00\\\"}}\\n    </mat-grid-tile>\\n\\n    <mat-grid-tile *ngIf=\\\"ride.finish\\\">\\n        {{(ride.finish-ride.start)|date:\\\"HH:mm:ss\\\":\\\"+00\\\"}}\\n      </mat-grid-tile>\\n\\n      <mat-grid-tile [colspan]=\\\"3\\\">\\n          {{geomsg}}\\n      </mat-grid-tile>\\n\\n      <mat-grid-tile>\\n          U / E [C]\\n      </mat-grid-tile>\\n\\n      <mat-grid-tile>\\n          {{geoupdatecount}}\\n      </mat-grid-tile>\\n\\n      <mat-grid-tile>\\n          {{geoerrorcount}} [{{geoclearcount}}]\\n      </mat-grid-tile>\\n\\n  </mat-grid-list>\\n\\n  <mat-grid-list  *ngIf=\\\"rides; else loading\\\" cols=\\\"3\\\" rowHeight=\\\"3em\\\">\\n      \\n      <mat-grid-tile  [rowspan] = \\\"2\\\" [colspan]=\\\"3\\\">\\n        <button *ngIf=\\\"!ride\\\" mat-stroked-button mat-raised-button color=\\\"primary\\\" [disabled]=\\\"progress\\\" (click)=\\\"startRide($event)\\\">Start</button>\\n        <button *ngIf=\\\"ride\\\" mat-stroked-button mat-raised-button color=\\\"warn\\\" [disabled]=\\\"progress || !ride.open\\\" (click)=\\\"finishRide($event)\\\">End</button>\\n      </mat-grid-tile>\\n  </mat-grid-list>\\n  \\n  <div *ngIf=\\\"rides\\\">\\n      <table *ngIf=\\\"rides.length>0\\\" mat-table [dataSource]=\\\"rides | slice:start:end\\\" class=\\\"mat-elevation-z8\\\">\\n\\n          <!--- Note that these columns can be defined in any order.\\n                The actual rendered columns are set as a property on the row definition\\\" -->\\n        \\n          <!-- Position Column -->\\n          <ng-container matColumnDef=\\\"date\\\">\\n              <th mat-header-cell *matHeaderCellDef> Date </th>\\n              <td mat-cell *matCellDef=\\\"let element\\\"> {{element.start|date:\\\"dd-MM-yyyy\\\"}}</td>\\n            </ng-container>\\n\\n          <!-- Position Column -->\\n          <ng-container matColumnDef=\\\"start\\\">\\n            <th mat-header-cell *matHeaderCellDef> Start </th>\\n            <td mat-cell *matCellDef=\\\"let element\\\"> {{element.start|date:\\\"HH:mm:ss\\\"}}</td>\\n          </ng-container>\\n        \\n          <!-- Name Column -->\\n          <ng-container matColumnDef=\\\"finish\\\">\\n            <th mat-header-cell *matHeaderCellDef> Finish </th>\\n            <td mat-cell *matCellDef=\\\"let element\\\"> {{element.finish|date:\\\"HH:mm:ss\\\"}}</td>\\n          </ng-container>\\n        \\n          <!-- Weight Column -->\\n          <ng-container matColumnDef=\\\"time\\\">\\n            <th mat-header-cell *matHeaderCellDef> Time </th>\\n            <td mat-cell *matCellDef=\\\"let element\\\"> {{(element.finish-element.start)|date:\\\"HH:mm:ss\\\":\\\"+00\\\"}} </td>\\n          </ng-container>\\n        \\n          <!-- Weight Column -->\\n          <ng-container matColumnDef=\\\"link\\\">\\n              <th mat-header-cell *matHeaderCellDef> Details </th>\\n              <td mat-cell *matCellDef=\\\"let element\\\"> <button (click)=\\\"gotoRide(element.id)\\\" mat-icon-button> <mat-icon>call_made</mat-icon></button> </td>\\n            </ng-container>\\n        \\n          <tr mat-header-row *matHeaderRowDef=\\\"displayedColumns\\\"></tr>\\n          <tr mat-row *matRowDef=\\\"let row; columns: displayedColumns;\\\"></tr>\\n        </table>\\n        <br>\\n        \\n    <mat-paginator *ngIf=\\\"rides.length>0\\\" [length]=\\\"rides.length\\\"\\n                  [pageSize]=\\\"10\\\"\\n                  [pageSizeOptions]=\\\"[1, 5, 10, 25, 100]\\\"\\n                  (page)=\\\"setPage($event)\\\">\\n    </mat-paginator>\\n  </div>\\n\\n\"","import { Component, OnInit, OnDestroy, AfterViewInit, NgZone, ViewChild, Input } from '@angular/core';\nimport { Router, ActivatedRoute, ParamMap } from '@angular/router';\nimport { Location } from '@angular/common';\nimport { TagService } from '../tag.service';\nimport { AuthService } from '../auth.service';\nimport { RiderService } from '../rider.service';\nimport { RideService } from '../ride.service';\nimport { Rider, Bike} from '../rider';\nimport { Ride } from '../ride';\nimport { Tag } from '../tag';\nimport { PageEvent } from '@angular/material';\nimport { DatePipe } from '@angular/common';\nimport { Subscription, Observable, timer } from 'rxjs';\nimport { RideParameters } from '../parameters';\nimport { AgmMarker, AgmLocation, EnterExitPoint, CheckPoint, Giro, Traceroute } from '../googlemap';\nimport { MapsAPILoader, AgmMap } from '@agm/core';\nimport { GoogleMapsAPIWrapper } from '@agm/core/services';\n\ndeclare var google: any;\n\n@Component({\n  selector: 'app-geo-ride',\n  templateUrl: './geo-ride.component.html',\n  styleUrls: ['./geo-ride.component.css'],\n  providers: [RideParameters]\n})\n\nexport class GeoRideComponent implements OnInit, OnDestroy {\n\n  rider: Rider;\n  rides: Ride[];\n  ride: Ride;\n  tags: Tag[];\n  tagid: string;\n  start: number;\n  end: number;\n  progress: boolean;\n  timestemp: number;\n  hours: number;\n  minutes: number;\n  seconds: number;\n  ref: string;\n  nikname: string;\n  avatar: string;\n  geomsg: string;\n\n  displayedColumns: string[] = ['date', 'start', 'finish', 'time', 'link'];\n\n  startLoc: AgmLocation = {\n    lat: 45.6707502641053,\n    lng: 9.955278242626946,\n    zoom: 15,\n    marker: { lat: 45.6707502641053, lng: 9.955278242626946, label: 'S', draggable: false }\n  };\n\n  eePointLocA: AgmLocation = {\n    lat: 45.671042650321844,\n    lng: 9.954087341824334,\n    zoom: 15,\n    marker: { lat: 45.671042650321844, lng: 9.954087341824334, label: 'A', draggable: false }\n  };\n\n  eePointLocB: AgmLocation = {\n    lat: 45.670742767002764,\n    lng: 9.956576431790154,\n    zoom: 15,\n    marker: { lat: 45.670742767002764, lng: 9.956576431790154, label: 'B', draggable: false }\n  };\n\n  eePointLocC: AgmLocation = {\n    lat: 45.66985810185053,\n    lng: 9.955288971463006,\n    zoom: 15,\n    marker: { lat: 45.66985810185053, lng: 9.955288971463006, label: 'C', draggable: false }\n  };\n\n  checkPoint: CheckPoint = {\n    id: 0,\n    loc: this.startLoc,\n    type: 'start/finish',\n    scope: 500,\n    radius: 100,\n    eep: [\n      { loc: this.eePointLocA, next: 0, slow: true },\n      { loc: this.eePointLocB, next: 0, slow: false },\n      { loc: this.eePointLocC, next: 0, slow: false },\n    ]\n  };\n\n  girodiseo: Giro = {\n    id: 0,\n    name: 'Giro d\\'Iseo',\n    desc: 'Giro d\\'Iseo ride',\n    length: 62,\n    points: [this.checkPoint]\n  };\n\n  options = {\n    enableHighAccuracy: true,\n    timeout: 10000,\n    maximumAge: 0\n  };\n\n\n  geocoder: any;\n  lat: number;\n  lng: number;\n  loc: AgmLocation;\n  zoom = 15;\n  radius = 100;\n  trace: Traceroute;\n  geolastupdate: number;\n  geolock: boolean;\n  geoupdatecount: number;\n  geoerrorcount: number;\n  geoclearcount: number;\n  geoid: number;\n  geotimer: number;\n\n  @ViewChild(AgmMap) map: AgmMap;\n\n  private timer: Observable<number>;\n  private timer_subs: Subscription;\n  private rides_subs: Subscription;\n  private ride_subs: Subscription;\n  private tags_subs: Subscription;\n  private rider_subs: Subscription;\n\n  constructor(\n    private zone: NgZone,\n    private tagService: TagService,\n    private authService: AuthService,\n    private route: ActivatedRoute,\n    private router: Router,\n    private riderService: RiderService,\n    private rideService: RideService,\n    private datePipe: DatePipe,\n    private location: Location,\n    private param: RideParameters,\n    public mapsApiLoader: MapsAPILoader,\n    private wrapper: GoogleMapsAPIWrapper\n    ) {\n      console.log(this.param);\n      this.mapsApiLoader.load().then(() => {\n        this.geocoder = new google.maps.Geocoder();\n      });\n    }\n\n  ngOnInit() {\n    this.clear();\n    this.getTags();\n    this.getRider();\n    this.getLocation();\n    this.setGeoWatch();\n  }\n\n  setGeoWatch(): void {\n    window.setInterval(() => {\n      if (this.geolastupdate) {\n        if (new Date().getTime() - this.geolastupdate > 5000 && navigator.geolocation) {\n          if (this.geoid) {\n            navigator.geolocation.clearWatch(this.geoid);\n            this.geoclearcount++;\n            console.log(`Clear Geo Watch for ${this.geoid}`);\n          }\n          this.geoid = navigator.geolocation.watchPosition((position: Position) => {\n            if (position) { this.zone.run(() => this.updateLocation(position)); }\n          },\n            (error: PositionError) => {\n              console.log(error);\n              this.geoerrorcount++;\n              this.geolock = false;\n              this.geomsg = `Position Error: ${error.message}`;\n            },\n            this.options);\n        }\n      }\n    }, 5000);\n  }\n\n  updateLocation(position: Position): void {\n    if (position) {\n      console.log(`Latitude: ${position.coords.latitude} Longitude:  ${position.coords.longitude}`);\n\n      this.geolock = false;\n      this.geolastupdate = new Date().getTime();\n      this.lat = position.coords.latitude;\n      this.lng = position.coords.longitude;\n      this.geoupdatecount++;\n      if (this.ride) {\n        this.geomsg = `Lat: ${position.coords.latitude} Lng:  ${position.coords.longitude}`;\n        if (this.loc) {\n          if (this.loc.lat !== this.lat || this.loc.lng !== this.lng) {\n            this.loc.lat = this.lat;\n            this.loc.lng = this.lng;\n            this.loc.marker.lat = this.lat;\n            this.loc.marker.lng = this.lng;\n          }\n        } else {\n          this.loc = {\n          lat: this.lat,\n          lng: this.lng,\n          marker: { lat: this.lat, lng: this.lng, draggable: true },\n          zoom: 15\n          };\n        }\n        // trace current ride\n        this.traceRide(this.girodiseo);\n      }\n    }\n  }\n\n  getCurrentLocation() {\n    console.log('getCurrentLocation');\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition((position: Position) => {\n        this.zone.run(() => this.updateLocation(position));\n      },\n        (error: PositionError) => {\n          console.log(error);\n          this.geoerrorcount++;\n          this.geolock = false;\n          this.geomsg = `Position Error: ${error.message}`;\n        },\n          this.options);\n\n    } else {\n      alert('Geolocation is not supported by this browser.');\n    }\n  }\n\n  getLocation() {\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition((position: Position) => {\n        if (position) {\n          this.zone.run(() => {\n            console.log(`Latitude: ${position.coords.latitude} Longitude:  ${position.coords.longitude}`);\n            this.lat = position.coords.latitude;\n            this.lng = position.coords.longitude;\n            console.log(this.lat);\n            console.log(this.lng);\n            // set location\n            this.loc = {\n              lat: this.lat,\n              lng: this.lng,\n              marker: { lat: this.lat, lng: this.lng, draggable: true },\n              zoom: 15,\n              address_level_1: 'via San Michele 12',\n              address_level_2: 'Foresto Sparso',\n              address_state: 'BG',\n              address_country: 'Italia',\n              address_zip: '24060'\n            };\n            this.mapsApiLoader.load().then(() => {\n              this.findLocation(this.getFullAddress());\n            });\n          });\n        }\n      },\n        (error: PositionError) => {\n          console.log(error);\n          this.geolock = false;\n          this.geomsg = `Position Error: ${error.message}`;\n        },\n        this.options);\n\n      this.geoid = navigator.geolocation.watchPosition((position: Position) => {\n        if (position) {\n          this.zone.run(() => this.updateLocation(position));\n        }\n      },\n        (error: PositionError) => {\n          console.log(error);\n          this.geoerrorcount++;\n          this.geolock = false;\n          this.geomsg = `Position Error: ${error.message}`;\n        },\n        this.options);\n\n    } else {\n      alert('Geolocation is not supported by this browser.');\n    }\n  }\n\n  getFullAddress(): string {\n    let full_address = this.loc.address_level_1 || '';\n\n    if (this.loc.address_level_2) { full_address = full_address + ' ' + this.loc.address_level_2; }\n    if (this.loc.address_state) { full_address = full_address + ' ' + this.loc.address_state; }\n    if (this.loc.address_country) { full_address = full_address + ' ' + this.loc.address_country; }\n\n    return full_address;\n  }\n\n  findLocation(address: string) {\n    if (!this.geocoder) {\n      this.geocoder = new google.maps.Geocoder();\n    }\n    this.geocoder.geocode({'address': address}, (results, status) => {\n      console.log(results);\n      if (status === google.maps.GeocoderStatus.OK) {\n        for (let i = 0; i < results[0].address_components.length; i++) {\n          const types = results[0].address_components[i].types;\n\n          if (types.indexOf('locality') !== -1) {\n            this.loc.address_level_2 = results[0].address_components[i].long_name;\n          }\n          if (types.indexOf('country') !== -1) {\n            this.loc.address_country = results[0].address_components[i].long_name;\n          }\n          if (types.indexOf('postal_code') !== -1) {\n            this.loc.address_zip = results[0].address_components[i].long_name;\n          }\n          if (types.indexOf('administrative_area_level_1') !== -1) {\n            this.loc.address_state = results[0].address_components[i].long_name;\n          }\n        }\n\n        if (results[0].geometry.location) {\n          this.loc.lat = results[0].geometry.location.lat();\n          this.loc.lng = results[0].geometry.location.lng();\n          this.loc.marker.lat = results[0].geometry.location.lat();\n          this.loc.marker.lng = results[0].geometry.location.lng();\n          this.loc.marker.draggable = true;\n          this.loc.viewport = results[0].geometry.viewport;\n        }\n      } else {\n        alert('Sorry, this search produced no results.');\n      }\n    });\n  }\n\n  computeDistanceBetween(from: AgmLocation, to: AgmLocation): number {\n    const llfrom = new google.maps.LatLng(from.lat, from.lng);\n    const llto = new google.maps.LatLng(to.lat, to.lng);\n    return google.maps.geometry.spherical.computeDistanceBetween(llfrom, llto);\n  }\n\n  inScope(point: CheckPoint): boolean {\n    const distance = this.computeDistanceBetween(this.loc, point.loc);\n    console.log(`Distance to check point is ${distance} for scope is ${point.scope}`);\n    if (distance <= point.scope) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  currentEEP(point: CheckPoint): number {\n    let current = -1;\n    let distance = this.computeDistanceBetween(this.loc, point.loc);\n    if (distance > point.scope) {\n      return -1;\n    } else if (distance <= point.radius) {\n      return point.eep.length;\n    }\n    distance = point.scope + 1;\n    for (let i = 0; i < point.eep.length; i++) {\n      const dist = this.computeDistanceBetween(this.loc, point.eep[i].loc);\n      if (dist < distance) {\n        distance = dist;\n        current = i;\n      }\n    }\n    return current;\n  }\n\n  traceRide(giro: Giro): void {\n    if (!this.ride) {\n      console.log('Nothing to trace, no active ride');\n      return;\n    }\n    if (!this.trace) {\n      console.log(`Creating new trace for ${giro.name} ride ${this.ride.id}`);\n      this.trace = { rideId: this.ride.id, points: [], next:  0, currentEEP: -1};\n    }\n    const chekPoint = giro.points[this.trace.next];\n    const eep = this.currentEEP(chekPoint);\n    const timestamp = new Date().getTime();\n    if (eep === -1) {\n      console.log(`Out of scope. No trace record added`);\n    } else if (eep === this.trace.currentEEP) {\n      // the same exit / entry point need to update current record\n      if (this.trace.points.length === 0) {\n        console.log('No trace record to update');\n      } else {\n        const point = this.trace.points[this.trace.points.length - 1];\n        if (eep === chekPoint.eep.length) {\n          // inside radius, update timestamp if distance is better\n          const distance = this.computeDistanceBetween(this.loc, chekPoint.loc);\n          if (distance < point.distance) {\n            point.timestamp = timestamp;\n            point.distance = distance;\n            this.geomsg = `Check point pass time is updated ${this.datePipe.transform(timestamp, 'dd-MM-yy hh:mm:ss')}`;\n            console.log(this.geomsg);\n            console.log(`Here it is the trace record`);\n            console.log(this.trace);\n          } else {\n            console.log(`Check point pass time is NOT updated`);\n          }\n        } else {\n          // inside scope the same EEP update timestemp\n          if (point.eep.length === 0) {\n            console.log('No trace record to update for EEP');\n          } else {\n            // let's update time only for entry point\n            if (point.eep[point.eep.length - 1].entry) {\n              point.eep[point.eep.length - 1].timestamp = timestamp;\n              this.geomsg = `Check point Entry time is updated ${this.datePipe.transform(timestamp, 'dd-MM-yy hh:mm:ss')}`;\n              console.log(this.geomsg);\n              console.log(`Here it is the trace record`);\n              console.log(this.trace);\n            } else {\n              console.log(`Check point Exit time is not updated`);\n            }\n          }\n        }\n      }\n    } else {\n      // the new Entry / Exit point, first check if we are entering the radius\n      if (eep === chekPoint.eep.length) {\n        // entering radius record pass time\n        if (this.trace.points.length === 0) {\n          console.log('No trace record is found for enter point but we are entering radius');\n        } else {\n          const point = this.trace.points[this.trace.points.length - 1];\n          const distance = this.computeDistanceBetween(this.loc, chekPoint.loc);\n          point.timestamp = timestamp;\n          point.distance = distance;\n          this.trace.currentEEP = eep;\n          this.geomsg = `Check point pass time is recorded ${this.datePipe.transform(timestamp, 'dd-MM-yy hh:mm:ss')}`;\n          console.log(this.geomsg);\n          console.log(`Here it is the trace record`);\n          console.log(this.trace);\n        }\n      } else {\n        // new Entry / Exit point\n        if (this.trace.currentEEP === -1) {\n          // addind new record for check point because we are in the scope\n          const cp: CheckPoint = {\n            id: chekPoint.id,\n            loc: chekPoint.loc,\n            type: chekPoint.type,\n            scope: chekPoint.scope,\n            radius: chekPoint.radius,\n            eep: [{\n              loc: chekPoint.eep[eep].loc,\n              next: chekPoint.eep[eep].next,\n              slow: chekPoint.eep[eep].slow,\n              timestamp: timestamp,\n              entry: true\n            }]\n          };\n          this.trace.points.push(cp);\n          this.trace.currentEEP = eep;\n          this.geomsg = `Check point Entry time is recorded ${this.datePipe.transform(timestamp, 'dd-MM-yy hh:mm:ss')}`;\n          console.log(this.geomsg);\n          console.log(`Here it is the trace record`);\n          console.log(this.trace);\n        } else {\n          // check if we are exiting the radius first\n          if (this.trace.currentEEP === chekPoint.eep.length) {\n            // yes we have passed checkpoint and exit radius, need to add exit point record\n            if (this.trace.points.length === 0) {\n              console.log('No trace record is found for enter point but we are exiting radius');\n            } else {\n              const point = this.trace.points[this.trace.points.length - 1];\n              const exit: EnterExitPoint = {\n                loc: chekPoint.eep[eep].loc,\n                next: chekPoint.eep[eep].next,\n                slow: chekPoint.eep[eep].slow,\n                timestamp: timestamp,\n                entry: false\n              };\n              point.eep.push(exit);\n              point.passed = true;\n              this.trace.currentEEP = eep;\n              this.trace.next = chekPoint.eep[eep].next;\n              if (chekPoint.eep[eep].nextEEP) {\n                this.trace.nextEEP = chekPoint.eep[eep].nextEEP;\n              }\n              this.geomsg = `Check point Exit time is recorded ${this.datePipe.transform(timestamp, 'dd-MM-yy hh:mm:ss')}`;\n              console.log(this.geomsg);\n              console.log(`Here it is the trace record`);\n              console.log(this.trace);\n            }\n          } else {\n            // current EEP is not radius and we have got new exit / etry point, so let's add new etry point now\n            if (this.trace.points.length === 0) {\n              console.log('No trace record is found for enter point but we are have got the new entry point here');\n            } else {\n              const point = this.trace.points[this.trace.points.length - 1];\n              this.trace.points[0].eep = [chekPoint.eep[eep]];\n              this.trace.points[0].eep[0].timestamp = timestamp;\n              this.trace.points[0].eep[0].entry = true;\n              this.trace.currentEEP = eep;\n              this.geomsg = `Check point New Enter time is recorded ${this.datePipe.transform(timestamp, 'dd-MM-yy hh:mm:ss')}`;\n              console.log(this.geomsg);\n              console.log(`Here it is the trace record`);\n              console.log(this.trace);\n            }\n          }\n        }\n      }\n    }\n  }\n\n  ngOnDestroy() {\n    if (this.tags_subs) { this.tags_subs.unsubscribe(); }\n    if (this.rides_subs) { this.rides_subs.unsubscribe(); }\n    if (this.ride_subs) { this.ride_subs.unsubscribe(); }\n    if (this.timer_subs) { this.timer_subs.unsubscribe(); }\n    if (this.rider_subs) { this.rider_subs.unsubscribe(); }\n    if (this.geotimer) { window.clearInterval(this.geotimer); }\n  }\n\n  clear() {\n    this.tagid = null;\n    this.start = 0;\n    this.end = 10;\n    this.progress = false;\n    this.geolock = false;\n    this.geoupdatecount = 0;\n    this.geoerrorcount = 0;\n    this.geoclearcount = 0;\n  }\n\n  gotoRide(id: number): void {\n    this.router.navigate([`/ride/${id}`]);\n  }\n\n  getTags(): void {\n    this.tags_subs = this.tagService.getTagsByMobile(this.authService.getUserPhone())\n      .subscribe(tags => this.tags = tags);\n  }\n\n  getRider(): void {\n    this.rider_subs = this.riderService.getRiderByMobile(this.authService.getUserPhone())\n    .subscribe(riders => {\n      if (riders) {\n        if (riders.length > 0) {\n          this.rider = riders[0];\n          this.nikname = this.rider.nikname;\n          this.avatar = this.rider.avatar;\n        }\n      }\n     });\n  }\n\n  getRides(): void {\n    this.rides_subs = this.rideService.getRidesByTagId(this.tagid)\n      .subscribe(rides => this.rides = rides);\n  }\n\n  getRide(): void {\n    this.ride_subs = this.rideService.getRideByTagId(this.tagid)\n      .subscribe(rides => {\n        if (rides.length > 0) {\n          this.ride = rides[0];\n          this.timer = timer(0, 1000);\n          this.timer_subs = this.timer.subscribe(t => {\n            this.timestemp = new Date().getTime() - this.ride.start;\n            this.hours = Math.floor(this.timestemp / 1000 / 60 / 60);\n            this.minutes = Math.floor(this.timestemp / 1000 / 60 );\n            this.seconds = Math.floor(this.timestemp / 1000 );\n          });\n        }\n      });\n  }\n\n  select(tagid: string) {\n    this.tagid = tagid;\n    this.getRides();\n    this.getRide();\n  }\n\n  setPage(e: PageEvent): void {\n    console.log(e);\n    const { pageIndex, pageSize } = e;\n    this.start = pageIndex * pageSize;\n    this.end = this.start + pageSize;\n  }\n\n  markerDragEnd(e: any): void {\n    console.log(e.coords);\n    this.loc.lat = e.coords.lat;\n    this.loc.lng = e.coords.lng;\n    // console.log(`In the scope: ${this.inScope(this.checkPoint)} current Exit/Entry is ${this.currentEEP(this.checkPoint)}`);\n    this.traceRide(this.girodiseo);\n  }\n\n  startRide(e: Event): void {\n    if (!this.tagid) {\n      return;\n    }\n    this.progress = true;\n    e.preventDefault();\n    e.stopPropagation();\n    const start = new Date().getTime();\n    const tagid = this.tagid;\n    const id = Math.random() * 1000 + start;\n    const open = true;\n    const rider = this.rider;\n    this.trace = {rideId: id, points: [], next: 0, currentEEP: -1};\n    let ride: Ride;\n    if (rider) {\n      ride = { id, tagid, start, open, rider, trace: this.trace };\n    } else {\n      ride = { id, tagid, start, open, trace: this.trace };\n    }\n    this.rideService.addNewRideCB(ride, (err, ref) => {\n      if (err) {\n        this.progress = false;\n        console.error(err);\n      } else {\n        this.progress = false;\n        this.getRides();\n      }\n    });\n  }\n\n  finishRide(e: Event): void {\n    this.progress = true;\n    e.preventDefault();\n    e.stopPropagation();\n    const finish = new Date().getTime();\n    this.ride.finish = finish;\n    this.ride.open = false;\n    if (this.trace) {\n      this.ride.trace = this.trace;\n    }\n    const time = finish - this.ride.start;\n    if (time > this.param.mintime && time < this.param.maxtime) {\n      this.ride.time = time;\n      console.log(`RideComponent: finishRide: record ride time: ${time}`);\n    } else {\n      this.ride.time = 0;\n      console.log(`RideComponent: finishRide: ride time: ${time} is out of range [${this.param.mintime}, ${this.param.maxtime}]`);\n    }\n    this.rideService.updateRideByIdCB(this.ride, (err, ref) => {\n      if (err) {\n        this.progress = false;\n        console.error(err);\n      } else {\n        this.progress = false;\n        this.getRides();\n      }\n    });\n  }\n\n  gotoBack(): void {\n    this.location.back();\n  }\n\n}\n\n","module.exports = \".home-intro-section {\\n    background: url('bike.png') no-repeat center center;\\n    background-size: cover;\\n    padding: 180px 0;\\n    color: #ffffff;\\n    overflow: hidden;\\n  }\\n  \\n  .home-footer-section {\\n    height: 20px;\\n    background-color: #010020;\\n    color: #ffffff;\\n  }\\n  \\n  .get-started {\\n    width: 270px;\\n    height: 48px;\\n    opacity: 0.4;\\n    border-radius: 24px;\\n    font-size: 16px;\\n    border-color: aqua;\\n    box-shadow: 0 2px 6px 0 rgba(0, 0, 0, 0.5);\\n    color: #ffffff;\\n    background-color: #010020;\\n  }\\n  \\n  .footer-info {\\n    font-size: 9px;\\n    color: gray;\\n  }\\n  \\n  .home-intro-section-small {\\n    background: url('bike-small.png') no-repeat center center;\\n    background-size: cover;\\n    padding: 180px 0;\\n    color: #ffffff;\\n    overflow: hidden;\\n  }\\n  \\n  \\n  \"","module.exports = \"<div fxLayout=\\\"column\\\">\\n  <div fxLayout=\\\"raw\\\" \\n         fxLayout.lt-md=\\\"column\\\" \\n         fxLayoutAlign=\\\"space-around center\\\" \\n         id=\\\"intro-section\\\" \\n         class = \\\"home-intro-section\\\"\\n         [ngClass.md]=\\\"['home-intro-section']\\\" \\n         [ngClass.sm]=\\\"['home-intro-section-small']\\\"\\n         [ngClass.xs]=\\\"['home-intro-section-small']\\\">\\n         <div fxHide.lt-md></div>\\n         <div fxLayout=\\\"column\\\" fxLayoutAlign=\\\"space-around center\\\">\\n              <h1>GIRO d'ISEO</h1>\\n              <button [routerLink]=\\\"['/reg']\\\" class=\\\"get-started\\\">New Tag</button><br><br>\\n              <button [routerLink]=\\\"['/ride']\\\" class=\\\"get-started\\\">New Ride</button><br><br>\\n              <button [routerLink]=\\\"['/dashboard']\\\" class=\\\"get-started\\\">Dashboard</button>\\n         </div>\\n         <div></div>\\n  </div>\\n  <div id=\\\"footer-section\\\" fxLayout=\\\"raw\\\" fxLayoutAlign=\\\"space-around center\\\" class=\\\"home-footer-section\\\">\\n         <div class=\\\"footer-info\\\">Giro d'Iseo Web App</div>\\n         <div class=\\\"footer-info\\\">{{version}}</div>\\n         \\n         <div></div>\\n         <div class=\\\"footer-info\\\"> Copyright REGA Risk Sharing 2019</div>\\n  </div>\\n</div>\\n\"","import { Component, OnInit } from '@angular/core';\nimport { Location } from '@angular/common';\nimport { version } from '../../environments/environment';\n\n@Component({\n  selector: 'app-getstarted',\n  templateUrl: './getstarted.component.html',\n  styleUrls: ['./getstarted.component.css']\n})\nexport class GetstartedComponent implements OnInit {\n\n  constructor(private location: Location) { }\n  version: string;\n\n  ngOnInit() {\n    this.version = version;\n  }\n\n  gotoBack(): void {\n    this.location.back();\n  }\n\n}\n","module.exports = \".header-bar {\\n    background-color: #010020;\\n    color: #ffffff;\\n}\\n\\n.header-btn {\\n    color: #ffffff;\\n}\\n\\n.header-title {\\n    color: #ffffff;\\n}\"","module.exports = \"<div fxLayout=\\\"row\\\" fxLayoutWrap=\\\"wrap\\\" fxLayoutAlign=\\\"start center\\\"  class=\\\"header-bar\\\">\\n\\n    <div fxFlex=\\\"2\\\"></div>\\n    <div fxFlex=\\\"8\\\">\\n        <button *ngIf=\\\"back\\\" (click)=\\\"gotoBack()\\\" class=\\\"header-btn\\\" mat-icon-button>\\n            <mat-icon>arrow_back_ios</mat-icon>\\n        </button>\\n    </div>\\n\\n    <div fxFlex=\\\"35\\\"></div>\\n    <div fxFlex=\\\"10\\\"><h3 class=\\\"header-title\\\">{{title}}</h3></div>\\n    <div fxFlex=\\\"35\\\"></div>\\n\\n    <div fxFlex=\\\"8\\\">\\n        <button *ngIf=\\\"reload\\\" (click)=\\\"doReload()\\\" class=\\\"header-btn\\\" mat-icon-button>\\n            <mat-icon>autorenew</mat-icon>\\n        </button>\\n        <span *ngIf=\\\"subtitle\\\" fxHide fxShow.gt-sm><small>{{subtitle}}</small></span>\\n    </div>\\n    <div fxFlex=\\\"2\\\"></div>\\n</div>\\n\\n\"","import { Component, OnInit, Input } from '@angular/core';\nimport { Location } from '@angular/common';\nimport { Router } from '@angular/router';\n\n@Component({\n  selector: 'app-header',\n  templateUrl: './header.component.html',\n  styleUrls: ['./header.component.css']\n})\nexport class HeaderComponent implements OnInit {\n  @Input() back: boolean;\n  @Input() reload: boolean;\n  @Input() title: string;\n  @Input() parent: string;\n  @Input() subtitle: string;\n  constructor(private location: Location, private router: Router) { }\n\n  ngOnInit() {\n\n  }\n\n  gotoBack(): void {\n    this.location.back();\n  }\n\n  doReload(): void {\n    this.router.navigateByUrl('/about', { skipLocationChange: true })\n      .then(() => this.router.navigate([this.parent]))\n      .catch(console.error);\n  }\n\n\n}\n","import { Injectable } from '@angular/core';\nimport { AngularFireStorage, AngularFireUploadTask } from '@angular/fire/storage';\nimport { Router } from '@angular/router';\n\nimport { AngularFireAuth } from 'angularfire2/auth';\nimport * as firebase from 'firebase/app';\nimport { Observable, of  } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ImagesService {\n  private storageRef: firebase.storage.Reference;\n  private imagesRef: firebase.storage.Reference;\n\n  constructor(private storage: AngularFireStorage) {}\n\n  uploadAvatar(id: string, avatar: File): AngularFireUploadTask {\n    // create full path to the file with id as subdirectory\n    const filePath = `${id}/images/${avatar.name}`;\n    const ref = this.storage.ref(filePath);\n    // upload and return task\n    return this.storage.upload(filePath, avatar);\n  }\n}\n","module.exports = \"\"","module.exports = \"<div fxLayout=\\\"column\\\">\\n\\n  <div fxLayout=\\\"row\\\" fxLayoutWrap=\\\"wrap\\\" fxLayoutAlign=\\\"start center\\\">\\n      <div fxFlex=\\\"100\\\">\\n        <br><br>\\n      </div>\\n  </div>\\n\\n  <div fxLayout=\\\"row\\\" fxLayoutWrap=\\\"wrap\\\" fxLayoutAlign=\\\"start center\\\">\\n      <div fxFlex=\\\"100\\\">\\n          <mat-form-field>\\n              <input matInput name=\\\"itemid\\\" type=\\\"text\\\" placeholder=\\\"Enter item ID\\\" required minlenght=\\\"8\\\" [(ngModel)]=\\\"data.id\\\">\\n          </mat-form-field>\\n      </div>\\n  </div>\\n\\n  <div fxLayout=\\\"row\\\" fxLayoutWrap=\\\"wrap\\\" fxLayoutAlign=\\\"start center\\\">\\n      <div fxFlex=\\\"100\\\">\\n        <br><br>\\n      </div>\\n  </div>\\n\\n  <div fxLayout=\\\"row\\\" fxLayoutWrap=\\\"wrap\\\" fxLayoutAlign=\\\"start center\\\">\\n      <div fxFlex=\\\"40\\\" mat-dialog-actions>\\n          <button mat-raised-button color=\\\"primary\\\" mat-button [disabled]=\\\"!data.id\\\" [mat-dialog-close]=\\\"data.id\\\" cdkFocusInitial>Ok</button>\\n      </div>\\n      <div fxFlex=\\\"20\\\" mat-dialog-actions></div>\\n      <div fxFlex=\\\"40\\\" mat-dialog-actions>\\n          <button mat-raised-button color=\\\"warn\\\" mat-button (click)=\\\"onNoClick()\\\">Cancel</button>\\n      </div>\\n          \\n     \\n  </div>\\n  \\n</div>\\n\"","import { Component, OnInit, Inject } from '@angular/core';\nimport { MatDialog, MatDialogRef, MAT_DIALOG_DATA } from '@angular/material';\n\nexport interface ItemDialogData {\n  id: string;\n  scan: boolean;\n}\n\n@Component({\n  selector: 'app-item-dialog',\n  templateUrl: './item-dialog.component.html',\n  styleUrls: ['./item-dialog.component.css']\n})\nexport class ItemDialogComponent implements OnInit {\n\n  itemId: string;\n\n  constructor(\n    public dialogRef: MatDialogRef<ItemDialogComponent>,\n    @Inject(MAT_DIALOG_DATA) public data: ItemDialogData) {\n      this.data.id = '';\n      this.data.scan = true;\n    }\n\n  ngOnInit() {\n  }\n\n  onNoClick(): void {\n    this.dialogRef.close();\n  }\n\n}\n","module.exports = \"\"","module.exports = \"<app-header *ngIf=\\\"!scanning\\\" [back]=\\\"true\\\" [title]=\\\"'Item'\\\"></app-header>\\n\\n<div *ngIf=\\\"!scanning\\\" fxLayout=\\\"column\\\">\\n    <div *ngIf=\\\"loading\\\" fxFlex=\\\"100\\\"><br><br><br><br><br><br></div>\\n    <div *ngIf=\\\"loading\\\" fxLayout=\\\"row\\\" fxLayoutWrap=\\\"wrap\\\" fxLayoutAlign=\\\"start center\\\">\\n        <div fxFlex=\\\"40\\\"></div><div fxFlex=\\\"20\\\"><h2>Loading...</h2></div><div fxFlex=\\\"40\\\"></div>\\n    </div>\\n\\n    <div *ngIf=\\\"!loading\\\" fxFlex=\\\"100\\\"><br></div>\\n    <div *ngIf=\\\"!loading\\\" fxLayout=\\\"row\\\" fxLayoutWrap=\\\"wrap\\\" fxLayoutAlign=\\\"start center\\\">\\n        <div fxFlex=\\\"2\\\"></div>\\n        <div fxFlex=\\\"88\\\">{{schemaProductName}}</div>\\n\\n        <div fxFlex=\\\"8\\\">\\n          <button [disabled]=\\\"locked\\\" (click)=\\\"addItem()\\\" mat-icon-button>\\n              <mat-icon>add_circle_outline</mat-icon>\\n          </button>\\n        </div>\\n        <div fxFlex=\\\"2\\\"></div>\\n    </div>\\n\\n    <div *ngIf=\\\"!loading\\\" fxLayout=\\\"row\\\" fxLayoutWrap=\\\"wrap\\\" fxLayoutAlign=\\\"start center\\\">\\n        <div fxFlex=\\\"2\\\"></div>\\n        <div fxFlex=\\\"88\\\">{{schemaProductId}}</div>\\n        <div fxFlex=\\\"8\\\">\\n            <button [disabled]=\\\"locked\\\" (click)=\\\"plusOne()\\\" mat-icon-button>\\n                <mat-icon>expand_less</mat-icon>\\n            </button>\\n          </div>\\n          <div fxFlex=\\\"2\\\"></div>\\n    </div>\\n\\n    <div *ngIf=\\\"!loading\\\" fxLayout=\\\"row\\\" fxLayoutWrap=\\\"wrap\\\" fxLayoutAlign=\\\"start center\\\">\\n        <div fxFlex=\\\"2\\\"></div>\\n        <div fxFlex=\\\"45\\\" [innerHTML]=\\\"schemaProductPrice\\\"></div>\\n        <div fxFlex=\\\"8\\\">{{itemQty}}</div>\\n        <div fxFlex=\\\"35\\\"></div>\\n        \\n        <div fxFlex=\\\"8\\\">\\n            <button [disabled]=\\\"locked\\\" (click)=\\\"minusOne()\\\" mat-icon-button>\\n                <mat-icon>expand_more</mat-icon>\\n            </button>\\n          </div>\\n          <div fxFlex=\\\"2\\\"></div>\\n    </div>\\n\\n    \\n\\n\\n    <div *ngIf=\\\"!loading\\\" fxLayout=\\\"row\\\" fxLayoutWrap=\\\"wrap\\\" fxLayoutAlign=\\\"start center\\\">\\n        <div fxFlex=\\\"100\\\">\\n            <img *ngIf=\\\"!loading\\\" [src]=\\\"schemaProductImg\\\">\\n        </div>\\n        \\n    </div>\\n\\n    <div *ngIf=\\\"!loading && tagid\\\" fxLayout=\\\"row\\\" fxLayoutWrap=\\\"wrap\\\" fxLayoutAlign=\\\"start center\\\">\\n            <div fxFlex=\\\"100\\\">\\n                    <button (click)=\\\"tagInfo()\\\" mat-icon-button>\\n                        <mat-icon>info</mat-icon>\\n                    </button>\\n            </div>\\n            \\n        </div>\\n</div>\\n\\n\\n<div *ngIf=\\\"scanning\\\" fxLayout=\\\"row\\\" fxLayoutWrap=\\\"wrap\\\" fxLayoutAlign=\\\"start center\\\">\\n\\n    <div fxFlex=\\\"2\\\"></div>\\n    <div fxFlex=\\\"8\\\">\\n        <button (click)=\\\"getItemId()\\\" mat-icon-button>\\n            <mat-icon>add_circle_outline</mat-icon>\\n        </button>\\n    </div>\\n\\n    <div fxFlex=\\\"35\\\"></div>\\n    <div fxFlex=\\\"10\\\"><h4>Scan</h4></div>\\n    <div fxFlex=\\\"35\\\"></div>\\n\\n    <div fxFlex=\\\"8\\\">\\n        <button (click)=\\\"close()\\\" mat-icon-button>\\n            <mat-icon>close</mat-icon>\\n          </button>\\n    </div>\\n    <div fxFlex=\\\"2\\\"></div>\\n</div>\\n\\n\\n<zxing-scanner [formats]=\\\"['QR_CODE', 'EAN_13', 'CODE_128', 'CODABAR', 'UPC_A', 'UPC_E', 'UPC_EAN_EXTENSION', 'CODE_39', 'ITF']\\\" *ngIf=\\\"scanning\\\" #scanner (camerasFound)=\\\"camerasFoundHandler($event)\\\" (scanComplete)=\\\"scanCompleteHandler($event)\\\"></zxing-scanner>\\n\"","import { Component, OnInit, Output, ViewChild } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { Location } from '@angular/common';\nimport { AuthService } from '../auth.service';\nimport { Observable } from 'rxjs';\nimport { Order, Item, ORDERSTATUS } from '../order';\nimport { ZXingScannerComponent } from '@zxing/ngx-scanner';\nimport { Result } from '@zxing/library';\nimport { HttpClient } from '@angular/common/http';\nimport { MatDialog, MatDialogRef, MAT_DIALOG_DATA } from '@angular/material';\nimport { ItemDialogComponent, ItemDialogData } from '../item-dialog/item-dialog.component';\nimport { OrderService } from '../order.service';\n\n@Component({\n  selector: 'app-item',\n  templateUrl: './item.component.html',\n  styleUrls: ['./item.component.css']\n})\nexport class ItemComponent implements OnInit {\n  @Output() item: Item;\n  @ViewChild('scanner') scanner: ZXingScannerComponent;\n\n  scanning: boolean;\n  loading: boolean;\n  qr_code: string;\n  invalid: boolean;\n  id: string;\n  url: string;\n  index: number;\n  schemaProductId: string;\n  schemaProductName: string;\n  schemaProductImg: string;\n  schemaProductPrice: string;\n  itemQty: number;\n  price: number;\n  ref: string;\n  order: Order;\n  locked: string;\n  tagid: string;\n\n  constructor(\n    private location: Location,\n    private route: ActivatedRoute,\n    private http: HttpClient,\n    public dialog: MatDialog,\n    private orderService: OrderService,\n    private router: Router\n    ) { }\n\n  loadItem(): void {\n    this.url = `https://us-central1-cloud-firestore-test-d95bf.cloudfunctions.net/snitch?id=${this.id}`;\n      this.http.get(this.url, { responseType: 'text' }).subscribe((res: string) => {\n        const parser = new DOMParser();\n        const doc = parser.parseFromString(res, 'text/html');\n        this.schemaProductId = doc.getElementById('schemaProductId').innerHTML;\n        this.schemaProductName = doc.getElementById('schemaProductName').innerHTML;\n        this.schemaProductImg = doc.getElementById('schemaProductImg').innerHTML;\n        this.schemaProductPrice = doc.getElementById('schemaProductPrice').innerHTML;\n        this.price = parseInt(doc.getElementById('schemaProductPrice').getAttribute('content'), 10);\n        this.loading = false;\n        this.itemQty = 1;\n        this.item = {\n          id: this.id,\n          code: this.schemaProductId,\n          name: this.schemaProductName,\n          img: this.schemaProductImg,\n          price: this.price,\n          priceTag: this.schemaProductPrice,\n          currency: 'RUB',\n          qty: 1\n        };\n      });\n  }\n\n  findItem(): void {\n    if (!this.order) { return; }\n    if (!this.order.items) { return; }\n\n    let index = -1;\n    for (let i = 0; i < this.order.items.length; i++) {\n      if (this.order.items[i].id === this.id) {\n        index = i;\n        break;\n      }\n    }\n\n    if (index >= 0) {\n      console.log(`Item is found on index: ${index}`);\n      this.index = index;\n      if (this.order.items[index].code.startsWith('TAG')) {\n        this.locked = 'locked TAG';\n        this.tagid = this.order.items[index].code.slice(3);\n        if (this.tagid.startsWith('-Gold-')) {\n          this.tagid = this.tagid.slice(6);\n        } else if (this.tagid.startsWith('-Silver-')) {\n          this.tagid = this.tagid.slice(8);\n        } else if (this.tagid.startsWith('-Bronze-')) {\n          this.tagid = this.tagid.slice(8);\n        }\n      }\n    }\n  }\n\n  tagInfo() {\n    this.router.navigate([`/tag/${this.tagid}`]);\n  }\n\n  showItemByIndex(): void {\n    if (this.index < 0) { return; }\n    if (!this.order) { return; }\n    if (!this.order.items) { return; }\n    if (this.index >= this.order.items.length) { return; }\n    this.schemaProductId = this.order.items[this.index].code;\n    this.schemaProductImg = this.order.items[this.index].img;\n    this.schemaProductName = this.order.items[this.index].name;\n    this.price = this.order.items[this.index].price;\n    this.schemaProductPrice = this.order.items[this.index].priceTag;\n    this.itemQty = this.order.items[this.index].qty;\n    this.loading = false;\n  }\n\n  ngOnInit() {\n    this.id = this.route.snapshot.paramMap.get('id');\n    this.ref = this.route.snapshot.paramMap.get('ref');\n    this.locked = this.route.snapshot.paramMap.get('locked');\n    this.index = -1;\n    this.invalid = false;\n    this.qr_code = '';\n    this.url = '';\n    this.loading = true;\n    this.itemQty = 0;\n    this.tagid = undefined;\n\n    if (this.id === 'NEW') {\n      this.scanning = true;\n    } else {\n      this.scanning = false;\n    }\n\n    if (this.ref) {\n      this.orderService.getOrderByRef(this.ref).subscribe((res) => {\n        if (res.length > 0) {\n          this.order = res[0];\n        } else {\n          this.order = null;\n        }\n        if (this.id !== 'NEW') {\n          this.findItem();\n          this.showItemByIndex();\n        }\n      });\n    } else {\n      if (this.id !== 'NEW') {\n        this.loadItem();\n      }\n    }\n  }\n\n  getItemId(): void {\n    const data: ItemDialogData = {\n      id: 'NEW',\n      scan: false\n    };\n    const dialogRef = this.dialog.open(ItemDialogComponent, {\n      width: '250px',\n      height: '250px',\n      data\n    });\n\n    dialogRef.afterClosed().subscribe(result => {\n      console.log('The Item Dialog was closed');\n      this.id = result;\n      if (this.id === '') {\n        this.scanning = true;\n      } else {\n        this.scanning = false;\n        this.loadItem();\n      }\n    });\n  }\n\n  camerasFoundHandler(event) {\n    this.scanner.scan(event[0].deviceId);\n  }\n\n  scanCompleteHandler(event) {\n    this.scanning = false;\n    console.log(event);\n    if (event instanceof Result) {\n      this.qr_code = event.getText();\n      this.id = this.qr_code.slice(0, 8);\n      this.loadItem();\n      console.log('Item URL: ' + this.url);\n    } else {\n      console.error('Scanner error');\n    }\n  }\n\n  close(): void {\n    this.scanning = false;\n  }\n\n  addItem(): void {\n    if (this.ref && this.order) {\n      if (this.schemaProductId) {\n\n        const item: Item = {\n          id: this.id,\n          code: this.schemaProductId,\n          name: this.schemaProductName,\n          qty: this.itemQty,\n          currency: 'RUB',\n          priceTag: this.schemaProductPrice,\n          price: this.price,\n          img: this.schemaProductImg\n        };\n\n        if (this.index >= 0) {\n          if (this.order.items) {\n            if (this.index < this.order.items.length) {\n              this.order.items[this.index] = item;\n            }\n          }\n        } else {\n          this.order.items.push(item);\n        }\n\n        this.orderService.updateOrder(this.order);\n        this.location.back();\n      }\n    }\n  }\n\n  plusOne(): void {\n    this.itemQty += 1;\n  }\n\n  minusOne(): void {\n    this.itemQty = this.itemQty > 1 ? this.itemQty - 1 : 1;\n  }\n\n}\n","module.exports = \".home-intro-section {\\n  background: url('bike.png') no-repeat center center;\\n  background-size: cover;\\n  padding: 180px 0;\\n  color: #ffffff;\\n  overflow: hidden;\\n}\\n\\n.home-footer-section {\\n  height: 20px;\\n  background-color: #010020;\\n  color: #ffffff;\\n}\\n\\n.get-started {\\n  width: 270px;\\n  height: 48px;\\n  opacity: 0.4;\\n  border-radius: 24px;\\n  font-size: 16px;\\n  border-color: aqua;\\n  box-shadow: 0 2px 6px 0 rgba(0, 0, 0, 0.5);\\n  color: #ffffff;\\n  background-color: #010020;\\n}\\n\\n.footer-info {\\n  font-size: 9px;\\n  color: gray;\\n}\\n\\n.home-intro-section-small {\\n  background: url('bike-small.png') no-repeat center center;\\n  background-size: cover;\\n  padding: 180px 0;\\n  color: #ffffff;\\n  overflow: hidden;\\n}\\n\\n\\n\"","module.exports = \"<div fxLayout=\\\"column\\\">\\n       <div fxLayout=\\\"raw\\\" \\n              fxLayout.lt-md=\\\"column\\\" \\n              fxLayoutAlign=\\\"space-around center\\\" \\n              id=\\\"intro-section\\\" \\n              class = \\\"home-intro-section\\\"\\n              [ngClass.md]=\\\"['home-intro-section']\\\" \\n              [ngClass.sm]=\\\"['home-intro-section-small']\\\"\\n              [ngClass.xs]=\\\"['home-intro-section-small']\\\">\\n              <div fxHide.lt-md></div>\\n              <div><img [routerLink]=\\\"['/getstarted']\\\" src=\\\"../../assets/group-6.png\\\" src.xs=\\\"../../assets/group-6-small.png\\\"></div>\\n              <div fxLayout=\\\"column\\\" fxLayoutAlign.lt-md=\\\"space-around center\\\">\\n                     <h1>GIRO d'ISEO</h1>\\n                     \\n                     <h3><span fxFlex.lt-md=\\\"30px\\\" fxFlex=\\\"0\\\"></span>Ride around Iseo lake, earning points<br>\\n                     and use them to buy local goods and services</h3>\\n              \\n                     \\n                     <button [routerLink]=\\\"['/getstarted']\\\" class=\\\"get-started\\\">Get Started</button>\\n              </div>\\n              <div></div>\\n       </div>\\n       <div id=\\\"footer-section\\\" fxLayout=\\\"raw\\\" fxLayoutAlign=\\\"space-around center\\\" class=\\\"home-footer-section\\\">\\n              <div class=\\\"footer-info\\\">GIRO d'ISEO Web App</div>\\n              <div class=\\\"footer-info\\\">{{version}}</div>\\n              \\n              <div></div>\\n              <div class=\\\"footer-info\\\"> Copyright REGA Risk Sharing 2019</div>\\n       </div>\\n</div>\\n\\n  \\n\\n\\n\\n\\n\"","import { Component, OnInit, NgZone } from '@angular/core';\nimport { EthcontractService } from '../ethereum/ethcontract.service';\nimport { version } from '../../environments/environment';\n\n@Component({\n  selector: 'app-landing',\n  templateUrl: './landing.component.html',\n  styleUrls: ['./landing.component.css']\n})\nexport class LandingComponent implements OnInit {\n  version: string;\n\n\n  constructor() {\n  }\n\n  ngOnInit() {\n    this.version = version;\n  }\n\n}\n","module.exports = \"\"","module.exports = \"<app-header [title]=\\\"'User login'\\\"></app-header>\\n\\n<form class=\\\"example-form\\\">\\n\\n  <mat-grid-list cols=\\\"3\\\" rowHeight=\\\"3em\\\">\\n\\n    <mat-grid-tile [rowspan]=\\\"3\\\" [colspan]=\\\"3\\\">\\n      <mat-form-field>\\n        <input matInput name=\\\"mobile\\\" type=\\\"text\\\" placeholder=\\\"Enter mobile\\\" required minlenght=\\\"7\\\" [(ngModel)]=\\\"mobile\\\">\\n        <mat-hint align=\\\"start\\\">Example: <strong>+16505551234</strong> </mat-hint>\\n      </mat-form-field>\\n    </mat-grid-tile>\\n\\n    <mat-grid-tile [colspan]=\\\"3\\\">\\n      {{msg}}\\n    </mat-grid-tile>\\n\\n    <mat-grid-tile>\\n      <button mat-raised-button color=\\\"primary\\\" [disabled]=\\\"!mobile || progress\\\" (click)=\\\"login($event)\\\">Login</button>\\n    </mat-grid-tile>\\n\\n    <mat-grid-tile>\\n\\n    </mat-grid-tile>\\n\\n    <mat-grid-tile>\\n      <button mat-raised-button color=\\\"warn\\\" [disabled]=\\\"!mobile || progress\\\" (click)=\\\"clear()\\\">Clear</button>\\n    </mat-grid-tile>\\n  \\n    <mat-grid-tile [colspan]=\\\"3\\\">\\n    </mat-grid-tile>\\n\\n  </mat-grid-list>\\n</form>\\n\\n<div id=\\\"recaptcha-container\\\"></div>\\n\"","import { Component, OnInit, AfterViewInit, NgZone } from '@angular/core';\nimport { Router, ActivatedRoute, ParamMap } from '@angular/router';\nimport { TagService } from '../tag.service';\nimport { Tag, Registration } from '../tag';\nimport * as firebase from 'firebase/app';\nimport { AuthService } from '../auth.service';\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.component.html',\n  styleUrls: ['./login.component.css']\n})\nexport class LoginComponent implements OnInit, AfterViewInit {\n  recaptchaVerifier: any;\n  mobile: string;\n  msg: string;\n  progress: boolean;\n  page: string;\n\n  constructor(\n    private zone: NgZone,\n    private tagService: TagService,\n    private authService: AuthService,\n    private route: ActivatedRoute,\n    private router: Router\n    ) { }\n\n  ngAfterViewInit() {\n    // Called after ngAfterContentInit when the component's view has been initialized. Applies to components only.\n    // Add 'implements AfterViewInit' to the class.\n    this.recaptchaVerifier = new firebase.auth.RecaptchaVerifier('recaptcha-container');\n  }\n\n  ngOnInit() {\n    this.page = this.route.snapshot.paramMap.get('page');\n    if (this.page) {\n      console.log('Back to page after login ' + this.page);\n    }\n    this.clear();\n  }\n  clear() {\n    this.mobile = null;\n    this.msg = null;\n    this.progress = false;\n  }\n  login(e: Event) {\n    this.progress = true;\n    e.preventDefault();\n    e.stopPropagation();\n    this.authService.signInWithPhoneNumber(this.mobile, this.recaptchaVerifier, (error, confirmationResult) => {\n      if (error) {\n        // Login error\n        console.error(`LoginComponent: login: ${error}`);\n        this.msg = error;\n        this.progress = false;\n      } else {\n        // I've got a confirmation object, lets go to the SMS confirmation screen\n        // Need to use NgZone.run to go back to Angular zone exec env\n        // tslint:disable-next-line:max-line-length\n        this.zone.run(() => this.page ? this.router.navigate([`/smsconfirm/${this.mobile}/${this.page}`]) : this.router.navigate([`/smsconfirm/${this.mobile}`]))\n          .then(() => console.log('LoginComponent: login: navigated to smsconfirm'))\n          .catch((err) => console.error(err));\n        console.log(`Has confirmation for ${this.mobile}`);\n        console.log(confirmationResult);\n      }\n    });\n  }\n\n}\n","module.exports = \".nav-bar {\\n    background-color: #010020;\\n    color: #ffffff;\\n}\\n\\n.hometop-btn {\\n    color: #ffffff;\\n}\"","module.exports = \" <div fxLayout=\\\"row\\\" fxLayoutWrap=\\\"wrap\\\" fxLayoutAlign=\\\"start center\\\"  class=\\\"nav-bar\\\">\\n\\n    <div fxFlex.gt-sm=\\\"2\\\" fxFlex=\\\"5\\\"></div>\\n    <div fxFlex.gt-sm=\\\"8\\\" fxFlex=\\\"20\\\" (click)=\\\"gotoHome()\\\">\\n      <img src=\\\"../assets/group-6-logo.png\\\">\\n    </div>\\n\\n    <div fxLayout=\\\"row\\\" fxFlex.gt-sm=\\\"80\\\" fxFlex=\\\"22\\\">\\n        <div fxFlex=\\\"10\\\" fxHide fxShow.gt-sm></div>\\n        <button fxHide fxShow.gt-sm class=\\\"hometop-btn\\\" mat-menu-item (click)=\\\"gotoHome()\\\">{{admin?\\\"Admin\\\":expert?\\\"Expert\\\":bike?\\\"Shop\\\":\\\"Home\\\"}}</button>\\n        <button fxHide fxShow.gt-sm class=\\\"hometop-btn\\\" mat-menu-item (click)=\\\"gotoRide()\\\">Ride</button>\\n        <button fxHide fxShow.gt-sm class=\\\"hometop-btn\\\" mat-menu-item (click)=\\\"gotoDashboard()\\\">Dashboard</button>\\n        <button fxHide fxShow.gt-sm class=\\\"hometop-btn\\\" mat-menu-item (click)=\\\"gotoTags()\\\">Tag list</button>\\n        <button fxHide fxShow.gt-sm class=\\\"hometop-btn\\\" mat-menu-item (click)=\\\"gotoAbout()\\\">About</button>\\n        <button fxHide fxShow.gt-sm class=\\\"hometop-btn\\\" mat-menu-item (click)=\\\"gotoShopping()\\\">Shopping</button>\\n        <button fxHide fxShow.gt-sm class=\\\"hometop-btn\\\" (click)=\\\"logout()\\\" mat-menu-item>{{authenticated()?\\\"Logout\\\":\\\"Login\\\"}}</button>\\n        <div fxFlex=\\\"10\\\" fxHide fxShow.gt-sm></div>\\n    </div>\\n\\n    <div fxFlex.gt-sm=\\\"10\\\" fxFlex=\\\"43\\\">\\n        <button (click)=\\\"gotoReg()\\\" mat-icon-button>\\n            <mat-icon>{{authenticated()?loginIcon:\\\"add_circle_outline\\\"}}</mat-icon>\\n        </button>\\n    </div>\\n\\n    <div fxHide.gt-sm fxFlex.gt-sm=\\\"0\\\" fxFlex=\\\"5\\\">\\n        <button mat-icon-button [matMenuTriggerFor]=\\\"menu\\\">\\n            <mat-icon>more_vert</mat-icon>\\n        </button>\\n        <mat-menu #menu=\\\"matMenu\\\">\\n            <button mat-menu-item (click)=\\\"gotoHome()\\\">{{admin?\\\"Admin\\\":expert?\\\"Expert\\\":bike?\\\"Shop\\\":\\\"Home\\\"}}</button>\\n            <button mat-menu-item (click)=\\\"gotoRide()\\\">Ride</button>\\n            <button mat-menu-item (click)=\\\"gotoDashboard()\\\">Dashboard</button>\\n            <button mat-menu-item (click)=\\\"gotoTags()\\\">Tag list</button>\\n            <button mat-menu-item (click)=\\\"gotoAbout()\\\">About</button>\\n            <button mat-menu-item (click)=\\\"gotoShopping()\\\">Shopping</button>\\n            <button (click)=\\\"logout()\\\" mat-menu-item>{{authenticated()?\\\"Logout\\\":\\\"Login\\\"}}</button>\\n        </mat-menu>\\n    </div>\\n    <div fxHide.gt-sm fxFlex.gt-sm=\\\"0\\\" fxFlex=\\\"5\\\"></div>\\n</div>\\n\\n\"","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { AuthService } from '../auth.service';\nimport { Router } from '@angular/router';\nimport { Rider } from '../rider';\nimport { RiderService } from '../rider.service';\nimport { Subscription } from 'rxjs';\n\n@Component({\n  selector: 'app-nav-bar',\n  templateUrl: './nav-bar.component.html',\n  styleUrls: ['./nav-bar.component.css']\n})\nexport class NavBarComponent implements OnInit, OnDestroy {\n  loginIcon: string;\n  rider: Rider;\n  nikname: string;\n  rider_subs: Subscription;\n  user_subs: Subscription;\n  mobile: string;\n  admin: boolean;\n  expert: boolean;\n  bike: boolean;\n\n  constructor(private authService: AuthService, private router: Router, private riderService: RiderService) { }\n\n  ngOnInit() {\n    this.admin = false;\n    this.expert = false;\n    this.bike = false;\n    this.loginIcon = 'add_circle_outline';\n    this.user_subs = this.authService.getUser().subscribe((user) => {\n      if (user) {\n        this.mobile = user.phoneNumber;\n        this.getRider();\n        user.getIdTokenResult()\n          .then((idTokenResult) => {\n            if (!!idTokenResult.claims.admin) {\n              this.admin = true;\n              this.loginIcon = 'star_border';\n            } else if (!!idTokenResult.claims.expert) {\n              console.log('Expert');\n              this.expert = true;\n              this.loginIcon = 'stars';\n            } else if (!!idTokenResult.claims.bike) {\n              console.log('Bike Shop');\n              this.bike = true;\n              this.loginIcon = 'radio_button_checked';\n            } else {\n              this.loginIcon = 'account_circle';\n            }\n        })\n        .catch((error) => {\n          console.log(error);\n        });\n      } else {\n        this.mobile = null;\n        this.nikname = null;\n      }\n    });\n    if (this.authService.authenticated()) {\n      this.loginIcon = 'account_circle';\n    } else {\n      this.mobile = null;\n      this.nikname = null;\n      this.loginIcon = 'add_circle_outline';\n    }\n  }\n\n  ngOnDestroy() {\n    if (this.rider_subs) { this.rider_subs.unsubscribe(); }\n  }\n\n  getRider(): void {\n    this.rider_subs = this.riderService.getRiderByMobile(this.mobile)\n    .subscribe(riders => {\n      if (riders) {\n        if (riders.length > 0) {\n          console.log('navbar');\n          console.log(riders[0]);\n          this.rider = riders[0];\n          this.nikname = this.rider.nikname;\n        }\n      }\n     });\n  }\n\n  authenticated(): boolean {\n    return this.authService.authenticated();\n  }\n\n  logout(): void {\n    if (this.authenticated()) {\n      this.admin = false;\n      this.loginIcon = 'add_circle_outline';\n      this.authService.logout();\n    } else {\n      this.router.navigate(['/login']);\n    }\n  }\n\n  gotoTags(): void {\n    this.router.navigate(['/tags']);\n  }\n\n  gotoRide(): void {\n    this.router.navigate(['/ride']);\n  }\n\n  gotoAbout(): void {\n    this.router.navigate(['/about']);\n  }\n\n  gotoDashboard(): void {\n    this.router.navigate(['/dashboard']);\n  }\n\n  gotoShopping(): void {\n    this.router.navigate(['/shopping']);\n  }\n\n  gotoReg(): void {\n    if (this.authenticated()) {\n      this.router.navigate(['/profile']);\n    } else {\n      this.router.navigate(['/reg']);\n    }\n  }\n\n  gotoHome(): void {\n    if (this.admin) {\n      this.router.navigate(['/admin']);\n    } else if (this.expert) {\n      this.router.navigate(['/expert']);\n    } else if (this.bike) {\n      this.router.navigate(['/bikeshop']);\n    } else {\n      this.router.navigate(['/']);\n    }\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { AngularFirestore } from '@angular/fire/firestore';\nimport { Observable, BehaviorSubject, combineLatest  } from 'rxjs';\nimport { switchMap } from 'rxjs/operators';\nimport { Order, Item, ORDERSTATUS } from './order';\nimport { DatePipe } from '@angular/common';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class OrderService {\n  db: AngularFirestore;\n\n  orders: Observable<Order[]>;\n  order: Observable<Order[]>;\n  clientOrders: Observable<Order[]>;\n\n  number$: BehaviorSubject<number|null>;\n  start$: BehaviorSubject<string|null>;\n  order$: BehaviorSubject<string|null>;\n  where$: BehaviorSubject<string|null>;\n  client$: BehaviorSubject<string|null>;\n  status$: BehaviorSubject<string|null>;\n\n  constructor(private datePipe: DatePipe, db: AngularFirestore) {\n    this.db = db;\n    this.number$ = new BehaviorSubject(1000);\n    this.start$ = new BehaviorSubject(null);\n    this.order$ = new BehaviorSubject('ref');\n    this.orders = combineLatest(this.number$, this.start$, this.order$).pipe(\n      switchMap(([num, start, order]) =>\n        db.collection<Order>('orders', ref => {\n        let query: firebase.firestore.CollectionReference | firebase.firestore.Query = ref;\n        query = query.where('status', '==', ORDERSTATUS.CLOSED);\n        if (num) { query = query.limit(num); }\n        if (order) { query = query.orderBy(order); if (start) { query = query.startAt(start); } }\n        return query;\n        }).valueChanges()\n    ));\n\n    this.where$ = new BehaviorSubject(null);\n    this.order = combineLatest(this.where$).pipe(\n      switchMap(([where]) =>\n        db.collection<Order>('orders', ref => {\n        let query: firebase.firestore.CollectionReference | firebase.firestore.Query = ref;\n        if (where) { query = query.where('ref', '==', where); }\n        query = query.limit(1);\n        return query;\n        }).valueChanges()\n    ));\n\n    this.client$ = new BehaviorSubject(null);\n    this.status$ = new BehaviorSubject(null);\n    this.clientOrders = combineLatest(this.client$, this.status$).pipe(\n      switchMap(([client, status]) =>\n        db.collection<Order>('orders', ref => {\n        let query: firebase.firestore.CollectionReference | firebase.firestore.Query = ref;\n        query = query.where('client', '==', client);\n        if (status) { query = query.where('status', '==', status); }\n        query = query.orderBy('ref');\n        return query;\n        }).valueChanges()\n    ));\n  }\n\n  getOrders(): Observable<Order[]> {\n    return this.orders;\n  }\n\n  setNumber(num: number|null) {\n    this.number$.next(num);\n  }\n\n  setStart(start: string|null) {\n    this.start$.next(start);\n  }\n\n  setOrder(order: string|null) {\n    this.order$.next(order);\n  }\n\n  getOrderByRef(ref: string): Observable<Order[]> {\n    this.where$.next(ref);\n    return this.order;\n  }\n\n  getClientOrders(client: string): Observable<Order[]> {\n    this.client$.next(client);\n    return this.clientOrders;\n  }\n\n  getClientCurrentOrder(client: string): Observable<Order[]> {\n    this.client$.next(client);\n    this.status$.next(ORDERSTATUS.NEW);\n    return this.clientOrders;\n  }\n\n  newOrder(client: string): Order | null {\n    const timestamp = new Date();\n    const ref = Math.floor( Math.random() * 100000000 );\n    const date = this.datePipe.transform(timestamp, 'dd-MM-yy');\n    const order: Order = {\n      ref: `${date}-${ref}`,\n      date: date,\n      status: ORDERSTATUS.NEW,\n      client: client,\n      items: [],\n      total: 0\n    };\n    this.db.collection('orders').add(order)\n      .then(() => order )\n      .catch(console.error);\n    return order;\n  }\n\n  newOrderWithItems(client: string, items: Item[]): Order | null {\n    const timestamp = new Date();\n    const ref = Math.floor( Math.random() * 100000000 );\n    const date = this.datePipe.transform(timestamp, 'dd-MM-yy');\n    const order: Order = {\n      ref: `${date}-${ref}`,\n      date: date,\n      status: ORDERSTATUS.NEW,\n      client: client,\n      items: items,\n      total: 0\n    };\n    this.db.collection('orders').add(order)\n      .then(() => order )\n      .catch(console.error);\n    return order;\n  }\n\n  updateOrder(order: Order): void {\n    this.db.collection('orders').ref.where('ref', '==', order.ref)\n      .get()\n        .then((querySnapshot) => {\n          if (querySnapshot.empty) {\n            console.error('Order not found');\n          } else {\n            const doc = querySnapshot.docs[0];\n            if (order.items && order.items.length === 0) {\n              // delete empty order\n              this.db.collection('orders').doc(doc.id).delete()\n                .catch(console.error);\n            } else {\n              this.db.collection('orders').doc(doc.id).update(order)\n                .catch(console.error);\n            }\n          }\n        });\n  }\n\n  updateOrderCB(order: Order, cb: Function): void {\n    this.db.collection('orders').ref.where('ref', '==', order.ref)\n      .get()\n        .then((querySnapshot) => {\n          if (querySnapshot.empty) {\n            console.error('Order not found');\n            cb('Order not found', null);\n          } else {\n            const doc = querySnapshot.docs[0];\n            if (order.items && order.items.length === 0) {\n              // delete empty order\n              cb('Order will be delited', null);\n              this.db.collection('orders').doc(doc.id).delete()\n                .catch(console.error);\n            } else {\n              this.db.collection('orders').doc(doc.id).update(order)\n                .then((res) => cb(null, res))\n                .catch((err) => cb(err, null));\n            }\n          }\n        });\n  }\n}\n","export const ORDERSTATUS = {\n    NEW: 'new',\n    OPEN: 'open',\n    REG: 'registered',\n    AUTH: 'authorized',\n    PAID: 'paid',\n    FAILED: 'failed',\n    CLOSED: 'closed'\n};\n\nexport class Payment {\n    id: string;\n    sector: string;\n    reference: string;\n    signature?: string;\n}\n\nexport class Item {\n    id: string;\n    code: string;\n    name: string;\n    img: string;\n    price: number;\n    priceTag: string;\n    currency: string;\n    qty: number;\n}\n\nexport class Order {\n    ref: string;\n    date: string;\n    status: string;\n    client: string;\n    items?: Item[];\n    total?: number;\n    payment?: Payment;\n}\n","module.exports = \"table {\\n    width: 100%;\\n  }\\n\\n.mat-cell .mat-icon {\\n    -webkit-transform: scale(0.6);\\n            transform: scale(0.6);\\n}\\n\\n.example-margin {\\n    margin: 0 10px;\\n  }\\n\\n.mat-progress-bar {\\n    width: 400px;\\n}\\n\\n.mat-spinner {\\n    position: absolute;\\n    top: 150px;\\n    left: 150px;\\n}\\n\"","module.exports = \"<app-header [back]=\\\"true\\\" [title]=\\\"'Order'\\\"></app-header>\\n<mat-spinner *ngIf=\\\"!order\\\"></mat-spinner>\\n<div *ngIf=\\\"order\\\">\\n  <br>\\n  <div fxLayout=\\\"row\\\" fxLayoutWrap=\\\"wrap\\\" fxLayoutAlign=\\\"start center\\\">\\n      <div fxFlex.gt-sm=\\\"2\\\" fxFlex=\\\"5\\\"></div>\\n      <div fxFlex.gt-sm=\\\"48\\\" fxFlex=\\\"45\\\" fxItemAlign=\\\"right\\\"><small>{{order.ref}}</small></div>\\n      <div fxFlex.gt-sm=\\\"10\\\" fxFlex=\\\"10\\\"></div>\\n      <div fxFlex.gt-sm=\\\"40\\\" fxFlex=\\\"40\\\" fxItemAlign=\\\"right\\\"><small>{{order.status}}</small></div>\\n  </div>\\n  <br>\\n  <table *ngIf=\\\"order.items.length>0\\\" mat-table [dataSource]=\\\"order.items | slice:start:end\\\" class=\\\"mat-elevation-z8\\\">\\n\\n      <!--- Note that these columns can be defined in any order.\\n            The actual rendered columns are set as a property on the row definition\\\" -->\\n\\n      <ng-container matColumnDef=\\\"position\\\">\\n          <th mat-header-cell *matHeaderCellDef> </th>\\n          <td mat-cell *matCellDef=\\\"let element; let i = index;\\\"> {{i+1}} </td>\\n      </ng-container>\\n    \\n      <!-- Position Column -->\\n      <ng-container matColumnDef=\\\"name\\\">\\n          <th mat-header-cell *matHeaderCellDef> Name </th>\\n          <td mat-cell (click)=\\\"gotoItem(element.id)\\\" *matCellDef=\\\"let element\\\"> {{shortName(element.name)}}</td>\\n          \\n        </ng-container>\\n\\n      <!-- Position Column -->\\n      <ng-container matColumnDef=\\\"price\\\">\\n        <th mat-header-cell *matHeaderCellDef> Price </th>\\n        <td mat-cell *matCellDef=\\\"let element\\\"> {{element.price | currency:' ':'symbol':'2.0-2'}}</td>\\n        \\n      </ng-container>\\n    \\n      <!-- Name Column -->\\n      <ng-container matColumnDef=\\\"qty\\\">\\n        <th mat-header-cell *matHeaderCellDef> Qty </th>\\n        <td mat-cell *matCellDef=\\\"let element\\\"> {{element.qty}}</td>\\n      </ng-container>\\n    \\n    \\n      <!-- Weight Column -->\\n      <ng-container matColumnDef=\\\"link\\\">\\n          <th mat-header-cell *matHeaderCellDef> </th>\\n          <td mat-cell *matCellDef=\\\"let element\\\"> <button (click)=\\\"gotoItem(element.id)\\\" mat-icon-button> <mat-icon>call_made</mat-icon></button> </td>\\n        </ng-container>\\n\\n        <!-- Weight Column -->\\n      <ng-container matColumnDef=\\\"delete\\\">\\n          <th mat-header-cell *matHeaderCellDef> </th>\\n          <td mat-cell *matCellDef=\\\"let element; let i = index;\\\"> <button (click)=\\\"deleteItem(i)\\\" mat-icon-button> <mat-icon>delete_outline</mat-icon></button> </td>\\n        </ng-container>\\n    \\n      <tr mat-header-row *matHeaderRowDef=\\\"displayedColumns\\\"></tr>\\n      <tr mat-row *matRowDef=\\\"let row; columns: displayedColumns;\\\"></tr>\\n    </table>\\n    <br>\\n    \\n<mat-paginator *ngIf=\\\"order.items.length>0\\\" [length]=\\\"order.items.length\\\"\\n              [pageSize]=\\\"10\\\"\\n              [pageSizeOptions]=\\\"[1, 5, 10, 25, 100]\\\"\\n              (page)=\\\"setPage($event)\\\">\\n</mat-paginator>\\n</div>\\n<button *ngIf=\\\"order\\\" mat-raised-button color=\\\"primary\\\" [disabled]=\\\"process\\\" (click)=\\\"checkOrder()\\\">Payment status</button>\\n\\n<div *ngIf=\\\"paymentStatus\\\" fxLayout=\\\"column\\\">\\n    <div fxLayout=\\\"row\\\">\\n      <br>\\n    </div>\\n    <div *ngIf=\\\"paymentStatus.id\\\" fxLayout=\\\"row\\\">\\n        <div fxFlex=\\\"2\\\"></div>\\n        <div fxFlex=\\\"20\\\">ID</div>\\n        <div fxFlex=\\\"20\\\"></div>\\n        <div fxFlex=\\\"58\\\">{{paymentStatus.id}}</div>\\n    </div>\\n\\n    <div *ngIf=\\\"paymentStatus.state\\\" fxLayout=\\\"row\\\">\\n        <div fxFlex=\\\"2\\\"></div>\\n        <div fxFlex=\\\"20\\\">State</div>\\n        <div fxFlex=\\\"20\\\"></div>\\n        <div fxFlex=\\\"58\\\">{{paymentStatus.state}}</div>\\n    </div>\\n\\n    <div *ngIf=\\\"paymentStatus.inprogress\\\" fxLayout=\\\"row\\\">\\n        <div fxFlex=\\\"2\\\"></div>\\n        <div fxFlex=\\\"20\\\">Inprogress</div>\\n        <div fxFlex=\\\"20\\\"></div>\\n        <div fxFlex=\\\"58\\\">{{paymentStatus.inprogress}}</div>\\n    </div>\\n\\n    <div *ngIf=\\\"paymentStatus.date\\\" fxLayout=\\\"row\\\">\\n        <div fxFlex=\\\"2\\\"></div>\\n        <div fxFlex=\\\"20\\\">Date</div>\\n        <div fxFlex=\\\"20\\\"></div>\\n        <div fxFlex=\\\"58\\\">{{paymentStatus.date}}</div>\\n    </div>\\n\\n    <div *ngIf=\\\"paymentStatus.amount\\\" fxLayout=\\\"row\\\">\\n        <div fxFlex=\\\"2\\\"></div>\\n        <div fxFlex=\\\"20\\\">Amount</div>\\n        <div fxFlex=\\\"20\\\"></div>\\n        <div fxFlex=\\\"58\\\">{{paymentStatus.amount}}</div>\\n    </div>\\n\\n    <div *ngIf=\\\"paymentStatus.currency\\\" fxLayout=\\\"row\\\">\\n        <div fxFlex=\\\"2\\\"></div>\\n        <div fxFlex=\\\"20\\\">Currency</div>\\n        <div fxFlex=\\\"20\\\"></div>\\n        <div fxFlex=\\\"58\\\">{{paymentStatus.currency}}</div>\\n    </div>\\n\\n    <div *ngIf=\\\"paymentStatus.email\\\" fxLayout=\\\"row\\\">\\n        <div fxFlex=\\\"2\\\"></div>\\n        <div fxFlex=\\\"20\\\">EMail</div>\\n        <div fxFlex=\\\"20\\\"></div>\\n        <div fxFlex=\\\"58\\\">{{paymentStatus.email}}</div>\\n    </div>\\n\\n    <div *ngIf=\\\"paymentStatus.reference\\\" fxLayout=\\\"row\\\">\\n        <div fxFlex=\\\"2\\\"></div>\\n        <div fxFlex=\\\"20\\\">Reference</div>\\n        <div fxFlex=\\\"20\\\"></div>\\n        <div fxFlex=\\\"58\\\">{{paymentStatus.reference}}</div>\\n    </div>\\n\\n    <div *ngIf=\\\"paymentStatus.description\\\" fxLayout=\\\"row\\\">\\n        <div fxFlex=\\\"2\\\"></div>\\n        <div fxFlex=\\\"20\\\">Description</div>\\n        <div fxFlex=\\\"20\\\"></div>\\n        <div fxFlex=\\\"58\\\">{{paymentStatus.description}}</div>\\n    </div>\\n    \\n</div>\\n\"","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { AuthService } from '../auth.service';\nimport { OrderService } from '../order.service';\nimport { Order, Item, Payment, ORDERSTATUS } from '../order';\nimport { PageEvent } from '@angular/material';\nimport { HttpClient } from '@angular/common/http';\nimport { Subscription } from 'rxjs';\nimport { TagService } from '../tag.service';\n\n@Component({\n  selector: 'app-order',\n  templateUrl: './order.component.html',\n  styleUrls: ['./order.component.css']\n})\nexport class OrderComponent implements OnInit {\n  start: number;\n  end: number;\n\n  ref: string;\n  order: Order;\n  process: boolean;\n  operations: any;\n\n  paymentStatus: any;\n\n  displayedColumns: string[] = ['position', 'name', 'price', 'qty' ];\n\n  constructor(\n    private authService: AuthService,\n    private router: Router,\n    private orderService: OrderService,\n    private http: HttpClient,\n    private route: ActivatedRoute,\n    private tagService: TagService\n    ) { }\n\n  ngOnInit() {\n    this.start = 0;\n    this.end = 10;\n    this.ref = this.route.snapshot.paramMap.get('ref');\n    this.process = false;\n    this.paymentStatus = undefined;\n    this.orderService.getOrderByRef(this.ref).subscribe((res) => {\n      if (res.length > 0) {\n        this.order = res[0];\n        console.log('Loading order');\n        console.log(this.order);\n      } else {\n        console.error(`Order ${this.ref} is not found`);\n      }\n    });\n  }\n\n  shortName(name: string): string {\n    if (name.length <= 20) {\n      return `${name}`;\n    } else {\n      return `${name.slice(0, 17)}...`;\n    }\n  }\n\n  gotoItem(id: string): void {\n    if (this.order) {\n      this.router.navigate([`/item/${id}/${this.order.ref}/locked`]);\n    }\n  }\n\n  checkOrder(): void {\n    if (!this.order) {\n      return;\n    } else if (!this.order.payment) {\n      return;\n    }\n    this.process = true;\n    const payment = this.order.payment;\n\n    const url = `https://us-central1-cloud-firestore-test-d95bf.cloudfunctions.net/order`;\n    const data = {\n      sector: payment.sector,\n      id: payment.id,\n      reference: payment.reference\n    };\n    this.http.post(url, data, { responseType: 'text' }).subscribe((res: string) => {\n      this.process = false;\n\n      const parser = new DOMParser();\n      const doc = parser.parseFromString(res, 'application/xml');\n      console.log(doc);\n      if (doc.getElementsByTagName('order').length > 0) {\n        this.operations = doc.getElementsByTagName('order').item(0);\n        if (this.operations.getElementsByTagName('id').length > 0) {\n          this.paymentStatus = { id: this.operations.getElementsByTagName('id').item(0).innerHTML };\n        }\n        if (this.operations.getElementsByTagName('state').length > 0) {\n          this.paymentStatus.state = this.operations.getElementsByTagName('state').item(0).innerHTML;\n        }\n        if (this.operations.getElementsByTagName('inprogress').length > 0) {\n          this.paymentStatus.inprogress = this.operations.getElementsByTagName('inprogress').item(0).innerHTML;\n        }\n        if (this.operations.getElementsByTagName('date').length > 0) {\n          this.paymentStatus.date = this.operations.getElementsByTagName('date').item(0).innerHTML;\n        }\n        if (this.operations.getElementsByTagName('amount').length > 0) {\n          this.paymentStatus.amount = this.operations.getElementsByTagName('amount').item(0).innerHTML;\n        }\n        if (this.operations.getElementsByTagName('currency').length > 0) {\n          this.paymentStatus.currency = this.operations.getElementsByTagName('currency').item(0).innerHTML;\n        }\n        if (this.operations.getElementsByTagName('email').length > 0) {\n          this.paymentStatus.email = this.operations.getElementsByTagName('email').item(0).innerHTML;\n        }\n        if (this.operations.getElementsByTagName('reference').length > 0) {\n          this.paymentStatus.reference = this.operations.getElementsByTagName('reference').item(0).innerHTML;\n        }\n        if (this.operations.getElementsByTagName('description').length > 0) {\n          this.paymentStatus.description = this.operations.getElementsByTagName('description').item(0).innerHTML;\n        }\n      }\n    });\n  }\n\n  setPage(e: PageEvent): void {\n    console.log(e);\n    const { pageIndex, pageSize } = e;\n    this.start = pageIndex * pageSize;\n    this.end = this.start + pageSize;\n  }\n}\n","export class RideParameters {\n    mintime: number = 1000 * 6;\n    maxtime: number = 1000 * 60 * 60 * 3;\n}\n\nexport class Parameters {\n    ride: RideParameters;\n}\n","module.exports = \"input[type=\\\"file\\\"] {\\n    display: none;\\n}\\n.custom-file-upload {\\n        border: 1px solid #ccc;\\n        display: inline-block;\\n        padding: 6px 12px;\\n        cursor: pointer;\\n}\\n.mat-progress-bar {\\n    width: 50px;\\n}\"","module.exports = \"<app-header [title]=\\\"'Update'\\\"></app-header>\\n<mat-grid-list cols=\\\"3\\\" rowHeight=\\\"3em\\\">\\n    <mat-grid-tile [colspan]=\\\"3\\\">\\n    </mat-grid-tile>\\n\\n    <mat-grid-tile [colspan]=\\\"3\\\">\\n        <label for=\\\"file-upload\\\">\\n            <img ngxGravatar size=\\\"44\\\" [fallback]=\\\"'monsterid'\\\" [md5Hash]=\\\"hash\\\" [src]=\\\"avatarURL()\\\">\\n          <input id=\\\"file-upload\\\" type=\\\"file\\\" (change)=\\\"handleFileInput($event.target.files)\\\"/>\\n        </label>\\n    </mat-grid-tile>\\n\\n    <mat-grid-tile>\\n    </mat-grid-tile>\\n\\n    <mat-grid-tile>\\n      <mat-progress-bar *ngIf=\\\"avatar\\\" mode=\\\"determinate\\\" value=\\\"uploadPercent | async\\\"></mat-progress-bar>\\n    </mat-grid-tile>\\n\\n    <mat-grid-tile>\\n        <mat-icon *ngIf=\\\"updates.avatar\\\">check_circle_outline</mat-icon>\\n    </mat-grid-tile>\\n    \\n</mat-grid-list>\\n\\n<form class=\\\"example-form\\\">\\n\\n  <mat-grid-list cols=\\\"3\\\" rowHeight=\\\"3em\\\">\\n\\n    <mat-grid-tile [rowspan]=\\\"2\\\" [colspan]=\\\"2\\\">\\n      <mat-form-field>\\n        <input matInput name=\\\"username\\\" type=\\\"text\\\" placeholder=\\\"Enter name\\\" required [(ngModel)]=\\\"username\\\">\\n        <mat-hint align=\\\"start\\\">Example: <strong>John Smith</strong> </mat-hint>\\n      </mat-form-field>\\n    </mat-grid-tile>\\n\\n    <mat-grid-tile [rowspan]=\\\"2\\\">\\n      <mat-icon *ngIf=\\\"updates.username\\\">check_circle_outline</mat-icon>\\n    </mat-grid-tile>\\n\\n    <mat-grid-tile [rowspan]=\\\"2\\\" [colspan]=\\\"2\\\">\\n      <mat-form-field>\\n        <input matInput name=\\\"email\\\" type=\\\"text\\\" placeholder=\\\"Enter email\\\" [(ngModel)]=\\\"email\\\">\\n        <mat-hint align=\\\"start\\\">Example: <strong>smith.john@gmail.com</strong> </mat-hint>\\n      </mat-form-field>\\n    </mat-grid-tile>\\n\\n    <mat-grid-tile [rowspan]=\\\"2\\\">\\n      <mat-icon *ngIf=\\\"updates.email\\\">check_circle_outline</mat-icon>\\n    </mat-grid-tile>\\n\\n    <mat-grid-tile [rowspan]=\\\"2\\\" [colspan]=\\\"2\\\">\\n        <mat-form-field>\\n          <input matInput name=\\\"nikname\\\" type=\\\"text\\\" placeholder=\\\"Enter nikname\\\" [(ngModel)]=\\\"nikname\\\">\\n          <mat-hint align=\\\"start\\\">Example: <strong>Colnago Rider</strong> </mat-hint>\\n        </mat-form-field>\\n      </mat-grid-tile>\\n  \\n      <mat-grid-tile [rowspan]=\\\"2\\\">\\n        <mat-icon *ngIf=\\\"updates.nikname\\\">check_circle_outline</mat-icon>\\n      </mat-grid-tile>\\n\\n      <mat-grid-tile  [colspan]=\\\"2\\\">\\n              <mat-slide-toggle\\n              name=\\\"wallet\\\"\\n              [(ngModel)]=\\\"checked\\\"\\n              [checked]=\\\"checked\\\"\\n              [disabled]=\\\"disabled\\\">\\n            Generate a new wallet\\n          </mat-slide-toggle>\\n        </mat-grid-tile>\\n    \\n        <mat-grid-tile>\\n          <mat-icon *ngIf=\\\"updates.wallet\\\">check_circle_outline</mat-icon>\\n        </mat-grid-tile>\\n\\n    <mat-grid-tile [rowspan]=\\\"2\\\" [colspan]=\\\"3\\\">\\n      {{msg}}\\n    </mat-grid-tile>\\n\\n    <mat-grid-tile>\\n        <button mat-raised-button color=\\\"primary\\\" [disabled]=\\\"!username || progress\\\" (click)=\\\"update($event)\\\">Update</button>\\n    </mat-grid-tile>\\n\\n    <mat-grid-tile>\\n\\n    </mat-grid-tile>\\n\\n    <mat-grid-tile>\\n        <button mat-raised-button color=\\\"warn\\\" [disabled]=\\\"progress\\\" (click)=\\\"cancel()\\\">Cancel</button>\\n    </mat-grid-tile>\\n  \\n    <mat-grid-tile [colspan]=\\\"3\\\">\\n    </mat-grid-tile>\\n\\n  </mat-grid-list>\\n</form>\\n\"","import { Component, OnInit, AfterViewInit, NgZone } from '@angular/core';\nimport { AngularFireStorage, AngularFireUploadTask } from '@angular/fire/storage';\nimport { Router, ActivatedRoute, ParamMap } from '@angular/router';\nimport { TagService } from '../tag.service';\nimport { AuthService } from '../auth.service';\nimport { RiderService } from '../rider.service';\nimport { Rider, Bike} from '../rider';\nimport { ImagesService } from '../images.service';\nimport { Observable, Subscription } from 'rxjs';\nimport { Observer } from 'firebase';\nimport { finalize } from 'rxjs/operators';\nimport { Wallet } from '../wallet';\nimport { EthcontractService } from '../ethereum/ethcontract.service';\n\n@Component({\n  selector: 'app-profile-update',\n  templateUrl: './profile-update.component.html',\n  styleUrls: ['./profile-update.component.css']\n})\nexport class ProfileUpdateComponent implements OnInit {\n  rider: Rider;\n  mobile: string;\n  username: string;\n  nikname: string;\n  avatar: string;\n  email: string;\n  msg: string;\n  progress: boolean;\n  hash: string;\n  uploadPercent: Observable<number>;\n  downloadURL: Observable<string>;\n  percentage: number;\n  wallet: Wallet;\n  checked: boolean;\n  disabled: boolean;\n  updates: {\n    username: boolean,\n    email: boolean,\n    nikname: boolean,\n    rider: boolean,\n    newrider: boolean,\n    avatar: boolean,\n    wallet: boolean\n  };\n\n\n  constructor(\n    private zone: NgZone,\n    private tagService: TagService,\n    private authService: AuthService,\n    private route: ActivatedRoute,\n    private router: Router,\n    private riderService: RiderService,\n    private imagesService: ImagesService,\n    private storage: AngularFireStorage,\n    private contractService: EthcontractService\n    ) { }\n\n  ngOnInit() {\n    this.clear();\n    this.riderService.getRiderByMobile(this.authService.getUserPhone())\n      .subscribe(riders => {\n        if (riders) {\n          if (riders.length > 0) {\n            this.rider = riders[0];\n            this.nikname = this.rider.nikname;\n            this.hash = this.rider.id;\n            if (this.rider.wallet) {\n              this.disabled = true;\n              this.wallet = this.rider.wallet;\n            } else {\n              this.wallet.id = this.hash;\n            }\n          }\n        }\n       });\n      this.contractService.getMnemonic().subscribe((mnemonic) => {\n        this.wallet.mnemonic = mnemonic;\n        console.log(`get mnemonic: ${this.wallet.mnemonic}`);\n        this.contractService.getAccounts().subscribe((accounts) => {\n          this.wallet.accounts = accounts;\n          console.log(`get accounts`);\n          console.log(this.wallet.accounts);\n        });\n      });\n  }\n\n  avatarURL(): string |null {\n    if (this.avatar) {\n      return this.avatar;\n    }\n    if (this.rider) {\n      return this.rider.avatar;\n    }\n  }\n\n  clear() {\n    this.mobile = this.authService.getUserPhone();\n    this.username = this.authService.getUserName();\n    this.email = this.authService.getUserEmail();\n    this.progress = false;\n    this.msg = null;\n    this.avatar = null;\n    this.percentage = 0;\n    this.checked = false;\n    this.disabled = false;\n    this.wallet = { id: null, accounts: [], mnemonic: null};\n    this.updates = {username: false, email: false, nikname: false, rider: false, newrider: false, avatar: false, wallet: false};\n  }\n\n  update(e: Event) {\n    this.progress = true;\n    e.preventDefault();\n    e.stopPropagation();\n    if (this.username) {\n      this.authService.updateProfileCB(this.username, null, (err) => {\n        if (err) {\n          this.msg = err;\n          this.progress = false;\n          this.updates.username = false;\n          console.log(`ProfileUpdateComponent: update: ${err}`);\n        } else {\n          this.progress = false;\n          this.updates.username = true;\n          this.msg = 'Profile is updated';\n        }\n      });\n    }\n    if (this.email) {\n      this.authService.updateEmailCB(this.email, (err) => {\n        if (err) {\n          this.msg = err;\n          this.progress = false;\n          this.updates.email = false;\n          console.log(`ProfileUpdateComponent: update: ${err}`);\n        } else {\n          this.progress = false;\n          this.updates.email = true;\n          this.msg = 'Profile is updated';\n        }\n      });\n    }\n    if (this.nikname) {\n      if (this.rider) {\n        this.rider.nikname = this.nikname;\n        this.updates.rider = true;\n      } else {\n        this.rider = { id: this.authService.getUID(), mobile: this.mobile, nikname: this.nikname };\n        this.updates.rider = true;\n        this.updates.newrider = true;\n      }\n    }\n    if (this.avatar) {\n      if (this.rider) {\n        this.rider.avatar = this.avatar;\n        this.updates.avatar = true;\n      } else {\n        this.rider = { id: this.authService.getUID(), mobile: this.mobile, nikname: this.nikname, avatar: this.avatar };\n        this.updates.rider = true;\n        this.updates.newrider = true;\n      }\n    }\n    console.log('Check this out!!');\n    if (this.checked && !this.rider.wallet) {\n      console.log(`generate wallet`);\n      console.log(this.wallet);\n      // generate new wallet\n      if (this.rider) {\n        this.rider.wallet = this.wallet;\n        this.updates.wallet = true;\n      } else {\n        // tslint:disable-next-line:max-line-length\n        this.rider = { id: this.authService.getUID(), mobile: this.mobile, nikname: this.nikname, avatar: this.avatar, wallet: this.wallet };\n        this.updates.rider = true;\n        this.updates.newrider = true;\n      }\n    }\n    if (this.updates.rider) {\n      if (this.updates.newrider) {\n        this.riderService.addNewRiderCB(this.rider, (err, ref) => {\n          if (err) {\n            this.msg = err;\n            this.progress = false;\n          } else {\n            this.progress = false;\n            this.updates.rider = true;\n            this.updates.newrider = false;\n            if (this.nikname) {\n              this.updates.nikname = true;\n            }\n            if (this.avatar) {\n              this.updates.avatar = true;\n            }\n            if (this.checked) {\n              this.updates.wallet = true;\n            }\n            this.msg = 'Profile is updated';\n          }\n        });\n      } else {\n        this.riderService.updateRiderByIdCB(this.rider, (err, ref) => {\n          if (err) {\n            this.msg = err;\n            this.progress = false;\n          } else {\n            this.progress = false;\n            this.updates.rider = true;\n            this.updates.newrider = false;\n            if (this.nikname) {\n              this.updates.nikname = true;\n            }\n            if (this.avatar) {\n              this.updates.avatar = true;\n            }\n            if (this.checked) {\n              this.updates.wallet = true;\n            }\n            this.msg = 'Profile is updated';\n          }\n        });\n      }\n    }\n  }\n  cancel() {\n    this.router.navigate([`/profile`]);\n  }\n\n  handleFileInput(files: FileList): void {\n    const file = files[0];\n    const filePath = `${this.authService.getUID()}/images/${file.name}`;\n    const fileRef = this.storage.ref(filePath);\n    const task = this.storage.upload(filePath, file);\n\n    // observe percentage changes\n    this.uploadPercent = task.percentageChanges();\n    // get notified when the download URL is available\n    task.snapshotChanges()\n      .pipe(finalize(() => {\n        this.downloadURL = fileRef.getDownloadURL();\n        this.downloadURL.subscribe(url => this.avatar = url);\n      }))\n      .subscribe();\n  }\n}\n","module.exports = \"\"","module.exports = \"<div mat-dialog-content>\\n    <ngx-kjua\\n    [text]=\\\"qrcode\\\"\\n  ></ngx-kjua>\\n</div>\\n<div mat-dialog-actions>\\n  <button mat-button [mat-dialog-close]=\\\"data.result\\\" cdkFocusInitial>Ok</button>\\n</div>\"","import { Component, OnInit, Inject } from '@angular/core';\nimport { MatDialog, MatDialogRef, MAT_DIALOG_DATA } from '@angular/material';\n\nexport interface DialogData {\n  account: string;\n  result: string;\n}\n\n@Component({\n  selector: 'app-qrcode-dialog',\n  templateUrl: './qrcode-dialog.component.html',\n  styleUrls: ['./qrcode-dialog.component.css']\n})\nexport class QrcodeDialogComponent implements OnInit {\n  qrcode: string;\n\n  constructor(\n    public dialogRef: MatDialogRef<QrcodeDialogComponent>,\n    @Inject(MAT_DIALOG_DATA) public data: DialogData) {\n      this.data.result = 'OK';\n      this.qrcode = `ethereum:${this.data.account}`;\n    }\n\n  ngOnInit() {\n  }\n\n  onNoClick(): void {\n    this.dialogRef.close();\n  }\n\n}\n","module.exports = \"\"","module.exports = \"<app-header [title]=\\\"'Rider'\\\" [back]=\\\"true\\\"></app-header>\\n\\n<mat-grid-list *ngIf=\\\"ride; else loading;\\\"cols=\\\"3\\\" rowHeight=\\\"3em\\\">\\n    <mat-grid-tile *ngIf=\\\"ride.rider\\\" [colspan]=\\\"3\\\"></mat-grid-tile>\\n\\n    <mat-grid-tile *ngIf=\\\"ride.rider\\\"></mat-grid-tile>\\n\\n    <mat-grid-tile *ngIf=\\\"ride.rider\\\"><img *ngIf=\\\"ride.rider && ride.rider.avatar\\\" ngxGravatar size=\\\"46\\\" [fallback]=\\\"'monsterid'\\\" [src]=\\\"ride.rider.avatar\\\"></mat-grid-tile>\\n\\n    <mat-grid-tile *ngIf=\\\"ride.rider\\\"></mat-grid-tile>\\n\\n    <mat-grid-tile *ngIf=\\\"ride.rider\\\"></mat-grid-tile>\\n\\n    <mat-grid-tile *ngIf=\\\"ride.rider\\\"><strong>{{ride.rider?ride.rider.nikname:\\\"\\\"}}</strong></mat-grid-tile>\\n\\n    <mat-grid-tile *ngIf=\\\"ride.rider\\\"></mat-grid-tile>\\n\\n    <mat-grid-tile>Date:</mat-grid-tile>\\n\\n    <mat-grid-tile>{{ride.start|date:\\\"dd-MM-yyyy\\\"}}</mat-grid-tile>\\n\\n    <mat-grid-tile></mat-grid-tile>\\n\\n    <mat-grid-tile>Start:</mat-grid-tile>\\n\\n    <mat-grid-tile>{{ride.start|date:\\\"HH:mm:ss\\\"}}</mat-grid-tile>\\n\\n    <mat-grid-tile></mat-grid-tile>\\n\\n    <mat-grid-tile>Finish:</mat-grid-tile>\\n\\n    <mat-grid-tile>{{ride.finish|date:\\\"HH:mm:ss\\\"}}</mat-grid-tile>\\n\\n    <mat-grid-tile></mat-grid-tile>\\n    \\n    <mat-grid-tile>Time:</mat-grid-tile>\\n\\n    <mat-grid-tile>{{(ride.finish-ride.start)|date:\\\"HH:mm:ss\\\":\\\"+00\\\"}}</mat-grid-tile>\\n\\n    <mat-grid-tile></mat-grid-tile>\\n\\n\\n    <mat-grid-tile [colspan]=\\\"3\\\">\\n        <button mat-stroked-button (click)=\\\"gotoTagById(ride.tagid)\\\">{{ride.tagid}}</button>\\n    </mat-grid-tile>\\n\\n    <mat-grid-tile *ngIf=\\\"uid === id\\\" [colspan]=\\\"3\\\">\\n        <button mat-raised-button [disabled]=\\\"progress || !(uid === id)\\\" (click)=\\\"updateRiderInfo()\\\" color=\\\"primary\\\">Update Rider Info</button>\\n    </mat-grid-tile>\\n\\n\\n</mat-grid-list>\\n\"","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { Location } from '@angular/common';\nimport { TagService } from '../tag.service';\nimport { Tag, Registration } from '../tag';\nimport { Ride } from '../ride';\nimport { Rider, Bike } from '../rider';\nimport { RideService } from '../ride.service';\nimport { RiderService } from '../rider.service';\nimport { AuthService } from '../auth.service';\nimport { Observable } from 'rxjs';\n\n@Component({\n  selector: 'app-ride-detail',\n  templateUrl: './ride-detail.component.html',\n  styleUrls: ['./ride-detail.component.css']\n})\nexport class RideDetailComponent implements OnInit {\n\n  ride: Ride;\n  riders: Observable<Rider[]>;\n  uid: string;\n  progress: boolean;\n  rider: Rider;\n  id: string;\n\n  constructor(\n    private tagService: TagService,\n    private route: ActivatedRoute,\n    private location: Location,\n    private router: Router,\n    private rideService: RideService,\n    private riderService: RiderService,\n    private authService: AuthService\n    ) {}\n\n  ngOnInit() {\n    this.progress = false;\n    const id = this.route.snapshot.paramMap.get('id');\n    this.rideService.getRideByIdCB(+id, (err, ride) => {\n      if (err) {\n        console.error(`RideDetailComponent: ngOnInit: ride not found ${id}`);\n      } else {\n        this.ride = ride;\n        this.id = ride.rider.id;\n        console.log(this.ride);\n      }\n    });\n    this.authService.getUser().subscribe((user) => {\n      this.uid = user.uid;\n      console.log(this.uid);\n      this.riders = this.riderService.getRiderById(this.uid);\n    });\n  }\n\n  gotoBack(): void {\n    this.location.back();\n  }\n\n  updateRiderInfo() {\n    this.progress = true;\n    this.riders.subscribe((riders) => {\n      if (riders && riders.length > 0) {\n        this.ride.rider = riders[0];\n        this.rideService.updateRideByIdCB(this.ride, (err, ref) => {\n          if (err) {\n            this.progress = false;\n            console.log(`RideDetailComponent: updateRiderInfo: ${err}`);\n          } else {\n            console.log(`RideDetailComponent: updateRiderInfo: rider info updated ${ref}`);\n          }\n        });\n      } else {\n        this.progress = false;\n      }\n    });\n  }\n\n  gotoTagById(id: string): void {\n    this.router.navigate([`/tag/${id}`]);\n  }\n\n}\n","import { Injectable } from '@angular/core';\nimport { AngularFirestore, AngularFirestoreCollection, QuerySnapshot, CollectionReference } from '@angular/fire/firestore';\nimport { Observable, BehaviorSubject, combineLatest  } from 'rxjs';\nimport { switchMap } from 'rxjs/operators';\nimport { Rider, Bike } from './rider';\nimport { Ride } from './ride';\nimport { DatePipe } from '@angular/common';\nimport { CdkAccordion } from '@angular/cdk/accordion';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class RideService {\n  db: AngularFirestore;\n  rides: Observable<Ride[]>;\n  ride: Observable<Ride[]>;\n  tagRides: Observable<Ride[]>;\n  number$: BehaviorSubject<number|null>;\n  start$: BehaviorSubject<string|null>;\n  order$: BehaviorSubject<string|null>;\n  where$: BehaviorSubject<string|null>;\n  tagid$: BehaviorSubject<string|null>;\n\n  constructor(private datePipe: DatePipe, db: AngularFirestore) {\n    this.db = db;\n    this.number$ = new BehaviorSubject(1000);\n    this.start$ = new BehaviorSubject(null);\n    this.order$ = new BehaviorSubject('time');\n    this.rides = combineLatest(this.number$, this.start$, this.order$).pipe(\n      switchMap(([num, start, order]) =>\n        db.collection<Ride>('rides', ref => {\n        let query: firebase.firestore.CollectionReference | firebase.firestore.Query = ref;\n        query = query.where('time', '>', 0);\n        if (num) { query = query.limit(num); }\n        if (order) { query = query.orderBy(order); if (start) { query = query.startAt(start); } }\n        return query;\n        }).valueChanges()\n    ));\n\n    this.where$ = new BehaviorSubject(null);\n    this.ride = combineLatest(this.where$).pipe(\n      switchMap(([where]) =>\n        db.collection<Ride>('rides', ref => {\n        let query: firebase.firestore.CollectionReference | firebase.firestore.Query = ref;\n        if (where) { query = query.where('tagid', '==', where); }\n        query = query.where('open', '==', true);\n        query = query.limit(1);\n        return query;\n        }).valueChanges()\n    ));\n\n    this.tagid$ = new BehaviorSubject(null);\n    this.tagRides = combineLatest(this.tagid$).pipe(\n      switchMap(([tagid]) =>\n        db.collection<Ride>('rides', ref => {\n        let query: firebase.firestore.CollectionReference | firebase.firestore.Query = ref;\n        query = query.where('tagid', '==', tagid);\n        query = query.orderBy('start');\n        return query;\n        }).valueChanges()\n    ));\n  }\n\n  getRides(): Observable<Ride[]> {\n    return this.rides;\n  }\n\n  setNumber(num: number|null) {\n    this.number$.next(num);\n  }\n\n  setStart(start: string|null) {\n    this.start$.next(start);\n  }\n\n  setOrder(order: string|null) {\n    this.order$.next(order);\n  }\n\n  getRideByTagId(tagid: string): Observable<Ride[]> {\n    this.where$.next(tagid);\n    return this.ride;\n  }\n\n  getRideByTagIdCB(tagid: string, cb: Function): void {\n    this.db.collection('rides').ref.where('tagid', '==', tagid)\n      .get()\n        .then(function(querySnapshot) {\n          if (querySnapshot.empty) {\n            cb(null);\n          } else {\n            cb(querySnapshot.docs[0]);\n          }\n        });\n  }\n\n  getRidesByTagId(tagid: string): Observable<Ride[]> {\n    this.tagid$.next(tagid);\n    return this.tagRides;\n  }\n\n  getRidesByTagIdCB(tagid: string, cb: Function): void {\n    this.db.collection('rides').ref.where('tagid', '==', tagid)\n      .get()\n        .then(function(querySnapshot) {\n          if (querySnapshot.empty) {\n            cb(null);\n          } else {\n            cb(querySnapshot.docs);\n          }\n        });\n  }\n\n  addNewRideCB(ride: Ride, cb: Function): void {\n    this.db.collection('rides').add(ride)\n      .then((ref) => cb(null, ref))\n      .catch((err) => cb(err, null));\n  }\n\n  updateRideByRefCB(ref: string, ride: Ride, cb: Function): void {\n    this.db.collection('rides').doc(ref).update(ride)\n      .then(() => cb(null))\n      .catch(err => cb(err));\n  }\n\n  updateRideByIdCB(ride: Ride, cb: Function): void {\n    this.db.collection('rides').ref.where('id', '==', ride.id)\n      .get()\n        .then((querySnapshot) => {\n          if (querySnapshot.empty) {\n            cb('not fount', null);\n          } else {\n            const doc = querySnapshot.docs[0];\n            this.db.collection('rides').doc(doc.id).update(ride)\n              .then(() => cb(null, doc.ref))\n              .catch((err) => cb(err, null));\n          }\n        });\n  }\n\n  getRideByIdCB(id: number, cb: Function): void {\n    this.db.collection('rides').ref.where('id', '==', id)\n      .get()\n        .then((querySnapshot) => {\n          if (querySnapshot.empty) {\n            cb('not fount', null);\n          } else {\n            const doc = querySnapshot.docs[0];\n            cb(null, doc.data());\n          }\n        });\n  }\n\n}\n","module.exports = \"table {\\n    width: 100%;\\n  }\\n\\n  .mat-cell .mat-icon {\\n    -webkit-transform: scale(0.6);\\n            transform: scale(0.6);\\n}\"","module.exports = \"<app-header [title]=\\\"'Ride'\\\" [back]=\\\"true\\\" [subtitle]=\\\"nikname\\\"></app-header>\\n\\n\\n<mat-accordion>\\n      <mat-expansion-panel (opened)=\\\"getTags()\\\">\\n        <mat-expansion-panel-header>\\n          <mat-panel-title>\\n            Tags\\n          </mat-panel-title>\\n          <mat-panel-description>\\n            Select tag to start a ride\\n          </mat-panel-description>\\n        </mat-expansion-panel-header>\\n    \\n        <span *ngFor=\\\"let tag of tags\\\">\\n            <button mat-stroked-button [disabled]=\\\"tagid === tag.id\\\" (click)=\\\"select(tag.id)\\\">{{tag.id}}</button>&nbsp;\\n        </span>\\n    \\n      </mat-expansion-panel>\\n  </mat-accordion>\\n\\n  <mat-grid-list *ngIf=\\\"ride; else loading\\\" cols=\\\"3\\\" rowHeight=\\\"3em\\\">\\n    <mat-grid-tile [colspan]=\\\"3\\\">\\n      <h3>Current Ride</h3>\\n    </mat-grid-tile>\\n  \\n    <mat-grid-tile>\\n      {{ride.start|date:\\\"dd-MM-yyyy\\\"}}\\n    </mat-grid-tile>\\n  \\n    <mat-grid-tile>\\n      {{ride.start|date:\\\"HH:mm:ss\\\"}}\\n    </mat-grid-tile>\\n  \\n    <mat-grid-tile *ngIf=\\\"!ride.finish\\\">\\n      {{timestemp|date:\\\"HH:mm:ss\\\":\\\"+00\\\"}}\\n    </mat-grid-tile>\\n\\n    <mat-grid-tile *ngIf=\\\"ride.finish\\\">\\n        {{(ride.finish-ride.start)|date:\\\"HH:mm:ss\\\":\\\"+00\\\"}}\\n      </mat-grid-tile>\\n  </mat-grid-list>\\n\\n  <mat-grid-list  *ngIf=\\\"rides; else loading\\\" cols=\\\"3\\\" rowHeight=\\\"3em\\\">\\n      \\n      <mat-grid-tile  [rowspan] = \\\"2\\\" [colspan]=\\\"3\\\">\\n        <button *ngIf=\\\"!ride\\\" mat-stroked-button mat-raised-button color=\\\"primary\\\" [disabled]=\\\"progress\\\" (click)=\\\"startRide($event)\\\">Start</button>\\n        <button *ngIf=\\\"ride\\\" mat-stroked-button mat-raised-button color=\\\"warn\\\" [disabled]=\\\"progress || !ride.open\\\" (click)=\\\"finishRide($event)\\\">End</button>\\n      </mat-grid-tile>\\n  </mat-grid-list>\\n  \\n  <div *ngIf=\\\"rides\\\">\\n      <table *ngIf=\\\"rides.length>0\\\" mat-table [dataSource]=\\\"rides | slice:start:end\\\" class=\\\"mat-elevation-z8\\\">\\n\\n          <!--- Note that these columns can be defined in any order.\\n                The actual rendered columns are set as a property on the row definition\\\" -->\\n        \\n          <!-- Position Column -->\\n          <ng-container matColumnDef=\\\"date\\\">\\n              <th mat-header-cell *matHeaderCellDef> Date </th>\\n              <td mat-cell *matCellDef=\\\"let element\\\"> {{element.start|date:\\\"dd-MM-yyyy\\\"}}</td>\\n            </ng-container>\\n\\n          <!-- Position Column -->\\n          <ng-container matColumnDef=\\\"start\\\">\\n            <th mat-header-cell *matHeaderCellDef> Start </th>\\n            <td mat-cell *matCellDef=\\\"let element\\\"> {{element.start|date:\\\"HH:mm:ss\\\"}}</td>\\n          </ng-container>\\n        \\n          <!-- Name Column -->\\n          <ng-container matColumnDef=\\\"finish\\\">\\n            <th mat-header-cell *matHeaderCellDef> Finish </th>\\n            <td mat-cell *matCellDef=\\\"let element\\\"> {{element.finish|date:\\\"HH:mm:ss\\\"}}</td>\\n          </ng-container>\\n        \\n          <!-- Weight Column -->\\n          <ng-container matColumnDef=\\\"time\\\">\\n            <th mat-header-cell *matHeaderCellDef> Time </th>\\n            <td mat-cell *matCellDef=\\\"let element\\\"> {{(element.finish-element.start)|date:\\\"HH:mm:ss\\\":\\\"+00\\\"}} </td>\\n          </ng-container>\\n        \\n          <!-- Weight Column -->\\n          <ng-container matColumnDef=\\\"link\\\">\\n              <th mat-header-cell *matHeaderCellDef> Details </th>\\n              <td mat-cell *matCellDef=\\\"let element\\\"> <button (click)=\\\"gotoRide(element.id)\\\" mat-icon-button> <mat-icon>call_made</mat-icon></button> </td>\\n            </ng-container>\\n        \\n          <tr mat-header-row *matHeaderRowDef=\\\"displayedColumns\\\"></tr>\\n          <tr mat-row *matRowDef=\\\"let row; columns: displayedColumns;\\\"></tr>\\n        </table>\\n        <br>\\n        \\n    <mat-paginator *ngIf=\\\"rides.length>0\\\" [length]=\\\"rides.length\\\"\\n                  [pageSize]=\\\"10\\\"\\n                  [pageSizeOptions]=\\\"[1, 5, 10, 25, 100]\\\"\\n                  (page)=\\\"setPage($event)\\\">\\n    </mat-paginator>\\n  </div>\\n\\n\"","import { Component, OnInit, OnDestroy, AfterViewInit, NgZone } from '@angular/core';\nimport { Router, ActivatedRoute, ParamMap } from '@angular/router';\nimport { Location } from '@angular/common';\nimport { TagService } from '../tag.service';\nimport { AuthService } from '../auth.service';\nimport { RiderService } from '../rider.service';\nimport { RideService } from '../ride.service';\nimport { Rider, Bike} from '../rider';\nimport { Ride } from '../ride';\nimport { Tag } from '../tag';\nimport { PageEvent } from '@angular/material';\nimport { DatePipe } from '@angular/common';\nimport { Subscription, Observable, timer } from 'rxjs';\nimport { Parameters, RideParameters } from '../parameters';\n\n@Component({\n  selector: 'app-ride',\n  templateUrl: './ride.component.html',\n  styleUrls: ['./ride.component.css'],\n  providers: [RideParameters]\n})\nexport class RideComponent implements OnInit, OnDestroy {\n  rider: Rider;\n  rides: Ride[];\n  ride: Ride;\n  tags: Tag[];\n  tagid: string;\n  start: number;\n  end: number;\n  progress: boolean;\n  timestemp: number;\n  hours: number;\n  minutes: number;\n  seconds: number;\n  ref: string;\n  nikname: string;\n  avatar: string;\n\n  displayedColumns: string[] = ['date', 'start', 'finish', 'time', 'link'];\n\n  private timer: Observable<number>;\n  private timer_subs: Subscription;\n  private rides_subs: Subscription;\n  private ride_subs: Subscription;\n  private tags_subs: Subscription;\n  private rider_subs: Subscription;\n\n  constructor(\n    private zone: NgZone,\n    private tagService: TagService,\n    private authService: AuthService,\n    private route: ActivatedRoute,\n    private router: Router,\n    private riderService: RiderService,\n    private rideService: RideService,\n    private datePipe: DatePipe,\n    private location: Location,\n    private param: RideParameters\n    ) { console.log(this.param); }\n\n  ngOnInit() {\n    this.clear();\n    this.getTags();\n    this.getRider();\n  }\n  ngOnDestroy() {\n    if (this.tags_subs) { this.tags_subs.unsubscribe(); }\n    if (this.rides_subs) { this.rides_subs.unsubscribe(); }\n    if (this.ride_subs) { this.ride_subs.unsubscribe(); }\n    if (this.timer_subs) { this.timer_subs.unsubscribe(); }\n    if (this.rider_subs) { this.rider_subs.unsubscribe(); }\n  }\n\n  clear() {\n    this.tagid = null;\n    this.start = 0;\n    this.end = 10;\n    this.progress = false;\n  }\n\n  gotoRide(id: number): void {\n    this.router.navigate([`/ride/${id}`]);\n  }\n\n  getTags(): void {\n    this.tags_subs = this.tagService.getTagsByMobile(this.authService.getUserPhone())\n      .subscribe(tags => this.tags = tags);\n  }\n\n  getRider(): void {\n    this.rider_subs = this.riderService.getRiderByMobile(this.authService.getUserPhone())\n    .subscribe(riders => {\n      if (riders) {\n        if (riders.length > 0) {\n          this.rider = riders[0];\n          this.nikname = this.rider.nikname;\n          this.avatar = this.rider.avatar;\n        }\n      }\n     });\n  }\n\n  getRides(): void {\n    this.rides_subs = this.rideService.getRidesByTagId(this.tagid)\n      .subscribe(rides => this.rides = rides);\n  }\n\n  getRide(): void {\n    this.ride_subs = this.rideService.getRideByTagId(this.tagid)\n      .subscribe(rides => {\n        if (rides.length > 0) {\n          this.ride = rides[0];\n          this.timer = timer(0, 1000);\n          this.timer_subs = this.timer.subscribe(t => {\n            this.timestemp = new Date().getTime() - this.ride.start;\n            this.hours = Math.floor(this.timestemp / 1000 / 60 / 60);\n            this.minutes = Math.floor(this.timestemp / 1000 / 60 );\n            this.seconds = Math.floor(this.timestemp / 1000 );\n          });\n        }\n      });\n  }\n\n  select(tagid: string) {\n    this.tagid = tagid;\n    this.getRides();\n    this.getRide();\n  }\n\n  setPage(e: PageEvent): void {\n    console.log(e);\n    const { pageIndex, pageSize } = e;\n    this.start = pageIndex * pageSize;\n    this.end = this.start + pageSize;\n  }\n\n  startRide(e: Event): void {\n    if (!this.tagid) {\n      return;\n    }\n    this.progress = true;\n    e.preventDefault();\n    e.stopPropagation();\n    const start = new Date().getTime();\n    const tagid = this.tagid;\n    const id = Math.random() * 1000 + start;\n    const open = true;\n    const rider = this.rider;\n    let ride: Ride;\n    if (rider) {\n      ride = { id, tagid, start, open, rider };\n    } else {\n      ride = { id, tagid, start, open };\n    }\n    this.rideService.addNewRideCB(ride, (err, ref) => {\n      if (err) {\n        this.progress = false;\n        console.error(err);\n      } else {\n        this.progress = false;\n        this.getRides();\n      }\n    });\n  }\n\n  finishRide(e: Event): void {\n    this.progress = true;\n    e.preventDefault();\n    e.stopPropagation();\n    const finish = new Date().getTime();\n    this.ride.finish = finish;\n    this.ride.open = false;\n    const time = finish - this.ride.start;\n    if (time > this.param.mintime && time < this.param.maxtime) {\n      this.ride.time = time;\n      console.log(`RideComponent: finishRide: record ride time: ${time}`);\n    } else {\n      this.ride.time = 0;\n      console.log(`RideComponent: finishRide: ride time: ${time} is out of range [${this.param.mintime}, ${this.param.maxtime}]`);\n    }\n    this.rideService.updateRideByIdCB(this.ride, (err, ref) => {\n      if (err) {\n        this.progress = false;\n        console.error(err);\n      } else {\n        this.progress = false;\n        this.getRides();\n      }\n    });\n  }\n\n  gotoBack(): void {\n    this.location.back();\n  }\n\n}\n","import { Injectable } from '@angular/core';\nimport { AngularFirestore, AngularFirestoreCollection, QuerySnapshot, CollectionReference } from '@angular/fire/firestore';\nimport { Observable, BehaviorSubject, combineLatest  } from 'rxjs';\nimport { switchMap } from 'rxjs/operators';\nimport { Rider, Bike } from './rider';\nimport { DatePipe } from '@angular/common';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class RiderService {\n  db: AngularFirestore;\n  riders: Observable<Rider[]>;\n  rider: Observable<Rider[]>;\n  userRider: Observable<Rider[]>;\n  number$: BehaviorSubject<number|null>;\n  start$: BehaviorSubject<string|null>;\n  order$: BehaviorSubject<string|null>;\n  where$: BehaviorSubject<string|null>;\n  mobile$: BehaviorSubject<string|null>;\n\n  constructor(private datePipe: DatePipe, db: AngularFirestore) {\n    this.db = db;\n    this.number$ = new BehaviorSubject(1000);\n    this.start$ = new BehaviorSubject(null);\n    this.order$ = new BehaviorSubject('id');\n    this.riders = combineLatest(this.number$, this.start$, this.order$).pipe(\n      switchMap(([num, start, order]) =>\n        db.collection<Rider>('riders', ref => {\n        let query: firebase.firestore.CollectionReference | firebase.firestore.Query = ref;\n        if (num) { query = query.limit(num); }\n        if (order) { query = query.orderBy(order); if (start) { query = query.startAt(start); } }\n        return query;\n        }).valueChanges()\n    ));\n\n    this.where$ = new BehaviorSubject(null);\n    this.rider = combineLatest(this.where$).pipe(\n      switchMap(([where]) =>\n        db.collection<Rider>('riders', ref => {\n        let query: firebase.firestore.CollectionReference | firebase.firestore.Query = ref;\n        if (where) { query = query.where('id', '==', where); }\n        query = query.limit(1);\n        return query;\n        }).valueChanges()\n    ));\n\n    this.mobile$ = new BehaviorSubject(null);\n    this.userRider = combineLatest(this.mobile$).pipe(\n      switchMap(([mobile]) =>\n        db.collection<Rider>('riders', ref => {\n        let query: firebase.firestore.CollectionReference | firebase.firestore.Query = ref;\n        query = query.where('mobile', '==', mobile);\n        return query;\n        }).valueChanges()\n    ));\n  }\n\n  getRiders(): Observable<Rider[]> {\n    return this.riders;\n  }\n\n  setNumber(num: number|null) {\n    this.number$.next(num);\n  }\n\n  setStart(start: string|null) {\n    this.start$.next(start);\n  }\n\n  setOrder(order: string|null) {\n    this.order$.next(order);\n  }\n\n  getRiderById(id: string): Observable<Rider[]> {\n    this.where$.next(id);\n    return this.rider;\n  }\n\n  getRiderByIdCB(id: string, cb: Function): void {\n    this.db.collection('riders').ref.where('id', '==', id)\n      .get()\n        .then(function(querySnapshot) {\n          if (querySnapshot.empty) {\n            cb(null);\n          } else {\n            cb(querySnapshot.docs[0]);\n          }\n        });\n  }\n\n  getRiderByMobile(mobile: string): Observable<Rider[]> {\n    this.mobile$.next(mobile);\n    return this.userRider;\n  }\n\n  getRiderByMobileCB(mobile: string, cb: Function): void {\n    this.db.collection('riders').ref.where('mobile', '==', mobile)\n      .get()\n        .then(function(querySnapshot) {\n          if (querySnapshot.empty) {\n            cb(null);\n          } else {\n            cb(querySnapshot.docs[0]);\n          }\n        });\n  }\n\n  addNewRiderCB(rider: Rider, cb: Function): void {\n    this.db.collection('riders').add(rider)\n      .then((ref) => cb(null, ref))\n      .catch((err) => cb(err, null));\n  }\n\n  updateRiderByIdCB(rider: Rider, cb: Function): void {\n    this.db.collection('riders').ref.where('id', '==', rider.id)\n      .get()\n        .then((querySnapshot) => {\n          if (querySnapshot.empty) {\n            console.error(`RiderService: updateRiderByIdCB: rider not found for id ${rider.id}`);\n            cb(`RiderService: updateRiderByIdCB: rider not found for id ${rider.id}`, null);\n          } else {\n            const doc = querySnapshot.docs[0];\n            // update tag doc\n            console.log(`RiderService: updateRiderByIdCB: updating rider for id: ${rider.id}`);\n            this.db.collection('riders').doc(doc.id).update(rider);\n            cb(null, doc);\n          }\n        });\n  }\n\n\n}\n","import { Wallet } from './wallet';\n\nexport const brands = [\n    {\n        name: 'Colnago',\n        logo: 'colnago-logo.png',\n        class: 'colnago-header-image',\n        models: [\n            {\n                name: 'E64',\n                desc: 'E-Bike, Monocoque frame',\n                img: 'colnago-e64.jpg',\n                year: '2019',\n                type: 'Road E-Bike',\n                material: 'Carbon',\n                brakes: ['disk'],\n                group: ['electronic', 'mechanical'],\n                ebike: true\n            },\n            {\n                name: 'C64',\n                desc: 'The C64 frame is full and made in Italy and is the result of more than 2 years of research',\n                img: 'colnago-c64.jpg',\n                year: '2019',\n                type: 'Road',\n                material: 'Carbon',\n                brakes: ['rim', 'disk'],\n                group: ['electronic', 'mechanical'],\n                ebike: false\n            },\n            {\n                name: 'Concept',\n                desc: 'A monocoque frame designed for power and speed, with a superior aerodynamic performance',\n                img: 'colnago-concept.jpg',\n                year: '2019',\n                type: 'Road',\n                material: 'Carbon',\n                brakes: ['rim', 'disk'],\n                group: ['electronic', 'mechanical'],\n                ebike: false\n            },\n            {\n                name: 'V2-r',\n                descr: 'Monocoque in carbon fiber of the highest quality, for lightness and performance without compromise on any terrain.',\n                img: 'colnago-v2r.jpg',\n                year: '2019',\n                type: 'Road',\n                material: 'Carbon',\n                brakes: ['rim', 'disk'],\n                group: ['electronic', 'mechanical'],\n                ebike: false\n            }\n        ]\n    },\n    {\n        name: 'Pinarello',\n        logo: 'pinarello-logo.gif',\n        class: 'pinarello-header-image',\n        models: [\n            {\n                name: 'DOGMA F10',\n                desc: 'Asymmetric Carbon Frame with Nanoalloy Technology',\n                img: 'pinarello-f10.jpeg',\n                year: '2019',\n                type: 'Road',\n                material: 'Carbon',\n                brakes: ['rim'],\n                group: ['electronic', 'mechanical'],\n                ebike: false\n            },\n            {\n                name: 'DOGMA F10 DISK',\n                desc: 'Asymmetric Carbon Frame with Nanoalloy Technology and disk brakes',\n                img: 'pinarello-f10-disk.jpeg',\n                year: '2019',\n                type: 'Road',\n                material: 'Carbon',\n                brakes: ['rim'],\n                group: ['electronic', 'mechanical'],\n                ebike: false\n            }\n        ]\n    },\n    {\n        name: 'Argone 18',\n        logo: 'argon18-logo.png',\n        class: 'argon18-header-image',\n    },\n    {\n        name: 'Cervelo',\n        logo: 'cervelo-logo.png',\n        class: 'cervelo-header-image',\n    },\n    {\n        name: 'Add new brand',\n        change: true,\n        logo: 'add.png'\n    }\n];\n\nexport class Frame {\n    bin?: string;           // bicycle identifivation number\n    brand: string;          // brand name, e.g. Colnago\n    model?: string;         // frame model, e.g. E-64\n    year?: string;          // production year, e.g. 2019\n    type: string;           // frame type, e.g. road\n    material: string;       // frame material, e.g. carbon, metal\n    new?: boolean;          // new or used\n    disk?: boolean;         // true for disk brakes\n    electronic?: boolean;   // true for electronic group set\n    ebike?: boolean;        // true fot e-bike\n    images?: string[];      // frame / bike images\n}\n\nexport class Wheel {\n    brand: string;          // wheels brans name, e.g. Mavic\n    model?: string;         // wheels model, e.g. AKSIUM ELITE EVO UST EBM\n    year?: string;          // production year\n    type: string;           // wheel type\n    tire: string;           // tier type / size, e.g. tube 23\n    new: boolean;           // new or used\n    material: string;       // frame material, e.g. carbon, metal, combined\n    position: string;       // front, rear, both - one record for rear and front wheels\n    images?: string[];      // wheels images\n    desc?: string;          // wheel description\n}\n\nexport class Group {\n    brand: string;          // brand name, e.g. SHIMANO\n    model?: string;         // model, e.g. ULTEGRA Di2\n    year?: string;          // production year, e.g. 2019\n    type: string;           // group set type, e.g. electric\n    disk: boolean;          // true for disk brackes\n    new: boolean;           // new or used\n    images?: string[];      // group set images\n    desc?: string;          // group description\n}\n\nexport class Bike {\n    tagid: string;          // RFID tag ID\n    frame: Frame;           // frame\n    wheels?: Wheel[];       // wheels\n    group?: Group;          // group set\n    images?: string[];      // bike images\n    desc?: string;          // bike description\n}\n\nexport class Rider {\n    id: string;\n    mobile: string;\n    nikname: string;\n    gender?: boolean;\n    avatar?: string;\n    group?: string;\n    country?: string;\n    ghost?: boolean;\n    bikes?: Bike[];\n    wallet?: Wallet;\n}\n","module.exports = \".error {\\n    color: red;\\n}\\n\\ntable {\\n    width: 100%;\\n  }\\n\\n.mat-cell .mat-icon {\\n    -webkit-transform: scale(0.6);\\n            transform: scale(0.6);\\n}\\n\\n.example-margin {\\n    margin: 0 10px;\\n  }\"","module.exports = \"<div fxLayout=\\\"row\\\" fxLayoutWrap=\\\"wrap\\\" fxLayoutAlign=\\\"start center\\\">\\n  <div fxFlex=\\\"100\\\"><br></div>\\n</div>\\n\\n<div *ngIf=\\\"order\\\">\\n        <table *ngIf=\\\"order.items.length>0\\\" mat-table [dataSource]=\\\"order.items | slice:start:end\\\" class=\\\"mat-elevation-z8\\\">\\n      \\n            <!--- Note that these columns can be defined in any order.\\n                  The actual rendered columns are set as a property on the row definition\\\" -->\\n      \\n            <ng-container matColumnDef=\\\"position\\\">\\n                <th mat-header-cell *matHeaderCellDef> </th>\\n                <td mat-cell *matCellDef=\\\"let element; let i = index;\\\"> {{i+1}} </td>\\n            </ng-container>\\n          \\n            <!-- Position Column -->\\n            <ng-container matColumnDef=\\\"name\\\">\\n                <th mat-header-cell *matHeaderCellDef> Name </th>\\n                <td mat-cell (click)=\\\"gotoItem(element.id)\\\" *matCellDef=\\\"let element\\\"> {{shortName(element.name)}}</td>\\n                \\n              </ng-container>\\n      \\n            <!-- Position Column -->\\n            <ng-container matColumnDef=\\\"price\\\">\\n              <th mat-header-cell *matHeaderCellDef> Price </th>\\n              <td mat-cell *matCellDef=\\\"let element\\\"> {{element.price | currency:' ':'symbol':'2.0-2'}}</td>\\n              \\n            </ng-container>\\n          \\n            <!-- Name Column -->\\n            <ng-container matColumnDef=\\\"qty\\\">\\n              <th mat-header-cell *matHeaderCellDef> Qty </th>\\n              <td mat-cell *matCellDef=\\\"let element\\\"> {{element.qty}}</td>\\n            </ng-container>\\n          \\n          \\n            <!-- Weight Column -->\\n            <ng-container matColumnDef=\\\"link\\\">\\n                <th mat-header-cell *matHeaderCellDef> </th>\\n                <td mat-cell *matCellDef=\\\"let element\\\"> <button (click)=\\\"gotoItem(element.id)\\\" mat-icon-button> <mat-icon>call_made</mat-icon></button> </td>\\n              </ng-container>\\n      \\n              <!-- Weight Column -->\\n            <ng-container matColumnDef=\\\"delete\\\">\\n                <th mat-header-cell *matHeaderCellDef> </th>\\n                <td mat-cell *matCellDef=\\\"let element; let i = index;\\\"> <button (click)=\\\"deleteItem(i)\\\" mat-icon-button> <mat-icon>delete_outline</mat-icon></button> </td>\\n              </ng-container>\\n          \\n            <tr mat-header-row *matHeaderRowDef=\\\"displayedColumns\\\"></tr>\\n            <tr mat-row *matRowDef=\\\"let row; columns: displayedColumns;\\\"></tr>\\n          </table>\\n          <br>\\n          \\n      <mat-paginator *ngIf=\\\"order.items.length>0\\\" [length]=\\\"order.items.length\\\"\\n                    [pageSize]=\\\"10\\\"\\n                    [pageSizeOptions]=\\\"[1, 5, 10, 25, 100]\\\"\\n                    (page)=\\\"setPage($event)\\\">\\n      </mat-paginator>\\n</div>\\n\\n<div *ngIf=\\\"result\\\" fxLayout=\\\"row\\\" fxLayoutWrap=\\\"wrap\\\" fxLayoutAlign=\\\"start center\\\">\\n    <div fxFlex=\\\"30\\\"></div>\\n    <div *ngIf=\\\"result ==='fail'\\\" fxFlex=\\\"60\\\" class=\\\"error\\\"><h2>Payment is failed</h2></div>\\n    <div *ngIf=\\\"result ==='accept'\\\" fxFlex=\\\"60\\\"><h2>Payment is accepted</h2></div>\\n    <div fxFlex=\\\"10\\\"></div>\\n</div>\\n\\n<div *ngIf=\\\"result\\\" fxLayout=\\\"row\\\" fxLayoutWrap=\\\"wrap\\\" fxLayoutAlign=\\\"start center\\\">\\n    <div fxFlex=\\\"30\\\"></div>\\n    <div *ngIf=\\\"result ==='fail'\\\" fxFlex=\\\"60\\\" ><h3>{{getErrorMessage()}}</h3></div>\\n    <div *ngIf=\\\"result ==='accept'\\\" fxFlex=\\\"60\\\"><h3>{{code}}</h3></div>\\n    <div fxFlex=\\\"10\\\"></div>\\n</div>\\n\\n<div *ngIf=\\\"result\\\" fxLayout=\\\"row\\\" fxLayoutWrap=\\\"wrap\\\" fxLayoutAlign=\\\"start center\\\">\\n    <div fxFlex=\\\"30\\\"></div>\\n    <div *ngIf=\\\"result ==='fail'\\\" fxFlex=\\\"60\\\" >\\n        <button mat-raised-button color=\\\"warn\\\" (click)=\\\"gotoShopping()\\\">Back</button>\\n    </div>\\n    <div *ngIf=\\\"result ==='accept'\\\" fxFlex=\\\"60\\\" >\\n        <button mat-raised-button color=\\\"primary\\\" [disabled]=\\\"process\\\" (click)=\\\"gotoShopping()\\\">Back</button>\\n    </div>\\n    <div fxFlex=\\\"10\\\"></div>\\n</div>\\n\\n\\n\"","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { Location } from '@angular/common';\nimport { ProcessingError } from '../../environments/errors';\nimport { HttpClient } from '@angular/common/http';\nimport { Order, Item, ORDERSTATUS } from '../order';\nimport { OrderService } from '../order.service';\nimport { TagService } from '../tag.service';\nimport { Tag, Registration } from '../tag';\nimport { AuthService } from '../auth.service';\nimport { DatePipe } from '@angular/common';\nimport { PageEvent } from '@angular/material';\n\n\nconst merchantID = 1093;\n\n@Component({\n  selector: 'app-shopping-result',\n  templateUrl: './shopping-result.component.html',\n  styleUrls: ['./shopping-result.component.css']\n})\nexport class ShoppingResultComponent implements OnInit {\n  result: string;\n  id: string;\n  operation: string;\n  reference: string;\n  error: string;\n  code: string;\n  process: boolean;\n  mobile: string;\n  uid: string;\n  order: Order;\n\n  start: number;\n  end: number;\n  updated: boolean;\n\n  displayedColumns: string[] = ['position', 'name', 'price', 'qty' ];\n\n  constructor(\n    private route: ActivatedRoute,\n    private location: Location,\n    private router: Router,\n    private http: HttpClient,\n    private orderService: OrderService,\n    private tagService: TagService,\n    private authService: AuthService,\n    private datePipe: DatePipe) { }\n\n  ngOnInit() {\n    this.start = 0;\n    this.end = 10;\n\n    this.process = false;\n    this.updated = false;\n\n    this.result = this.route.snapshot.paramMap.get('result');\n    this.id = this.route.snapshot.queryParamMap.get('id');\n    this.operation = this.route.snapshot.queryParamMap.get('operation');\n    this.reference = this.route.snapshot.queryParamMap.get('reference');\n    this.error = this.route.snapshot.queryParamMap.get('error');\n\n    if (this.result === 'accept') {\n      this.checkResult();\n    } else {\n      this.completeOrder(ORDERSTATUS.FAILED);\n    }\n    this.authService.getUser().subscribe(user => {\n      this.mobile = user.phoneNumber;\n      this.uid = user.uid;\n    });\n  }\n\n  shortName(name: string): string {\n    if (name.length <= 20) {\n      return `${name}`;\n    } else {\n      return `${name.slice(0, 17)}...`;\n    }\n  }\n\n  gotoItem(id: string): void {\n    if (this.order) {\n      this.router.navigate([`/item/${id}/${this.order.ref}/locked`]);\n    }\n  }\n\n  setPage(e: PageEvent): void {\n    console.log(e);\n    const { pageIndex, pageSize } = e;\n    this.start = pageIndex * pageSize;\n    this.end = this.start + pageSize;\n  }\n\n  getErrorMessage(): string {\n    let msg = '';\n    if (this.error) {\n      if (ProcessingError[this.error]) {\n        msg = ProcessingError[this.error];\n      }\n    }\n    return msg;\n  }\n\n  gotoShopping() {\n    this.router.navigate([`/shopping`]);\n  }\n\n  checkResult(): void {\n    this.process = true;\n\n    const url = `https://us-central1-cloud-firestore-test-d95bf.cloudfunctions.net/operation`;\n    const data = {\n      sector: merchantID,\n      id: this.id,\n      reference: this.reference,\n      operation: this.operation\n    };\n    this.http.post(url, data, { responseType: 'text' }).subscribe((res: string) => {\n      this.process = false;\n\n      const parser = new DOMParser();\n      const doc = parser.parseFromString(res, 'application/xml');\n      console.log(doc);\n      if (doc.getElementsByTagName('approval_code').length > 0) {\n        this.code = doc.getElementsByTagName('approval_code').item(0).innerHTML;\n        console.log(`Approval code ${this.code}`);\n      }\n      if (doc.getElementsByTagName('order_state').length > 0) {\n        const state = doc.getElementsByTagName('order_state').item(0);\n        console.log(`Order State ${state.innerHTML}`);\n        if (state.innerHTML === 'COMPLETED') {\n          this.completeOrder(ORDERSTATUS.CLOSED);\n        }\n      } else {\n        this.completeOrder(ORDERSTATUS.PAID);\n      }\n      });\n  }\n\n  completeOrder(status: string): void {\n    if (this.reference) {\n      this.process = true;\n\n      console.log(`Complete the Order ${this.reference}`);\n      this.orderService.getOrderByRef(this.reference).subscribe((res) => {\n        this.process = false;\n        if (this.updated) {\n          return;\n        }\n        if (res.length > 0) {\n          const order = res[0];\n          this.order = res[0];\n          // change order status\n          order.status = status;\n          this.updated = true;\n          // update order\n          this.orderService.updateOrderCB(order, (err, result) => {\n            if (err) {\n              console.error(err);\n            } else {\n              console.log(`Order Status ${order.status} is changing for client ${order.client} by user ${this.uid}`);\n              if (status === ORDERSTATUS.PAID && order.client === this.uid) {\n                console.log('Check if order has TAG');\n                for (let i = 0; i < order.items.length; i++) {\n                  if (order.items[i].code.startsWith('TAG')) {\n                    // adding tag to user\n                    console.log(`Add tag ${order.items[i].id} to client ${order.client}`);\n                    const regDate = this.datePipe.transform(new Date(), 'dd-MM-yy');\n                    const reg: Registration = {\n                      mobile: this.mobile,\n                      sms: 'auto reg / paid'\n                    };\n                    const tag: Tag = {\n                      id: order.items[i].id,\n                      regDate,\n                      reg,\n                      payment: order.payment\n                    };\n                    this.tagService.addNewTag(tag);\n                  }\n                }\n              }\n            }\n          });\n        } else {\n          console.error('Order is not found');\n        }\n      });\n    }\n  }\n\n}\n","module.exports = \"table {\\n    width: 100%;\\n  }\\n\\n  .mat-cell .mat-icon {\\n    -webkit-transform: scale(0.6);\\n            transform: scale(0.6);\\n}\\n\\n  .example-margin {\\n    margin: 0 10px;\\n  }\\n\\n  .tag-card {\\n    max-width: 200px;\\n}\\n\\n  .bronze-header-image {\\n  background-image: url(\\\"data:image/svg+xml,%3Csvg xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22 width%3D%22230%22 height%3D%22230%22 viewBox%3D%220 0 230 230%22%3E    %3Cg fill%3D%22%23A38568%22 fill-rule%3D%22evenodd%22%3E        %3Cpath d%3D%22M150.941 114.6c5.494 1.47 8.755 7.11 7.285 12.59-1.472 5.482-7.123 8.736-12.616 7.27-5.503-1.473-8.755-7.11-7.285-12.59 1.472-5.482 7.115-8.74 12.616-7.27m18.743-2.405c-6.825-11.804-21.943-15.847-33.777-9.03a24.67 24.67 0 0 1-18.757 2.467 4.12 4.12 0 0 1-2.607-5.84l7.534-18.443 9.359-22.931 7.555-18.498-.007-.002a4.11 4.11 0 0 0-2.637-5.779 4.154 4.154 0 0 0-3.127.409c-.173.1-.343.215-.489.336l-27.442 21.29-39.823 30.885c-9.545 7.45-12.385 20.968-6.15 31.742 6.832 11.801 21.952 15.843 33.775 9.031a24.667 24.667 0 0 1 18.76-2.464 4.112 4.112 0 0 1 2.604 5.839l-7.53 18.436-9.36 22.936-7.556 18.5.007.002a4.12 4.12 0 0 0 .133 3.864 4.155 4.155 0 0 0 2.504 1.915 4.136 4.136 0 0 0 3.127-.41c.18-.104.34-.216.489-.342l.005.009 27.435-21.285 39.824-30.893c9.546-7.45 12.386-20.967 6.151-31.744%22%2F%3E        %3Cpath d%3D%22M114.7 213.509c-54.24 0-98.21-43.97-98.21-98.208 0-54.241 43.97-98.21 98.21-98.21 54.24 0 98.21 43.969 98.21 98.21 0 54.239-43.97 98.208-98.21 98.208M114.7.6C51.354.6 0 51.953 0 115.3S51.353 230 114.7 230c63.346 0 114.7-51.353 114.7-114.7S178.046.6 114.7.6%22%2F%3E    %3C%2Fg%3E%3C%2Fsvg%3E\\\");\\n  background-size: cover;\\n}\\n\\n  .silver-header-image {\\n  background-image: url(\\\"data:image/svg+xml,%3Csvg xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22 width%3D%22230%22 height%3D%22230%22 viewBox%3D%220 0 230 230%22%3E    %3Cg fill%3D%22%239A999C%22 fill-rule%3D%22evenodd%22%3E        %3Cpath d%3D%22M150.941 114.6c5.494 1.47 8.755 7.11 7.285 12.59-1.472 5.482-7.123 8.736-12.616 7.27-5.503-1.473-8.755-7.11-7.285-12.59 1.472-5.482 7.115-8.74 12.616-7.27m18.743-2.405c-6.825-11.804-21.943-15.847-33.777-9.03a24.67 24.67 0 0 1-18.757 2.467 4.12 4.12 0 0 1-2.607-5.84l7.534-18.443 9.359-22.931 7.555-18.498-.007-.002a4.11 4.11 0 0 0-2.637-5.779 4.154 4.154 0 0 0-3.127.409c-.173.1-.343.215-.489.336l-27.442 21.29-39.823 30.885c-9.545 7.45-12.385 20.968-6.15 31.742 6.832 11.801 21.952 15.843 33.775 9.031a24.667 24.667 0 0 1 18.76-2.464 4.112 4.112 0 0 1 2.604 5.839l-7.53 18.436-9.36 22.936-7.556 18.5.007.002a4.12 4.12 0 0 0 .133 3.864 4.155 4.155 0 0 0 2.504 1.915 4.136 4.136 0 0 0 3.127-.41c.18-.104.34-.216.489-.342l.005.009 27.435-21.285 39.824-30.893c9.546-7.45 12.386-20.967 6.151-31.744%22%2F%3E        %3Cpath d%3D%22M114.7 213.509c-54.24 0-98.21-43.97-98.21-98.208 0-54.241 43.97-98.21 98.21-98.21 54.24 0 98.21 43.969 98.21 98.21 0 54.239-43.97 98.208-98.21 98.208M114.7.6C51.354.6 0 51.953 0 115.3S51.353 230 114.7 230c63.346 0 114.7-51.353 114.7-114.7S178.046.6 114.7.6%22%2F%3E    %3C%2Fg%3E%3C%2Fsvg%3E\\\");\\n  background-size: cover;\\n}\\n\\n  .gold-header-image {\\n  background-image: url(\\\"data:image/svg+xml,%3Csvg xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22 width%3D%22230%22 height%3D%22230%22 viewBox%3D%220 0 230 230%22%3E    %3Cg fill%3D%22%23DDC086%22 fill-rule%3D%22evenodd%22%3E        %3Cpath d%3D%22M150.941 114.6c5.494 1.47 8.755 7.11 7.285 12.59-1.472 5.482-7.123 8.736-12.616 7.27-5.503-1.473-8.755-7.11-7.285-12.59 1.472-5.482 7.115-8.74 12.616-7.27m18.743-2.405c-6.825-11.804-21.943-15.847-33.777-9.03a24.67 24.67 0 0 1-18.757 2.467 4.12 4.12 0 0 1-2.607-5.84l7.534-18.443 9.359-22.931 7.555-18.498-.007-.002a4.11 4.11 0 0 0-2.637-5.779 4.154 4.154 0 0 0-3.127.409c-.173.1-.343.215-.489.336l-27.442 21.29-39.823 30.885c-9.545 7.45-12.385 20.968-6.15 31.742 6.832 11.801 21.952 15.843 33.775 9.031a24.667 24.667 0 0 1 18.76-2.464 4.112 4.112 0 0 1 2.604 5.839l-7.53 18.436-9.36 22.936-7.556 18.5.007.002a4.12 4.12 0 0 0 .133 3.864 4.155 4.155 0 0 0 2.504 1.915 4.136 4.136 0 0 0 3.127-.41c.18-.104.34-.216.489-.342l.005.009 27.435-21.285 39.824-30.893c9.546-7.45 12.386-20.967 6.151-31.744%22%2F%3E        %3Cpath d%3D%22M114.7 213.509c-54.24 0-98.21-43.97-98.21-98.208 0-54.241 43.97-98.21 98.21-98.21 54.24 0 98.21 43.969 98.21 98.21 0 54.239-43.97 98.208-98.21 98.208M114.7.6C51.354.6 0 51.953 0 115.3S51.353 230 114.7 230c63.346 0 114.7-51.353 114.7-114.7S178.046.6 114.7.6%22%2F%3E    %3C%2Fg%3E%3C%2Fsvg%3E\\\");\\n  background-size: cover;\\n}\"","module.exports = \"<app-header [back]=\\\"true\\\" [title]=\\\"'Shopping'\\\"></app-header>\\n\\n<div *ngIf=\\\"authenticated()\\\" fxLayout=\\\"column\\\">\\n\\n  <div fxLayout=\\\"row\\\" fxLayoutWrap=\\\"wrap\\\" fxLayoutAlign=\\\"start center\\\">\\n      <div fxFlex=\\\"100\\\">\\n        <br>\\n      </div>\\n  </div>\\n\\n  <div fxLayout=\\\"row\\\" fxLayoutWrap=\\\"wrap\\\" fxLayoutAlign=\\\"start center\\\">\\n      <div fxFlex=\\\"2\\\"></div>\\n      <div *ngIf=\\\"order\\\" fxFlex=\\\"8\\\">TOTAL:</div>\\n      <div *ngIf=\\\"order\\\" fxFlex=\\\"10\\\"></div>\\n      <div *ngIf=\\\"order\\\" fxFlex=\\\"60\\\">{{getTotalCost() | currency:' '}}&nbsp; </div>\\n      <div *ngIf=\\\"order\\\" fxFlex=\\\"10\\\">\\n          <button [disabled]=\\\"order.items.length>0\\\" (click)=\\\"deleteOrder()\\\" mat-icon-button>\\n              <mat-icon>delete_outline</mat-icon>\\n          </button>\\n      </div>\\n\\n      <div *ngIf=\\\"!order\\\" fxFlex=\\\"88\\\">\\n        <h3>{{msg}}</h3>\\n      </div>\\n      \\n      <div *ngIf=\\\"order || new\\\" fxFlex=\\\"8\\\">\\n        <button (click)=\\\"gotoItem('NEW')\\\" mat-icon-button>\\n            <mat-icon>add_circle_outline</mat-icon>\\n        </button>\\n      </div>\\n      <div fxFlex=\\\"2\\\"></div>\\n  </div>\\n\\n  <div *ngIf=\\\"!order && !action\\\" fxLayout=\\\"row\\\"  fxLayout.xs=\\\"column\\\" fxLayoutAlign.xs=\\\"start center\\\" fxLayoutWrap fxLayoutGap=\\\"1.5%\\\" fxLayoutAlign=\\\"left\\\">\\n    \\n    <mat-card (click)=\\\"action={bronze:true}\\\" class=\\\"tag-card\\\">\\n      <mat-card-header>\\n        <mat-card-title>Bronze Tag</mat-card-title>\\n        <mat-card-subtitle>Giro d'Iseo Bronze</mat-card-subtitle>\\n      </mat-card-header>\\n      <img mat-card-image [src]=\\\"'../assets/' + 'tag-bronze.svg'\\\">\\n    </mat-card>\\n\\n    \\n    <mat-card (click)=\\\"action={silver:true}\\\" class=\\\"tag-card\\\">\\n        <mat-card-header>\\n          <mat-card-title>Silver Tag</mat-card-title>\\n          <mat-card-subtitle>Giro d'Iseo Silver</mat-card-subtitle>\\n        </mat-card-header>\\n        <img mat-card-image [src]=\\\"'../assets/' + 'tag-silver.svg'\\\">\\n    </mat-card>\\n\\n    \\n    <mat-card (click)=\\\"action={gold:true}\\\" class=\\\"tag-card\\\">\\n        <mat-card-header>\\n          <mat-card-title>Gold Tag</mat-card-title>\\n          <mat-card-subtitle>Giro d'Iseo Gold</mat-card-subtitle>\\n        </mat-card-header>\\n        <img mat-card-image [src]=\\\"'../assets/' + 'tag-gold.svg'\\\">\\n    </mat-card>\\n  </div>\\n\\n  <div *ngIf=\\\"!order && action\\\" fxLayout=\\\"row\\\"  fxLayout.xs=\\\"column\\\" fxLayoutAlign.xs=\\\"start center\\\" fxLayoutWrap fxLayoutGap=\\\"1.5%\\\" fxLayoutAlign=\\\"left\\\">\\n    \\n      <mat-card *ngIf=\\\"action.bronze\\\" (click)=\\\"select()\\\" class=\\\"tag-card\\\">\\n        <mat-card-header>\\n          <div mat-card-avatar class=\\\"bronze-header-image\\\"></div>\\n          <mat-card-title>Bronze Tag</mat-card-title>\\n          <mat-card-subtitle>Giro d'Iseo Bronze</mat-card-subtitle>\\n        </mat-card-header>\\n        <img mat-card-image [src]=\\\"'../assets/' + 'tag-bronze.svg'\\\">\\n        <mat-card-content >\\n            <mat-chip-list>\\n                <mat-chip color=\\\"primary\\\" selected>Competition</mat-chip>\\n                <mat-chip color=\\\"primary\\\" selected>Points</mat-chip>\\n              </mat-chip-list>\\n              <br>\\n              <mat-divider></mat-divider>\\n        </mat-card-content>\\n          <mat-card-actions>\\n              <button (click)=\\\"select()\\\" mat-raised-button color=\\\"warn\\\" mat-button> 1,000</button>\\n              <button (click)=\\\"action=undefined\\\" mat-button>CANCEL</button>\\n            </mat-card-actions>\\n      </mat-card>\\n  \\n      \\n      <mat-card *ngIf=\\\"action.silver\\\" (click)=\\\"select()\\\" class=\\\"tag-card\\\">\\n          <mat-card-header>\\n              <div mat-card-avatar class=\\\"silver-header-image\\\"></div>\\n              <mat-card-title>Silver Tag</mat-card-title>\\n              <mat-card-subtitle>Giro d'Iseo Silver</mat-card-subtitle>\\n            </mat-card-header>\\n            <img mat-card-image [src]=\\\"'../assets/' + 'tag-silver.svg'\\\">\\n          <mat-card-content >\\n              <mat-chip-list>\\n                  <mat-chip color=\\\"primary\\\" selected>Competition</mat-chip>\\n                  <mat-chip color=\\\"primary\\\" selected>Points</mat-chip>\\n                  <mat-chip color=\\\"primary\\\" selected> 30,000 overage</mat-chip>\\n                </mat-chip-list>\\n                <br>\\n                <mat-divider></mat-divider>\\n            </mat-card-content>\\n            <mat-card-actions>\\n              <button (click)=\\\"select()\\\" mat-raised-button color=\\\"warn\\\" mat-button> 6,000</button>\\n              <button (click)=\\\"action=undefined\\\" mat-button>CANCEL</button>\\n            </mat-card-actions>\\n      </mat-card>\\n  \\n      \\n      <mat-card *ngIf=\\\"action.gold\\\" (click)=\\\"select()\\\" class=\\\"tag-card\\\">\\n          <mat-card-header>\\n              <div mat-card-avatar class=\\\"gold-header-image\\\"></div>\\n              <mat-card-title>Gold Tag</mat-card-title>\\n              <mat-card-subtitle>Giro d'Iseo Silver</mat-card-subtitle>\\n            </mat-card-header>\\n            <img mat-card-image [src]=\\\"'../assets/' + 'tag-gold.svg'\\\">\\n          <mat-card-content >\\n              <mat-chip-list>\\n                  <mat-chip color=\\\"primary\\\" selected>Competition</mat-chip>\\n                  <mat-chip color=\\\"primary\\\" selected>Points</mat-chip>\\n                  <mat-chip color=\\\"primary\\\" selected> 70,000 overage</mat-chip>\\n                </mat-chip-list>\\n                <br>\\n                <mat-divider></mat-divider>\\n            </mat-card-content>\\n            <mat-card-actions>\\n              <button (click)=\\\"select()\\\" mat-raised-button color=\\\"warn\\\" mat-button> 10,000</button>\\n              <button (click)=\\\"action=undefined\\\" mat-button>CANCEL</button>\\n            </mat-card-actions>\\n      </mat-card>\\n    </div>\\n\\n  <div fxLayout=\\\"row\\\" fxLayoutWrap=\\\"wrap\\\" fxLayoutAlign=\\\"start center\\\">\\n      <div fxFlex=\\\"100\\\">\\n        <br>\\n      </div>\\n  </div>\\n\\n</div>\\n\\n<div *ngIf=\\\"order\\\">\\n    <table *ngIf=\\\"order.items.length>0\\\" mat-table [dataSource]=\\\"order.items | slice:start:end\\\" class=\\\"mat-elevation-z8\\\">\\n\\n        <!--- Note that these columns can be defined in any order.\\n              The actual rendered columns are set as a property on the row definition\\\" -->\\n\\n        <ng-container matColumnDef=\\\"position\\\">\\n            <th mat-header-cell *matHeaderCellDef> </th>\\n            <td mat-cell *matCellDef=\\\"let element; let i = index;\\\"> {{i+1}} </td>\\n        </ng-container>\\n      \\n        <!-- Position Column -->\\n        <ng-container matColumnDef=\\\"name\\\">\\n            <th mat-header-cell *matHeaderCellDef> Name </th>\\n            <td mat-cell (click)=\\\"gotoItem(element.id)\\\" *matCellDef=\\\"let element\\\"> {{shortName(element.name)}}</td>\\n            \\n          </ng-container>\\n\\n        <!-- Position Column -->\\n        <ng-container matColumnDef=\\\"price\\\">\\n          <th mat-header-cell *matHeaderCellDef> Price </th>\\n          <td mat-cell *matCellDef=\\\"let element\\\"> {{element.price | currency:' ':'symbol':'2.0-2'}}</td>\\n          \\n        </ng-container>\\n      \\n        <!-- Name Column -->\\n        <ng-container matColumnDef=\\\"qty\\\">\\n          <th mat-header-cell *matHeaderCellDef> Qty </th>\\n          <td mat-cell *matCellDef=\\\"let element\\\"> {{element.qty}}</td>\\n        </ng-container>\\n      \\n      \\n        <!-- Weight Column -->\\n        <ng-container matColumnDef=\\\"link\\\">\\n            <th mat-header-cell *matHeaderCellDef> </th>\\n            <td mat-cell *matCellDef=\\\"let element\\\"> <button (click)=\\\"gotoItem(element.id)\\\" mat-icon-button> <mat-icon>call_made</mat-icon></button> </td>\\n          </ng-container>\\n\\n          <!-- Weight Column -->\\n        <ng-container matColumnDef=\\\"delete\\\">\\n            <th mat-header-cell *matHeaderCellDef> </th>\\n            <td mat-cell *matCellDef=\\\"let element; let i = index;\\\"> <button (click)=\\\"deleteItem(i)\\\" mat-icon-button> <mat-icon>delete_outline</mat-icon></button> </td>\\n          </ng-container>\\n      \\n        <tr mat-header-row *matHeaderRowDef=\\\"displayedColumns\\\"></tr>\\n        <tr mat-row *matRowDef=\\\"let row; columns: displayedColumns;\\\"></tr>\\n      </table>\\n      <br>\\n      \\n  <mat-paginator *ngIf=\\\"order.items.length>0\\\" [length]=\\\"order.items.length\\\"\\n                [pageSize]=\\\"10\\\"\\n                [pageSizeOptions]=\\\"[1, 5, 10, 25, 100]\\\"\\n                (page)=\\\"setPage($event)\\\">\\n  </mat-paginator>\\n</div>\\n\\n<div *ngIf=\\\"order\\\" fxLayout=\\\"row\\\" fxLayoutWrap=\\\"wrap\\\" fxLayoutAlign=\\\"start center\\\">\\n    <div fxFlex=\\\"15\\\">\\n        <button mat-raised-button color=\\\"warn\\\" [disabled]=\\\"order.items.length == 0 || process\\\" (click)=\\\"register()\\\">Pay</button>\\n    </div>\\n    <div *ngIf=\\\"process\\\" fxFlex=\\\"10\\\">\\n        <mat-progress-spinner\\n        class=\\\"example-margin\\\"\\n        [diameter]=\\\"25\\\"\\n        [color]=\\\"color\\\"\\n        [mode]=\\\"mode\\\"\\n        [value]=\\\"value\\\">\\n      </mat-progress-spinner>\\n    </div>\\n</div>\\n\\n\\n\\n\\n<div *ngIf=\\\"!authenticated()\\\" fxLayout=\\\"column\\\">\\n    \\n    <div fxLayout=\\\"row\\\" fxLayoutWrap=\\\"wrap\\\" fxLayoutAlign=\\\"start center\\\">\\n      <div fxFlex=\\\"100\\\"><br></div>\\n    </div>\\n\\n    <div fxLayout=\\\"row\\\" fxLayoutWrap=\\\"wrap\\\" fxLayoutAlign=\\\"start center\\\">\\n      <div fxFlex=\\\"30\\\"></div>\\n      <div fxFlex=\\\"40\\\">\\n        <h3>To start Shopping</h3>\\n      </div>\\n      <div fxFlex=\\\"30\\\"></div>\\n    </div>\\n  \\n    <div fxLayout=\\\"row\\\" fxLayoutWrap=\\\"wrap\\\" fxLayoutAlign=\\\"start center\\\">\\n      <div fxFlex=\\\"30\\\"></div>\\n      <div fxFlex=\\\"40\\\">\\n          <h3>Need to login first</h3>\\n      </div>\\n      <div fxFlex=\\\"30\\\"></div>\\n    </div>\\n\\n    <div fxLayout=\\\"row\\\" fxLayoutWrap=\\\"wrap\\\" fxLayoutAlign=\\\"start center\\\">\\n        <div fxFlex=\\\"45\\\"></div>\\n        <div fxFlex=\\\"10\\\">\\n            <button mat-raised-button color=\\\"primary\\\" (click)=\\\"gotoLogin()\\\">Login</button>\\n        </div>\\n        <div fxFlex=\\\"45\\\"></div>\\n      </div>\\n  \\n  </div>\"","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { AuthService } from '../auth.service';\nimport { OrderService } from '../order.service';\nimport { Order, Item, Payment, ORDERSTATUS } from '../order';\nimport { PageEvent } from '@angular/material';\nimport { HttpClient } from '@angular/common/http';\nimport { Subscription } from 'rxjs';\nimport { TagService } from '../tag.service';\n\nconst merchantID = 1743;\n\n@Component({\n  selector: 'app-shopping',\n  templateUrl: './shopping.component.html',\n  styleUrls: ['./shopping.component.css']\n})\nexport class ShoppingComponent implements OnInit, OnDestroy {\n\n  start: number;\n  end: number;\n  process: boolean;\n\n  color = 'primary';\n  mode = 'determinate';\n  value = 50;\n\n  new: boolean;\n  userId: string;\n\n  displayedColumns: string[] = ['position', 'name', 'price', 'qty', 'delete' ];\n\n  order: Order;\n  msg: string;\n\n  tagid: string;\n  ref: string;\n  action: any;\n\n  ordersubs: Subscription;\n\n  constructor(\n    private authService: AuthService,\n    private router: Router,\n    private orderService: OrderService,\n    private http: HttpClient,\n    private route: ActivatedRoute,\n    private tagService: TagService\n    ) { }\n\n  ngOnInit() {\n    this.start = 0;\n    this.end = 10;\n    this.process = false;\n    this.new = false;\n    this.msg = '';\n    this.order = undefined;\n    this.ordersubs = undefined;\n    this.action = undefined;\n\n    this.tagid = this.route.snapshot.queryParamMap.get('tagid');\n    this.ref = this.route.snapshot.queryParamMap.get('ref');\n\n    this.authService.getUser().subscribe((res) => {\n      const userId = this.authService.getUID();\n      this.ordersubs = this.orderService.getClientCurrentOrder(userId).subscribe((result) => {\n        if (result.length > 0) {\n          this.order = result[0];\n          this.new = false;\n          console.log('Loading current order...');\n          console.log(this.order);\n          this.addTagToOrder();\n        } else {\n          console.log('Adding new order...');\n          this.new = true;\n          this.msg = 'Select a product';\n          this.userId = userId;\n          this.addTagToOrder();\n        }\n      });\n    });\n  }\n\n  ngOnDestroy() {\n    if (this.ordersubs) {\n      this.ordersubs.unsubscribe();\n    }\n  }\n\n  generate(): string {\n    let tagid = Math.random();\n    tagid = tagid * 1e14;\n    tagid = Math.floor(tagid);\n    return tagid.toString();\n  }\n\n  select(): void {\n    if (!this.action) {\n      return;\n    }\n\n    let type: string;\n    let price: number;\n    let priceTag: string;\n    let img: string;\n    const id = this.generate();\n\n    if (this.action.bronze) {\n      type = 'Bronze';\n      price = 1000;\n      priceTag = ' 1,000';\n      img = '../assets/tag-bronze.svg';\n    } else if (this.action.silver) {\n      type = 'Silver';\n      price = 6000;\n      priceTag = ' 6,000';\n      img = '../assets/tag-silver.svg';\n    } else {\n      type = 'Gold';\n      price = 10000;\n      priceTag = ' 10,000';\n      img = '../assets/tag-gold.svg';\n    }\n\n    const item: Item = {\n      id: id,\n      code: `TAG-${type}-${id}`,\n      name: `Giro d'Iseo ${type} Tag ${id}`,\n      qty: 1,\n      currency: 'RUB',\n      priceTag,\n      price,\n      img\n    };\n\n    this.new = false;\n    this.order = this.orderService.newOrderWithItems(this.userId, [item]);\n\n  }\n\n  addTagToOrder() {\n    if (!this.tagid) {\n      console.log('Nothing to add to the order. Tagid is undefined');\n      return;\n    }\n\n    const item: Item = {\n      id: this.tagid,\n      code: `TAG${this.tagid}`,\n      name: `Giro d'Iseo Tag ${this.tagid}`,\n      qty: 1,\n      currency: 'RUB',\n      priceTag: `10,000 rub`,\n      price: 10000,\n      img: '../assets/tag.png'\n    };\n\n    if (this.new) {\n      console.log(`Adding tag ${this.tagid} to new order`);\n      this.new = false;\n      this.order = this.orderService.newOrderWithItems(this.userId, [item]);\n    } else {\n      // check if tag is already in the order\n      let index = -1;\n      for (let i = 0; i < this.order.items.length; i++) {\n        if (this.order.items[i].code === `TAG${this.tagid}`) {\n          index = i;\n          break;\n        }\n      }\n      if (index === -1) {\n        console.log(`Adding tag ${this.tagid} to existing order`);\n        // add tag to order\n        this.order.items.push(item);\n        this.orderService.updateOrder(this.order);\n      } else {\n        console.log(`TAG${this.tagid} is already in the order`);\n      }\n    }\n  }\n\n  getCurrentOrder(orders): Order | null {\n    let order: Order = null;\n    for (let i = 0; i < orders.length; i++) {\n      if (orders[i].status === ORDERSTATUS.NEW) {\n        order = orders[i];\n        break;\n      }\n    }\n    return order;\n  }\n\n  gotoItem(id: string): void {\n    if (this.new) {\n      this.order = this.orderService.newOrder(this.userId);\n    }\n    if (this.order) {\n      this.router.navigate([`/item/${id}/${this.order.ref}`]);\n    } else {\n      this.router.navigate([`/item/${id}`]);\n    }\n  }\n\n  deleteItem(index: number): void {\n    this.order.items.splice(index, 1);\n    this.orderService.updateOrder(this.order);\n    if (this.order.items && this.order.items.length === 0) {\n      // empty orders deleted so make it undefined\n      this.order = undefined;\n    }\n  }\n\n  deleteOrder(): void {\n    this.order.items = [];\n    this.orderService.updateOrder(this.order);\n    this.order = undefined;\n  }\n\n  authenticated(): boolean {\n    return this.authService.authenticated();\n  }\n\n  gotoLogin(): void {\n    this.router.navigate([`/login/shopping`]);\n  }\n\n  setPage(e: PageEvent): void {\n    console.log(e);\n    const { pageIndex, pageSize } = e;\n    this.start = pageIndex * pageSize;\n    this.end = this.start + pageSize;\n  }\n\n  shortName(name: string): string {\n    if (name.length <= 20) {\n      return `${name}`;\n    } else {\n      return `${name.slice(0, 17)}...`;\n    }\n  }\n\n  getTotalCost(): number {\n    let total = 0;\n    for (let i = 0; i < this.order.items.length; i++) {\n      total = total + this.order.items[i].price * this.order.items[i].qty;\n    }\n    return total;\n  }\n\n  getDescription(): string {\n    let res = 'Items: ';\n    for (let i = 0; i < this.order.items.length; i++) {\n      if (res.length + this.order.items[i].name.length < 998) {\n        if (i > 0) {\n          res = res + ', ';\n        }\n        res = res + this.order.items[i].name;\n      }\n    }\n    return res;\n  }\n\n  register(): void {\n    this.process = true;\n    this.value = 50; // progress spinner value\n    this.ordersubs.unsubscribe();\n\n    const url = `https://us-central1-cloud-firestore-test-d95bf.cloudfunctions.net/register`;\n    const data = {\n      sector: merchantID,\n      amount: this.getTotalCost() * 100,\n      currency: 643,\n      reference: this.order.ref,\n      description: this.getDescription(),\n      url: 'https://girodiseo.ru/shopping/accept',\n      failurl: 'https://girodiseo.ru/shopping/fail',\n    };\n    this.http.post(url, data, { responseType: 'text' }).subscribe((res: string) => {\n      this.process = false;\n      const parser = new DOMParser();\n      const doc = parser.parseFromString(res, 'application/xml');\n      console.log(doc);\n      if (doc.getElementsByTagName('id').length > 0) {\n        const id = doc.getElementsByTagName('id').item(0);\n        const payment: Payment = { id: `${id.innerHTML}`, reference: this.order.ref, sector: merchantID.toString()};\n        this.order.payment = payment;\n        this.order.status = ORDERSTATUS.REG;\n        this.orderService.updateOrder(this.order);\n        if (this.tagid) {\n          console.log(`Update tag for tagid ${this.tagid}`);\n          this.tagService.setPayment(this.tagid, payment);\n        } else {\n          console.log('!No tag in the order!');\n        }\n        console.log(`Transaction ID ${id.innerHTML}`);\n        this.authorize(parseInt(id.innerHTML, 10));\n      }\n      });\n  }\n\n  authorize(id: number): void {\n    this.process = true;\n    this.value = 80; // progress spinner value\n\n    const url = 'https://us-central1-cloud-firestore-test-d95bf.cloudfunctions.net/authorize';\n    const data = {\n      sector: merchantID,\n      id: id,\n    };\n    this.http.post(url, data, { responseType: 'text' }).subscribe((res: string) => {\n      this.process = false;\n      this.order.status = ORDERSTATUS.AUTH;\n      this.orderService.updateOrder(this.order);\n      console.log(res);\n      window.location.assign(res);\n      });\n  }\n\n}\n","module.exports = \"\"","module.exports = \"<app-header [title]=\\\"'SMS confirmation'\\\"></app-header>\\n\\n\\n<form class=\\\"example-form\\\">\\n\\n  <mat-grid-list cols=\\\"3\\\" rowHeight=\\\"3em\\\">\\n\\n    <mat-grid-tile [rowspan]=\\\"3\\\" [colspan]=\\\"3\\\">\\n      <mat-form-field>\\n        <input matInput name=\\\"smscode\\\" type=\\\"text\\\" placeholder=\\\"Enter sms code\\\" required minlenght=\\\"6\\\" [(ngModel)]=\\\"smscode\\\">\\n      </mat-form-field>\\n    </mat-grid-tile>\\n\\n    <mat-grid-tile [colspan]=\\\"3\\\">\\n      {{msg}}\\n    </mat-grid-tile>\\n\\n    <mat-grid-tile>\\n      <button mat-raised-button color=\\\"primary\\\" [disabled]=\\\"!smscode || progress\\\" (click)=\\\"confirm($event)\\\">Confirm</button>\\n    </mat-grid-tile>\\n\\n    <mat-grid-tile>\\n\\n    </mat-grid-tile>\\n\\n    <mat-grid-tile>\\n      <button mat-raised-button color=\\\"warn\\\" [disabled]=\\\"!smscode || progress\\\" (click)=\\\"clear()\\\">Clear</button>\\n    </mat-grid-tile>\\n  \\n    <mat-grid-tile [colspan]=\\\"3\\\">\\n    </mat-grid-tile>\\n\\n  </mat-grid-list>\\n</form>\\n\\n\"","import { Component, OnInit, NgZone } from '@angular/core';\nimport { Router, ActivatedRoute, ParamMap } from '@angular/router';\nimport { TagService } from '../tag.service';\nimport { Tag, Registration } from '../tag';\nimport * as firebase from 'firebase/app';\nimport { AuthService } from '../auth.service';\n\n@Component({\n  selector: 'app-sms-confirmation',\n  templateUrl: './sms-confirmation.component.html',\n  styleUrls: ['./sms-confirmation.component.css']\n})\nexport class SmsConfirmationComponent implements OnInit {\n  mobile: string;\n  smscode: string;\n  msg: string;\n  progress: boolean;\n  page: string;\n\n  constructor(\n    private zone: NgZone,\n    private tagService: TagService,\n    private authService: AuthService,\n    private route: ActivatedRoute,\n    private router: Router\n    ) { }\n\n  ngOnInit() {\n    this.page = this.route.snapshot.paramMap.get('page');\n    console.log('PAGE ' + this.page);\n    if (!this.page) {\n      this.page = 'profile';\n    }\n    this.clear();\n    this.getMobile();\n  }\n\n  clear() {\n    this.smscode = null;\n    this.msg = null;\n    this.progress = false;\n  }\n\n  getMobile(): void {\n    this.mobile = this.route.snapshot.paramMap.get('mobile');\n  }\n\n  confirm(e: Event): void {\n    this.progress = true;\n    e.preventDefault();\n    e.stopPropagation();\n    this.authService.getConfirmation(this.smscode, (error, user) => {\n      if (error) {\n        this.msg = error;\n        this.progress = false;\n      } else {\n        console.log(user);\n        // registration is confirmed move to client profile\n        this.zone.run(() => this.router.navigate([`/${this.page}`]))\n          .then(() => console.log('SmsConfirmationComponent: confirm: navigated to profile'))\n          .catch((err) => console.error(err));\n      }\n    });\n  }\n\n}\n","module.exports = \".example-form {\\n    min-width: 150px;\\n    max-width: 500px;\\n    width: 100%;\\n}\\n  \\n.example-full-width {\\n    width: 100%;\\n}\\n  \\n.example-short {\\n    width: 30%;\\n}\\n  \\n.example-half {\\n    width: 50%;\\n}\\n  \\ntable {\\n    width: 100%;\\n  }\\n  \\n.mat-cell .mat-icon {\\n    -webkit-transform: scale(0.6);\\n            transform: scale(0.6);\\n}\"","module.exports = \"<app-header [title]=\\\"'Tag'\\\" [back]=\\\"true\\\"></app-header>\\n<mat-grid-list *ngIf=\\\"tags; else loading;\\\"cols=\\\"3\\\" rowHeight=\\\"3em\\\">\\n    \\n    \\n\\n    <mat-grid-tile  *ngIf=\\\"tags.length > 0\\\" [colspan]=\\\"3\\\">\\n        <h3>{{tags[0].id}}</h3>\\n      </mat-grid-tile>\\n\\n    <mat-grid-tile *ngIf=\\\"tags.length > 0\\\">\\n        Registered:\\n    </mat-grid-tile>\\n\\n    <mat-grid-tile [colspan]=\\\"2\\\" *ngIf=\\\"tags.length > 0\\\">\\n        {{tags[0].regDate}}\\n    </mat-grid-tile>\\n\\n    <mat-grid-tile *ngIf=\\\"tags.length > 0 && tags[0].reg\\\">\\n        Mobile:\\n    </mat-grid-tile>\\n\\n    <mat-grid-tile [colspan]=\\\"2\\\" *ngIf=\\\"tags.length > 0 && tags[0].reg\\\">\\n        {{tags[0].reg.mobile}}\\n    </mat-grid-tile>\\n\\n    <mat-grid-tile *ngIf=\\\"tags.length > 0 && tags[0].reg\\\">\\n        SMS code:\\n    </mat-grid-tile>\\n\\n    <mat-grid-tile [colspan]=\\\"2\\\" *ngIf=\\\"tags.length > 0 && tags[0].reg\\\">\\n        {{tags[0].reg.sms}}\\n    </mat-grid-tile>\\n\\n   \\n\\n    <mat-grid-tile [colspan]=\\\"3\\\" *ngIf=\\\"tags.length > 0 && tags[0].bike\\\">\\n        <button  mat-raised-button (click)=\\\"gotoBike()\\\" mat-button>&nbsp;Bycicle&nbsp;</button>\\n    </mat-grid-tile>\\n\\n    \\n  <mat-grid-tile [colspan]=\\\"3\\\" *ngIf=\\\"tags.length > 0 && tags[0].payment\\\">\\n      <button  mat-raised-button (click)=\\\"gotoPayment()\\\" mat-button>Payment</button>\\n  </mat-grid-tile>\\n    \\n</mat-grid-list>\\n\\n<div *ngIf=\\\"rides\\\">\\n    <table *ngIf=\\\"rides.length>0\\\" mat-table [dataSource]=\\\"rides | slice:start:end\\\" class=\\\"mat-elevation-z8\\\">\\n\\n        <!--- Note that these columns can be defined in any order.\\n              The actual rendered columns are set as a property on the row definition\\\" -->\\n      \\n        <!-- Position Column -->\\n        <ng-container matColumnDef=\\\"date\\\">\\n            <th mat-header-cell *matHeaderCellDef> Date </th>\\n            <td mat-cell *matCellDef=\\\"let element\\\"> {{element.start|date:\\\"dd-MM-yyyy\\\"}}</td>\\n          </ng-container>\\n\\n        <!-- Position Column -->\\n        <ng-container matColumnDef=\\\"start\\\">\\n          <th mat-header-cell *matHeaderCellDef> Start </th>\\n          <td mat-cell *matCellDef=\\\"let element\\\"> {{element.start|date:\\\"HH:mm:ss\\\"}}</td>\\n        </ng-container>\\n      \\n        <!-- Name Column -->\\n        <ng-container matColumnDef=\\\"finish\\\">\\n          <th mat-header-cell *matHeaderCellDef> Finish </th>\\n          <td mat-cell *matCellDef=\\\"let element\\\"> {{element.finish|date:\\\"HH:mm:ss\\\"}}</td>\\n        </ng-container>\\n      \\n        <!-- Weight Column -->\\n        <ng-container matColumnDef=\\\"time\\\">\\n          <th mat-header-cell *matHeaderCellDef> Time </th>\\n          <td mat-cell *matCellDef=\\\"let element\\\"> {{(element.finish-element.start)|date:\\\"HH:mm:ss\\\":\\\"+00\\\"}} </td>\\n        </ng-container>\\n\\n        <!-- Weight Column -->\\n        <ng-container matColumnDef=\\\"link\\\">\\n            <th mat-header-cell *matHeaderCellDef> Details </th>\\n            <td mat-cell *matCellDef=\\\"let element\\\"> <button (click)=\\\"gotoRide(element.id)\\\" mat-icon-button> <mat-icon>call_made</mat-icon></button> </td>\\n          </ng-container>\\n      \\n      \\n        <tr mat-header-row *matHeaderRowDef=\\\"displayedColumns\\\"></tr>\\n        <tr mat-row *matRowDef=\\\"let row; columns: displayedColumns;\\\"></tr>\\n      </table>\\n      <br>\\n      \\n  <mat-paginator *ngIf=\\\"rides.length>0\\\" [length]=\\\"rides.length\\\"\\n                [pageSize]=\\\"10\\\"\\n                [pageSizeOptions]=\\\"[1, 5, 10, 25, 100]\\\"\\n                (page)=\\\"setPage($event)\\\">\\n  </mat-paginator>\\n</div>\"","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { Location } from '@angular/common';\nimport { TagService } from '../tag.service';\nimport { Tag, Registration } from '../tag';\nimport { Ride } from '../ride';\nimport { RideService } from '../ride.service';\nimport { PageEvent } from '@angular/material';\n\n@Component({\n  selector: 'app-tag-detail',\n  templateUrl: './tag-detail.component.html',\n  styleUrls: ['./tag-detail.component.css']\n})\nexport class TagDetailComponent implements OnInit {\n  tags: Tag[];\n  rides: Ride[];\n  start: number;\n  end: number;\n\n  displayedColumns: string[] = ['date', 'start', 'finish', 'time', 'link'];\n\n  constructor(\n    private tagService: TagService,\n    private route: ActivatedRoute,\n    private location: Location,\n    private router: Router,\n    private rideService: RideService\n    ) {}\n\n  ngOnInit() {\n    this.start = 0;\n    this.end = 10;\n    this.getTag();\n  }\n\n  getTag(): void {\n    const id = this.route.snapshot.paramMap.get('id');\n    this.tagService.getTagById(id)\n      .subscribe(tags => this.tags = tags);\n    this.rideService.getRidesByTagId(id)\n      .subscribe(rides => this.rides = rides);\n  }\n\n  gotoTags(): void {\n    this.router.navigate([`/tags`]);\n  }\n\n  gotoBike(): void {\n    this.router.navigate([`/frame/${this.tags[0].id}/locked`]);\n  }\n\n  gotoBack(): void {\n    this.location.back();\n  }\n\n  gotoRide(id: number): void {\n    this.router.navigate([`/ride/${id}`]);\n  }\n\n  setPage(e: PageEvent): void {\n    console.log(e);\n    const { pageIndex, pageSize } = e;\n    this.start = pageIndex * pageSize;\n    this.end = this.start + pageSize;\n  }\n\n  gotoPayment(): void {\n    if (!this.tags || this.tags.length === 0) {\n      return;\n    }\n    const payment = this.tags[0].payment;\n    this.router.navigate([`/order/${payment.reference}`]);\n  }\n\n}\n","module.exports = \"\"","module.exports = \"<div *ngIf=\\\"tags; else loading\\\">\\n    <h2 *ngIf=\\\"tags.length === 0\\\">Tag not found</h2>\\n    <div *ngIf=\\\"tags.length > 0\\\">\\n      <h2>Tag Registration</h2>\\n      <div><span>id: </span>{{tags[0].id}}</div>\\n    </div>\\n    <br><br>\\n\\n    <form class=\\\"example-form\\\">\\n      <table class=\\\"example-half\\\" cellspacing=\\\"0\\\">\\n        <tr>\\n          <td>\\n            <mat-form-field>\\n              <input matInput name=\\\"smscode\\\" type=\\\"text\\\" placeholder=\\\"Enter sms code\\\" required minlength=\\\"4\\\" [(ngModel)]=\\\"smscode\\\">\\n            </mat-form-field>\\n          </td>\\n        </tr>\\n        <tr *ngIf=\\\"msg\\\">\\n          <td>\\n            {{msg}}\\n          </td>\\n        </tr>\\n        <tr>\\n          <td>\\n            <button mat-raised-button color=\\\"primary\\\" [disabled]=\\\"!smscode || registered || progress\\\" (click)=\\\"confirm($event)\\\">Confirm</button>\\n          </td>\\n          <td>\\n            <button mat-raised-button color=\\\"warn\\\" [disabled]=\\\"!smscode || registered || progress\\\" (click)=\\\"gotoBack()\\\">Cancel</button>\\n          </td>\\n        </tr>\\n      </table>\\n    </form>\\n</div>\\n\"","import { Component, OnInit } from '@angular/core';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { TagService } from '../tag.service';\nimport { Tag, Registration } from '../tag';\nimport { Location } from '@angular/common';\nimport { AuthService } from '../auth.service';\nimport { Wallet } from '../wallet';\n\n@Component({\n  selector: 'app-tag-reg-sms',\n  templateUrl: './tag-reg-sms.component.html',\n  styleUrls: ['./tag-reg-sms.component.css'],\n})\nexport class TagRegSmsComponent implements OnInit {\n  tags: Tag[];\n  smscode: string;\n  msg: string;\n  recaptchaVerifier: any;\n  registered: boolean;\n  progress: boolean;\n  tagid: string;\n  mobile: string;\n\n  constructor(\n    private tagService: TagService,\n    private authService: AuthService,\n    private route: ActivatedRoute,\n    private location: Location,\n    private router: Router\n    ) {}\n\n  ngOnInit() {\n    this.getTag();\n    this.clear();\n  }\n  clear() {\n    this.smscode = null;\n    this.msg = null;\n    this.registered = false;\n    this.progress = false;\n  }\n\n  getTag(): void {\n    this.tagid = this.route.snapshot.paramMap.get('id');\n    this.mobile = this.route.snapshot.paramMap.get('mobile');\n    this.tagService.getTagById(this.tagid)\n      .subscribe(tags => this.tags = tags);\n  }\n\n  gotoBack(): void {\n    this.router.navigate([`/reg`]);\n  }\n\n  confirm(e: Event): void {\n    this.progress = true;\n    e.preventDefault();\n    e.stopPropagation();\n\n    const reg: Registration = {\n      mobile: this.mobile,\n      sms: '******'\n    };\n\n    this.authService.getConfirmation(this.smscode, (error, user) => {\n      if (error) {\n        this.msg = error;\n        this.progress = false;\n      } else {\n        console.log(user);\n        // registration is confirmed\n        if (this.tags[0]) {\n          console.log(`TagRegSmsComponent: confirm: seting reg date for ${this.tags[0].id}`);\n          this.tagService.setRegDate(this.tags[0].id, (err, doc) => {\n            if (err) {\n              this.msg = err;\n              this.progress = false;\n              this.registered = false;\n            } else {\n              this.msg = `Tag registration date updated`;\n              this.progress = false;\n              this.registered = true;\n              this.router.navigate([`/shoppingtag/${this.tagid}`]);\n              // this.router.navigate([`/profile`]);\n              // this.router.navigate([`/frame/${this.tagid}`]);\n            }\n          });\n        } else {\n          console.log(`TagRegSmsComponent: confirm: adding new tag with id ${this.tagid}`);\n          this.tagService.setRegistration(this.tagid, null, reg);\n          this.msg = `Tag is registered`;\n          this.progress = false;\n          this.registered = true;\n          this.router.navigate([`/shoppingtag/${this.tagid}`]);\n          // this.router.navigate([`/frame/${this.tagid}`]);\n          // this.router.navigate([`/profile`]);\n        }\n      }\n    });\n  }\n}\n","module.exports = \"h4 {\\n    text-align: center;\\n  }\\n\\np {\\n    text-align: center;\\n}\"","module.exports = \"<app-header [title]=\\\"'Tag registration'\\\" [back]=\\\"true\\\"></app-header>\\n<mat-grid-list cols=\\\"3\\\" rowHeight=\\\"3em\\\">\\n\\n\\n\\n  <mat-grid-tile [colspan]=\\\"3\\\" [rowspan]=\\\"2\\\">\\n    <h4 >Please enter mobile phone number and unique tag ID to recieve SMS registration code</h4>\\n  </mat-grid-tile>\\n  <mat-grid-tile [colspan]=\\\"3\\\">\\n    <h4>Don't have a tag?</h4> \\n  </mat-grid-tile>\\n\\n  <mat-grid-tile></mat-grid-tile>\\n\\n  <mat-grid-tile >\\n      <button (click)=\\\"generate()\\\" mat-icon-button>\\n          <mat-icon>get_app</mat-icon>\\n        </button>\\n  </mat-grid-tile>\\n\\n  <mat-grid-tile></mat-grid-tile>\\n    \\n</mat-grid-list>\\n\\n<form class=\\\"example-form\\\">\\n\\n  <mat-grid-list cols=\\\"3\\\" rowHeight=\\\"3em\\\">\\n\\n    <mat-grid-tile [rowspan]=\\\"2\\\" [colspan]=\\\"3\\\">\\n      <mat-form-field>\\n        <input matInput name=\\\"tagid\\\" type=\\\"text\\\" placeholder=\\\"Enter tag id\\\" required minlength=\\\"14\\\" [(ngModel)]=\\\"tagid\\\">\\n        <mat-hint align=\\\"start\\\">Example: <strong>12345678901234</strong> </mat-hint>\\n      </mat-form-field>\\n    </mat-grid-tile>\\n\\n    <mat-grid-tile [rowspan]=\\\"2\\\" [colspan]=\\\"3\\\">\\n      <mat-form-field>\\n        <input matInput name=\\\"mobile\\\" type=\\\"text\\\" placeholder=\\\"Enter mobile\\\" required minlenght=\\\"7\\\" [(ngModel)]=\\\"mobile\\\">\\n        <mat-hint align=\\\"start\\\">Example: <strong>+16505551234</strong> </mat-hint>\\n      </mat-form-field>\\n    </mat-grid-tile>\\n\\n    <mat-grid-tile [colspan]=\\\"3\\\">\\n      {{msg}}\\n    </mat-grid-tile>\\n\\n    <mat-grid-tile>\\n        <button mat-raised-button color=\\\"primary\\\" [disabled]=\\\"!tagid || !mobile || progress\\\" (click)=\\\"reg($event)\\\">Register</button>\\n    </mat-grid-tile>\\n\\n    <mat-grid-tile>\\n\\n    </mat-grid-tile>\\n\\n    <mat-grid-tile>\\n        <button mat-raised-button color=\\\"warn\\\" [disabled]=\\\"!tagid || !mobile || progress\\\" (click)=\\\"clear()\\\">Clear</button>\\n    </mat-grid-tile>\\n  \\n    <mat-grid-tile [colspan]=\\\"3\\\">\\n    </mat-grid-tile>\\n\\n  </mat-grid-list>\\n</form>\\n\\n<div id=\\\"recaptcha-container\\\"></div>\"","import { Component, OnInit, AfterViewInit, NgZone } from '@angular/core';\nimport { Router, ActivatedRoute, ParamMap } from '@angular/router';\nimport { TagService } from '../tag.service';\nimport { Tag, Registration } from '../tag';\nimport * as firebase from 'firebase/app';\nimport { AuthService } from '../auth.service';\nimport { Location } from '@angular/common';\n\n@Component({\n  selector: 'app-tag-registration',\n  templateUrl: './tag-registration.component.html',\n  styleUrls: ['./tag-registration.component.css'],\n})\nexport class TagRegistrationComponent implements OnInit, AfterViewInit {\n  tagid: string;\n  mobile: string;\n  msg: string;\n  recaptchaVerifier: any;\n  progress: boolean;\n\n  constructor(\n    private zone: NgZone,\n    private tagService: TagService,\n    private authService: AuthService,\n    private route: ActivatedRoute,\n    private router: Router,\n    private location: Location\n    ) { }\n\n  ngAfterViewInit() {\n    // Called after ngAfterContentInit when the component's view has been initialized. Applies to components only.\n    // Add 'implements AfterViewInit' to the class.\n    this.recaptchaVerifier = new firebase.auth.RecaptchaVerifier('recaptcha-container');\n  }\n\n  ngOnInit() {\n    this.clear();\n  }\n  clear() {\n    this.tagid = null;\n    this.mobile = null;\n    this.msg = null;\n    this.progress = false;\n  }\n\n  reg(e: Event) {\n    this.progress = true;\n    e.preventDefault();\n    e.stopPropagation();\n    this.authService.signInWithPhoneNumber(this.mobile, this.recaptchaVerifier, (error, confirmationResult) => {\n      if (error) {\n        console.error(`TagRegistrationComponent: reg: ${error}`);\n        this.msg = error;\n        this.progress = false;\n      } else {\n        // I've got a confirmation object, lets go to the SMS confirmation screen\n        // Need to use NgZone.run to go back to Angular zone exec env\n        this.zone.run(() => this.router.navigate([`/regsms/${this.tagid}/${this.mobile}`]))\n          .then(() => console.log('TagRegistrationComponent: reg: navigated to regsms'))\n          .catch((err) => console.error(err));\n        console.log(`TagRegistrationComponent: reg: confirmation for ${this.mobile}`);\n        console.log(confirmationResult);\n      }\n    });\n  }\n\n  gotoBack(): void {\n    this.location.back();\n  }\n\n  generate(): void {\n    let tagid = Math.random();\n    tagid = tagid * 1e14;\n    tagid = Math.floor(tagid);\n    this.tagid = tagid.toString();\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { AngularFirestore, AngularFirestoreCollection, QuerySnapshot, CollectionReference } from '@angular/fire/firestore';\nimport { Observable, BehaviorSubject, combineLatest  } from 'rxjs';\nimport { switchMap } from 'rxjs/operators';\nimport { Tag, Registration } from './tag';\nimport { DatePipe } from '@angular/common';\nimport { Bike } from './rider';\nimport { Payment } from './order';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class TagService {\n  db: AngularFirestore;\n  tags: Observable<Tag[]>;\n  tag: Observable<Tag[]>;\n  userTags: Observable<Tag[]>;\n  dateTags: Observable<Tag[]>;\n  number$: BehaviorSubject<number|null>;\n  start$: BehaviorSubject<string|null>;\n  order$: BehaviorSubject<string|null>;\n  where$: BehaviorSubject<string|null>;\n  mobile$: BehaviorSubject<string|null>;\n  date$: BehaviorSubject<string|null>;\n\n  constructor(private datePipe: DatePipe, db: AngularFirestore) {\n    this.db = db;\n    this.number$ = new BehaviorSubject(1000);\n    this.start$ = new BehaviorSubject(null);\n    this.order$ = new BehaviorSubject('id');\n    this.tags = combineLatest(this.number$, this.start$, this.order$).pipe(\n      switchMap(([num, start, order]) =>\n        db.collection<Tag>('tags', ref => {\n        let query: firebase.firestore.CollectionReference | firebase.firestore.Query = ref;\n        if (num) { query = query.limit(num); }\n        if (order) { query = query.orderBy(order); if (start) { query = query.startAt(start); } }\n        return query;\n        }).valueChanges()\n    ));\n\n    this.where$ = new BehaviorSubject(null);\n    this.tag = combineLatest(this.where$).pipe(\n      switchMap(([where]) =>\n        db.collection<Tag>('tags', ref => {\n        let query: firebase.firestore.CollectionReference | firebase.firestore.Query = ref;\n        if (where) { query = query.where('id', '==', where); }\n        query = query.limit(1);\n        return query;\n        }).valueChanges()\n    ));\n\n    this.mobile$ = new BehaviorSubject(null);\n    this.userTags = combineLatest(this.mobile$).pipe(\n      switchMap(([mobile]) =>\n        db.collection<Tag>('tags', ref => {\n        let query: firebase.firestore.CollectionReference | firebase.firestore.Query = ref;\n        query = query.where('reg.mobile', '==', mobile);\n        return query;\n        }).valueChanges()\n    ));\n\n    this.date$ = new BehaviorSubject(null);\n    this.dateTags = combineLatest(this.date$).pipe(\n      switchMap(([date]) =>\n        db.collection<Tag>('tags', ref => {\n        let query: firebase.firestore.CollectionReference | firebase.firestore.Query = ref;\n        query = query.where('regDate', '==', date);\n        return query;\n        }).valueChanges()\n    ));\n  }\n\n  getTagById(id: string): Observable<Tag[]> {\n    this.where$.next(id);\n    return this.tag;\n  }\n\n  getTagByIdCB(id: string, cb: Function): void {\n    this.db.collection('tags').ref.where('id', '==', id)\n      .get()\n        .then(function(querySnapshot) {\n          if (querySnapshot.empty) {\n            cb(null);\n          } else {\n            cb(querySnapshot.docs[0]);\n          }\n        });\n  }\n\n  getTagsByMobile(mobile: string): Observable<Tag[]> {\n    this.mobile$.next(mobile);\n    return this.userTags;\n  }\n\n  getTagsByDate(date: string): Observable<Tag[]> {\n    console.log(`TagService: get tags by date: ${date}`);\n    this.date$.next(date);\n    return this.dateTags;\n  }\n\n  addNewTag(tag: Tag): void {\n    this.db.collection('tags').ref.where('id', '==', tag.id)\n      .get()\n        .then((querySnapshot) => {\n          if (querySnapshot.empty) {\n            console.log(`TagService: addNewTag: adding new tag for id: ${tag.id}`);\n            this.db.collection('tags').add(tag);\n          } else {\n            console.log(`TagService: addNewTag: tag has found with id: ${tag.id}. Can't add new tag`);\n          }\n        });\n  }\n\n  setRegistration(id: string, docRef: string, reg: Registration): void {\n    const regDate = this.datePipe.transform(new Date(), 'dd-MM-yy');\n    if (docRef) {\n      console.log(`TagService: update tag ref: ${docRef} and id: ${id}`);\n      this.db.collection('tags').doc(docRef).update({ reg });\n    } else {\n      console.log(`TagService: add new tag ${id}`);\n      this.db.collection('tags').add({ id, regDate, reg });\n    }\n  }\n\n  setRegDate(id: string, cb: Function): void {\n    this.db.collection('tags').ref.where('id', '==', id)\n      .get()\n        .then((querySnapshot) => {\n          if (querySnapshot.empty) {\n            console.error(`TagService: setRegDate: tag not found for id ${id}`);\n            cb(`TagService: setRegDate: tag not found for id ${id}`, null);\n          } else {\n            const doc = querySnapshot.docs[0];\n            const regDate = this.datePipe.transform(new Date(), 'dd-MM-yy');\n            // update tag doc\n            console.log(`TagService: setRegDate: set regDate: ${regDate} for id: ${id}`);\n            this.db.collection('tags').doc(doc.id).update({ regDate });\n            cb(null, doc);\n          }\n        });\n  }\n\n  setBike(id: string, bike: Bike): void {\n    this.db.collection('tags').ref.where('id', '==', id)\n      .get()\n        .then((querySnapshot) => {\n          if (querySnapshot.empty) {\n            console.error(`TagService: setBike: tag not found for id ${id}`);\n          } else {\n            const doc = querySnapshot.docs[0];\n            // update tag doc\n            console.log(`TagService: setBike: set bike field for id: ${id}`);\n            console.log(bike);\n            this.db.collection('tags').doc(doc.id).update({ bike });\n          }\n        });\n  }\n\n  setPayment(id: string, payment: Payment): void {\n    this.db.collection('tags').ref.where('id', '==', id)\n      .get()\n        .then((querySnapshot) => {\n          if (querySnapshot.empty) {\n            console.error(`TagService: setPayment: tag not found for id ${id}`);\n          } else {\n            const doc = querySnapshot.docs[0];\n            // update tag doc\n            console.log(`TagService: setPayment: set payment field for id: ${id}`);\n            console.log(payment);\n            this.db.collection('tags').doc(doc.id).update({ payment });\n          }\n        });\n  }\n\n  getTags(): Observable<Tag[]> {\n    return this.tags;\n  }\n\n  setNumber(num: number|null) {\n    this.number$.next(num);\n  }\n\n  setStart(start: string|null) {\n    this.start$.next(start);\n  }\n\n  setOrder(order: string|null) {\n    this.order$.next(order);\n  }\n}\n","module.exports = \"table {\\n    width: 100%;\\n  }\\n\\n.mat-cell .mat-icon {\\n    -webkit-transform: scale(0.6);\\n            transform: scale(0.6);\\n}\\n\\n.payment {\\n  color: gold;\\n}\\n\\n.bike {\\n  color: green;\\n}\\n\\n.error {\\n  color: red;\\n}\\n\\n.test {\\n  color: gray;\\n}\"","module.exports = \"<app-header [back]=\\\"true\\\" [title]=\\\"'Tags'\\\"></app-header>\\n\\n<div *ngIf=\\\"tags\\\">\\n  <br>\\n  <div fxLayout=\\\"row\\\" fxLayoutWrap=\\\"wrap\\\" fxLayoutAlign=\\\"start center\\\">\\n    <mat-expansion-panel>\\n      <mat-expansion-panel-header>\\n        <mat-panel-title>\\n          <mat-icon>search</mat-icon>\\n        </mat-panel-title>\\n        <mat-panel-description>\\n          Enter search critaria\\n        </mat-panel-description>\\n      </mat-expansion-panel-header>\\n      <mat-form-field>\\n        <input matInput [value]=\\\"date\\\" [matDatepicker]=\\\"picker\\\" placeholder=\\\"Choose a date\\\" (dateChange)=\\\"handleDateInput($event.value)\\\">\\n        <mat-datepicker-toggle matSuffix [for]=\\\"picker\\\"></mat-datepicker-toggle>\\n        <mat-datepicker #picker startView=\\\"month\\\" [startAt]=\\\"startDate\\\"></mat-datepicker>\\n      </mat-form-field>\\n      &nbsp;&nbsp;\\n      <mat-form-field>\\n          <input matInput name=\\\"mobile\\\" type=\\\"text\\\" placeholder=\\\"or mobile\\\" [(ngModel)]=\\\"mobile\\\" (change)=\\\"handleMobileInput($event.target.value)\\\">\\n        </mat-form-field>\\n        \\n    \\n            <button (click)=\\\"clearDate()\\\" mat-icon-button>\\n                <mat-icon>close</mat-icon>\\n              </button>\\n      </mat-expansion-panel>\\n    \\n  </div>\\n  <br>\\n\\n  <table *ngIf=\\\"tags.length>0\\\" mat-table [dataSource]=\\\"tags | slice:start:end\\\" class=\\\"mat-elevation-z8\\\">\\n\\n      <!--- Note that these columns can be defined in any order.\\n            The actual rendered columns are set as a property on the row definition\\\" -->\\n    \\n      \\n\\n      <!-- Position Column -->\\n\\n      <ng-container matColumnDef=\\\"status\\\">\\n          <th mat-header-cell *matHeaderCellDef> </th>\\n          <td mat-cell *matCellDef=\\\"let element\\\"> <mat-icon [ngClass]=\\\"status(element)\\\">radio_button_checked</mat-icon></td>\\n        </ng-container>\\n\\n      <ng-container matColumnDef=\\\"id\\\">\\n        <th mat-header-cell *matHeaderCellDef> ID </th>\\n        <td mat-cell *matCellDef=\\\"let element\\\"> {{showTagId(element.id)}}</td>\\n      </ng-container>\\n\\n      <!-- Position Column -->\\n      <ng-container matColumnDef=\\\"date\\\">\\n        <th mat-header-cell *matHeaderCellDef> Date </th>\\n        <td mat-cell *matCellDef=\\\"let element\\\"> {{element.regDate}}</td>\\n      </ng-container>\\n    \\n      <!-- Name Column -->\\n      <ng-container matColumnDef=\\\"mobile\\\">\\n        <th mat-header-cell *matHeaderCellDef> Mobile </th>\\n        <td mat-cell *matCellDef=\\\"let element\\\"> {{showMobile(element.reg.mobile)}}</td>\\n      </ng-container>\\n    \\n\\n      <!-- Weight Column -->\\n      <ng-container matColumnDef=\\\"link\\\">\\n          <th mat-header-cell *matHeaderCellDef> Details </th>\\n          <td mat-cell *matCellDef=\\\"let element\\\"> <button (click)=\\\"gotoTagById(element)\\\" mat-icon-button> <mat-icon>call_made</mat-icon></button> </td>\\n        </ng-container>\\n    \\n    \\n      <tr mat-header-row *matHeaderRowDef=\\\"displayedColumns\\\"></tr>\\n      <tr mat-row *matRowDef=\\\"let row; columns: displayedColumns;\\\"></tr>\\n    </table>\\n    <br>\\n    \\n<mat-paginator *ngIf=\\\"tags.length>0\\\" [length]=\\\"tags.length\\\"\\n              [pageSize]=\\\"10\\\"\\n              [pageSizeOptions]=\\\"[1, 5, 10, 25, 100]\\\"\\n              (page)=\\\"setPage($event)\\\">\\n</mat-paginator>\\n</div>\\n\\n\"","import { Component, OnInit } from '@angular/core';\nimport { Router, ActivatedRoute, ParamMap } from '@angular/router';\nimport { PageEvent } from '@angular/material';\nimport { TagService } from '../tag.service';\nimport { Tag } from '../tag';\nimport { DatePipe } from '@angular/common';\n\n@Component({\n  selector: 'app-tags',\n  templateUrl: './tags.component.html',\n  styleUrls: ['./tags.component.css']\n})\nexport class TagsComponent implements OnInit {\n  tags: Tag[];\n  start: number;\n  end: number;\n  date: Date;\n  startDate: Date;\n  mobile: string;\n\n  displayedColumns: string[] = ['status', 'id', 'date', 'mobile', 'link'];\n\n  constructor(private tagService: TagService, private route: ActivatedRoute, private router: Router, private datePipe: DatePipe) {}\n\n  ngOnInit() {\n    this.getTags();\n    this.clear();\n    this.startDate = new Date();\n  }\n\n  filterDate(): void {\n    const regDate = this.datePipe.transform(this.date, 'dd-MM-yy');\n    const result = [];\n    for (let i = 0; i < this.tags.length; i++) {\n      if (this.tags[i].regDate === regDate) {\n        result.push(this.tags[i]);\n      }\n    }\n    this.tags = result;\n  }\n\n  handleDateInput(date: any): void {\n    console.log(date);\n    this.date = date;\n    if (!this.mobile) {\n      this.tagService.getTagsByDate(this.datePipe.transform(date, 'dd-MM-yy')).subscribe(tags => this.tags = tags);\n    } else {\n      this.tagService.getTagsByMobile(this.mobile).subscribe(tags => {\n        this.tags = tags;\n        if (this.date) {\n          this.filterDate();\n        }\n      });\n    }\n  }\n\n  status(tag: Tag): string {\n    if (tag.payment && tag.bike) {\n      return 'bike';\n    } else if (tag.bike && !tag.payment) {\n      return 'error';\n    } else if (!tag.bike && tag.payment) {\n      return 'payment';\n    } else {\n      return 'test';\n    }\n  }\n\n  handleMobileInput(mobile: string): void {\n    console.log(mobile);\n    this.tagService.getTagsByMobile(mobile).subscribe(tags => {\n      this.tags = tags;\n      if (this.date) {\n        this.filterDate();\n      }\n    });\n  }\n\n  clear() {\n    this.start = 0;\n    this.end = 10;\n    this.date = undefined;\n    this.mobile = undefined;\n  }\n\n  clearDate() {\n    this.date = undefined;\n    this.mobile = undefined;\n    this.getTags();\n  }\n\n  getTags(): void {\n    this.tagService.getTags()\n        .subscribe(tags => this.tags = tags);\n  }\n\n  gotoTagById(tag: Tag): void {\n    const tagId = tag ? tag.id : null;\n    this.router.navigate([`/tag/${tagId}`]);\n  }\n\n  setPage(e: PageEvent): void {\n    console.log(e);\n    const { pageIndex, pageSize } = e;\n    this.start = pageIndex * pageSize;\n    this.end = this.start + pageSize;\n  }\n\n  showMobile(mobile: string): string {\n    const start = mobile.length - 7;\n    if (start < 0) {\n      return mobile;\n    } else {\n      return `${mobile.slice(start, start + 3)}-${mobile.slice(start + 3, start + 5)}-${mobile.slice(start + 5)}`;\n    }\n  }\n\n  showTagId(id: string): string {\n    const start = id.length - 4;\n    if (id.length > 7) {\n      return `${id.slice(0, 3)}...${id.slice(start)}`;\n    } else {\n      return id;\n    }\n  }\n}\n","module.exports = \"\"","module.exports = \"<app-header [title]=\\\"'Transaction'\\\" [back]=\\\"true\\\"></app-header>\\n\\n<mat-grid-list *ngIf=\\\"transaction | async; else loading;\\\"cols=\\\"3\\\" rowHeight=\\\"3em\\\">\\n    \\n\\n    <mat-grid-tile>A/C from:</mat-grid-tile>\\n\\n    <mat-grid-tile>\\n        <button mat-stroked-button ngxClipboard [cbContent]=\\\"tnx.from\\\">{{tnx.from.slice(0,6)+'...'+tnx.from.slice(36,42)}}</button>\\n    </mat-grid-tile>\\n\\n    <mat-grid-tile></mat-grid-tile>\\n\\n    <mat-grid-tile>A/C to:</mat-grid-tile>\\n\\n    <mat-grid-tile>\\n        <button mat-stroked-button ngxClipboard [cbContent]=\\\"tnx.to\\\">{{tnx.to.slice(0,5)+'...'+tnx.to.slice(37,42)}}</button>\\n    </mat-grid-tile>\\n\\n    <mat-grid-tile></mat-grid-tile>\\n\\n    <mat-grid-tile>Tnx #:</mat-grid-tile>\\n\\n    <mat-grid-tile>{{tnx.nonce}}</mat-grid-tile>\\n\\n    <mat-grid-tile></mat-grid-tile>\\n\\n    <mat-grid-tile>Block #:</mat-grid-tile>\\n\\n    <mat-grid-tile>{{tnx.block}}</mat-grid-tile>\\n\\n    <mat-grid-tile></mat-grid-tile>\\n\\n    <mat-grid-tile>Value:</mat-grid-tile>\\n\\n    <mat-grid-tile>{{tnx.value}}</mat-grid-tile>\\n\\n    <mat-grid-tile></mat-grid-tile>\\n\\n    <mat-grid-tile>Points:</mat-grid-tile>\\n\\n    <mat-grid-tile>{{tnx.points}}</mat-grid-tile>\\n\\n    <mat-grid-tile></mat-grid-tile>\\n\\n    <mat-grid-tile>Blockchain:</mat-grid-tile>\\n\\n    <mat-grid-tile>{{tnx.chainId}}</mat-grid-tile>\\n\\n    <mat-grid-tile></mat-grid-tile>\\n    \\n    <mat-grid-tile [colspan]=\\\"3\\\"><a [href]=\\\"'https://rinkeby.etherscan.io/tx/'+tnx.hash\\\">See this transaction on Etherscan.io</a></mat-grid-tile>\\n\\n\\n</mat-grid-list>\"","import { Component, OnInit, OnDestroy, AfterViewInit, NgZone } from '@angular/core';\nimport { Router, ActivatedRoute, ParamMap } from '@angular/router';\nimport { Location } from '@angular/common';\n\nimport { AuthService } from '../auth.service';\n\nimport { Subscription, Observable, timer } from 'rxjs';\nimport { Transaction } from '../transaction';\nimport { TransactionService } from '../transaction.service';\n\n@Component({\n  selector: 'app-tnx-detail',\n  templateUrl: './tnx-detail.component.html',\n  styleUrls: ['./tnx-detail.component.css']\n})\nexport class TnxDetailComponent implements OnInit {\n  hash: string;\n  transaction: Observable<Transaction[]>;\n  tnx: Transaction;\n\n  constructor(\n    private route: ActivatedRoute,\n    private location: Location,\n    private router: Router,\n    private authService: AuthService,\n    private tnxService: TransactionService\n    ) {}\n\n  ngOnInit() {\n    this.hash = this.route.snapshot.paramMap.get('hash');\n    this.transaction = this.tnxService.getTransaction(this.hash);\n    this.transaction.subscribe((transactions) => this.tnx = transactions[0]);\n  }\n\n\n  gotoBack(): void {\n    this.location.back();\n  }\n\n}\n","import { Injectable } from '@angular/core';\nimport { AngularFirestore } from '@angular/fire/firestore';\nimport { Observable, BehaviorSubject, combineLatest  } from 'rxjs';\nimport { switchMap } from 'rxjs/operators';\nimport { DatePipe } from '@angular/common';\nimport { Transaction } from './transaction';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class TransactionService {\n  db: AngularFirestore;\n\n  transactions: Observable<Transaction[]>;\n  transaction: Observable<Transaction[]>;\n\n  where$: BehaviorSubject<string|null>;\n  hash$: BehaviorSubject<string|null>;\n\n  constructor(private datePipe: DatePipe, db: AngularFirestore) {\n    this.db = db;\n    this.where$ = new BehaviorSubject(null);\n    this.transactions = combineLatest(this.where$).pipe(\n      switchMap(([where]) =>\n        db.collection<Transaction>('transactions', ref => {\n        let query: firebase.firestore.CollectionReference | firebase.firestore.Query = ref;\n        if (where) { query = query.where('from', '==', where); }\n        query = query.orderBy('nonce', 'desc');\n        return query;\n        }).valueChanges()\n    ));\n\n    this.hash$ = new BehaviorSubject(null);\n    this.transaction = combineLatest(this.hash$).pipe(\n      switchMap(([hash]) =>\n        db.collection<Transaction>('transactions', ref => {\n        let query: firebase.firestore.CollectionReference | firebase.firestore.Query = ref;\n        if (hash) { query = query.where('hash', '==', hash); }\n        query = query.limit(1);\n        return query;\n        }).valueChanges()\n    ));\n  }\n\n  getAccountTransactions(account: string): Observable<Transaction[]> {\n    this.where$.next(account);\n    return this.transactions;\n  }\n\n  getTransaction(hash: string): Observable<Transaction[]> {\n    this.hash$.next(hash);\n    return this.transaction;\n  }\n\n  addTransaction(tnx: Transaction): void {\n    this.db.collection('transactions').add(tnx)\n      .then(ref => console.log)\n      .catch(error => console.error);\n  }\n\n  updateTransaction(tnx: Transaction): void {\n    this.db.collection('transactions').ref.where('hash', '==', tnx.hash)\n      .get()\n        .then((querySnapshot) => {\n          if (querySnapshot.empty) {\n            console.error(`Transaction hash ${tnx.hash} is not found`);\n          } else {\n            const doc = querySnapshot.docs[0];\n            this.db.collection('transactions').doc(doc.id).update(tnx);\n          }\n        })\n        .catch(error => console.error);\n\n  }\n}\n","module.exports = \".example-h2 {\\n    margin: 10px;\\n  }\\n  \\n  .example-section {\\n    display: flex;\\n    align-content: center;\\n    align-items: center;\\n    height: 60px;\\n  }\\n  \\n  .example-margin {\\n    margin: 10px;\\n  }\\n  \\n  .mat-slider-horizontal {\\n    width: 300px;\\n  }\\n  \\n  .mat-slider-vertical {\\n    height: 300px;\\n  }\\n  \"","module.exports = \"<app-header *ngIf=\\\"!scanning\\\" [back]=\\\"true\\\" [title]=\\\"'Use points'\\\"></app-header>\\n\\n<mat-grid-list *ngIf=\\\"!scanning\\\" cols=\\\"3\\\" rowHeight=\\\"3em\\\">\\n    \\n    \\n\\n    <mat-grid-tile [colspan]=\\\"3\\\"><h4>From</h4></mat-grid-tile>\\n    <mat-grid-tile [colspan]=\\\"3\\\">{{account}}</mat-grid-tile>\\n    <mat-grid-tile [colspan]=\\\"3\\\"><h4>To</h4></mat-grid-tile>\\n    <mat-grid-tile *ngIf=\\\"dest\\\" [colspan]=\\\"3\\\">{{dest}}</mat-grid-tile>\\n    <mat-grid-tile></mat-grid-tile>\\n    <mat-grid-tile>\\n        <button mat-raised-button color=\\\"accent\\\" [disabled]=\\\"process\\\" (click)=\\\"scan()\\\">Scan QR</button>\\n    </mat-grid-tile>\\n    <mat-grid-tile></mat-grid-tile>\\n    <mat-grid-tile [colspan]=\\\"3\\\"><h4>Number</h4></mat-grid-tile>\\n    <mat-grid-tile [colspan]=\\\"3\\\">{{value}}</mat-grid-tile>\\n    <mat-grid-tile [rowspan]=\\\"2\\\" [colspan]=\\\"3\\\">\\n      <mat-slider [min]=\\\"0\\\" [max]=\\\"points\\\" thumbLabel=\\\"1\\\" showTicks=\\\"1\\\" step=\\\"1\\\" [(ngModel)]=\\\"value\\\"></mat-slider>\\n    </mat-grid-tile>\\n    \\n    <mat-grid-tile></mat-grid-tile>\\n    <mat-grid-tile>\\n        <button mat-raised-button color=\\\"accent\\\" [disabled]=\\\"!value || process || invalid\\\" (click)=\\\"confirm()\\\">Confirm</button>\\n    </mat-grid-tile>\\n    <mat-grid-tile></mat-grid-tile>\\n  \\n</mat-grid-list>\\n\\n<mat-grid-list *ngIf=\\\"scanning\\\" cols=\\\"3\\\" rowHeight=\\\"3em\\\">\\n    \\n    <mat-grid-tile>\\n      \\n    </mat-grid-tile>\\n\\n    <mat-grid-tile><h3>Scanner</h3></mat-grid-tile>\\n\\n    <mat-grid-tile>\\n      <button (click)=\\\"close()\\\" mat-icon-button>\\n        <mat-icon>close</mat-icon>\\n      </button>\\n    </mat-grid-tile>\\n  \\n</mat-grid-list>\\n\\n<zxing-scanner [formats]=\\\"['QR_CODE', 'EAN_13', 'CODE_128', 'CODABAR', 'UPC_A', 'UPC_E', 'UPC_EAN_EXTENSION', 'CODE_39', 'ITF']\\\" *ngIf=\\\"scanning\\\" #scanner (camerasFound)=\\\"camerasFoundHandler($event)\\\" (scanComplete)=\\\"scanCompleteHandler($event)\\\"></zxing-scanner>\"","import { Component, OnInit, ViewChild, ElementRef } from '@angular/core';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { TagService } from '../tag.service';\nimport { Tag, Registration } from '../tag';\nimport { Location } from '@angular/common';\nimport { AuthService } from '../auth.service';\nimport { Wallet } from '../wallet';\nimport { EthcontractService } from '../ethereum/ethcontract.service';\nimport { ZXingScannerComponent } from '@zxing/ngx-scanner';\nimport { Result } from '@zxing/library';\n\n@Component({\n  selector: 'app-use-points',\n  templateUrl: './use-points.component.html',\n  styleUrls: ['./use-points.component.css']\n})\nexport class UsePointsComponent implements OnInit {\n  account: string;\n  dest: string;\n  points: string;\n  value: number;\n  process: boolean;\n  scanning: boolean;\n  qr_code: string;\n  invalid: boolean;\n\n  @ViewChild('scanner') scanner: ZXingScannerComponent;\n\n  constructor(\n    private tagService: TagService,\n    private authService: AuthService,\n    private route: ActivatedRoute,\n    private location: Location,\n    private router: Router,\n    private contractService: EthcontractService,\n    ) {}\n\n  ngOnInit() {\n    this.value = 0;\n    this.dest = '';\n    this.process = false;\n    this.scanning = false;\n    this.invalid = true;\n    this.account = this.route.snapshot.paramMap.get('acc');\n    this.points = this.route.snapshot.paramMap.get('points');\n  }\n\n  camerasFoundHandler(event) {\n    this.scanner.scan(event[0].deviceId);\n  }\n\n  scanCompleteHandler(event) {\n    this.scanning = false;\n    console.log(event);\n    if (event instanceof Result) {\n      this.qr_code = event.getText();\n      if (this.qr_code.startsWith('ethereum:')) {\n        this.invalid = false;\n        this.dest = this.qr_code.slice(9);\n      } else {\n        this.invalid = true;\n        this.dest = this.qr_code;\n      }\n    } else {\n      console.error('Scanner error');\n    }\n  }\n\n  gotoBack(): void {\n    this.location.back();\n  }\n\n  scan(): void {\n    this.scanning = true;\n  }\n\n  close(): void {\n    this.scanning = false;\n  }\n\n  confirm(): void {\n    this.value = 1;\n    this.process = true;\n    this.contractService.transfer(this.dest);\n    this.location.back();\n  }\n}\n","module.exports = \"table {\\n    width: 100%;\\n  }\\n\\n.mat-cell .mat-icon {\\n    -webkit-transform: scale(0.6);\\n            transform: scale(0.6);\\n}\"","module.exports = \"<div *ngIf=\\\"orders\\\">\\n    <table *ngIf=\\\"orders.length>0\\\" mat-table [dataSource]=\\\"orders | slice:start:end\\\" class=\\\"mat-elevation-z8\\\">\\n  \\n        <!-- Position Column -->\\n        <ng-container matColumnDef=\\\"position\\\">\\n            <th mat-header-cell *matHeaderCellDef> No. </th>\\n            <td mat-cell *matCellDef=\\\"let element; let i = index;\\\"> {{i+1}} </td>\\n        </ng-container>\\n  \\n        <!-- Position Column -->\\n        <ng-container matColumnDef=\\\"ref\\\">\\n          <th mat-header-cell *matHeaderCellDef> Ref </th>\\n          <td mat-cell *matCellDef=\\\"let element\\\"> {{element.ref}}</td>\\n        </ng-container>\\n  \\n        <!-- Position Column -->\\n        <ng-container matColumnDef=\\\"date\\\">\\n          <th mat-header-cell *matHeaderCellDef> Date </th>\\n          <td mat-cell *matCellDef=\\\"let element\\\"> {{element.date}}</td>\\n        </ng-container>\\n  \\n         <!-- Position Column -->\\n         <ng-container matColumnDef=\\\"status\\\">\\n          <th mat-header-cell *matHeaderCellDef> Status </th>\\n          <td mat-cell *matCellDef=\\\"let element\\\"> {{element.status}}</td>\\n        </ng-container>\\n      \\n  \\n        <!-- Weight Column -->\\n        <ng-container matColumnDef=\\\"link\\\">\\n            <th mat-header-cell *matHeaderCellDef> Details </th>\\n            <td mat-cell *matCellDef=\\\"let element\\\"> <button (click)=\\\"gotoOrder(element.ref)\\\" mat-icon-button> <mat-icon>call_made</mat-icon></button> </td>\\n          </ng-container>\\n      \\n      \\n        <tr mat-header-row *matHeaderRowDef=\\\"displayedColumns\\\"></tr>\\n        <tr mat-row *matRowDef=\\\"let row; columns: displayedColumns;\\\"></tr>\\n      </table>\\n      <br>\\n      \\n  <mat-paginator *ngIf=\\\"orders.length>0\\\" [length]=\\\"orders.length\\\"\\n                [pageSize]=\\\"10\\\"\\n                [pageSizeOptions]=\\\"[1, 5, 10, 25, 100]\\\"\\n                (page)=\\\"setPage($event)\\\">\\n  </mat-paginator>\\n  </div>\"","import { Component, OnInit, Input } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { PageEvent } from '@angular/material';\nimport { Order } from '../order';\n\n@Component({\n  selector: 'app-user-orders',\n  templateUrl: './user-orders.component.html',\n  styleUrls: ['./user-orders.component.css']\n})\nexport class UserOrdersComponent implements OnInit {\n\n  @Input() orders: Order[];\n  start: number;\n  end: number;\n\n  displayedColumns: string[] = ['position', 'date', 'status', 'link'];\n\n  constructor(private router: Router) { }\n\n  ngOnInit() {\n    this.start = 0;\n    this.end = 10;\n  }\n\n  gotoOrder(ref: string): void {\n    this.router.navigate([`/order/${ref}`]);\n  }\n\n  setPage(e: PageEvent): void {\n    console.log(e);\n    const { pageIndex, pageSize } = e;\n    this.start = pageIndex * pageSize;\n    this.end = this.start + pageSize;\n  }\n\n}\n","module.exports = \".example-headers-align .mat-expansion-panel-header-title,\\n.example-headers-align .mat-expansion-panel-header-description {\\n  flex-basis: 0;\\n}\\n\\n.example-headers-align .mat-expansion-panel-header-description {\\n  justify-content: space-between;\\n  align-items: center;\\n}\\n\"","module.exports = \"<app-header [back]=\\\"true\\\" [title]=\\\"'Profile'\\\"></app-header>\\n<mat-grid-list cols=\\\"3\\\" rowHeight=\\\"3em\\\">\\n\\n  <mat-grid-tile *ngIf=\\\"name()\\\">Name</mat-grid-tile>\\n\\n  <mat-grid-tile *ngIf=\\\"name()\\\"></mat-grid-tile>\\n\\n  <mat-grid-tile *ngIf=\\\"name()\\\">{{name()}}</mat-grid-tile>\\n\\n  <mat-grid-tile *ngIf=\\\"phone()\\\">Mobile</mat-grid-tile>\\n\\n  <mat-grid-tile *ngIf=\\\"phone()\\\"></mat-grid-tile>\\n\\n  <mat-grid-tile *ngIf=\\\"phone()\\\">{{phone()}}</mat-grid-tile>\\n\\n  <mat-grid-tile *ngIf=\\\"rider\\\">Nikname</mat-grid-tile>\\n  \\n  <mat-grid-tile *ngIf=\\\"rider\\\"></mat-grid-tile>\\n  \\n  <mat-grid-tile *ngIf=\\\"rider\\\">{{rider.nikname}}</mat-grid-tile>\\n</mat-grid-list>\\n\\n<mat-accordion>\\n    <mat-expansion-panel (opened)=\\\"getTags()\\\">\\n      <mat-expansion-panel-header>\\n        <mat-panel-title>\\n          Tags\\n        </mat-panel-title>\\n        <mat-panel-description>\\n          Open to see your tags\\n        </mat-panel-description>\\n      </mat-expansion-panel-header>\\n  \\n      <app-user-tags [tags]=\\\"tags\\\"></app-user-tags>\\n  \\n    </mat-expansion-panel>\\n</mat-accordion>\\n\\n<mat-divider *ngIf=\\\"wallet\\\"></mat-divider>\\n<mat-grid-list cols=\\\"3\\\" rowHeight=\\\"3em\\\">\\n  \\n  <mat-grid-tile [colspan]=\\\"3\\\" *ngIf=\\\"wallet\\\"><h3>Wallet</h3></mat-grid-tile>\\n\\n  <mat-grid-tile *ngIf=\\\"wallet\\\">Account</mat-grid-tile>\\n\\n  <mat-grid-tile *ngIf=\\\"wallet\\\">\\n      <button (click)=\\\"qrcode()\\\" mat-icon-button>\\n          <mat-icon>view_agenda</mat-icon>\\n      </button>\\n  </mat-grid-tile>\\n\\n  <mat-grid-tile *ngIf=\\\"wallet\\\">\\n    <button mat-stroked-button ngxClipboard [cbContent]=\\\"account\\\">{{account.slice(0,6)+'...'+account.slice(36,42)}}</button>\\n  </mat-grid-tile>\\n\\n  <mat-grid-tile *ngIf=\\\"wallet\\\">Balance</mat-grid-tile>\\n    \\n  <mat-grid-tile *ngIf=\\\"wallet\\\"></mat-grid-tile>\\n\\n  <mat-grid-tile *ngIf=\\\"wallet\\\">{{balance}} Ether</mat-grid-tile>\\n\\n  <mat-grid-tile *ngIf=\\\"wallet\\\">Points</mat-grid-tile>\\n\\n  <mat-grid-tile *ngIf=\\\"wallet\\\">{{points}}</mat-grid-tile>\\n\\n  <mat-grid-tile *ngIf=\\\"wallet\\\">{{token}} Ether</mat-grid-tile>\\n\\n</mat-grid-list>\\n\\n<mat-accordion *ngIf=\\\"wallet\\\"> \\n    <mat-expansion-panel>\\n      <mat-expansion-panel-header>\\n        <mat-panel-title>\\n          Transactions\\n        </mat-panel-title>\\n        <mat-panel-description>\\n          Open to see all\\n        </mat-panel-description>\\n      </mat-expansion-panel-header>\\n\\n      <app-user-tnx [transactions]=\\\"transactions | async\\\"></app-user-tnx>\\n  \\n  \\n    </mat-expansion-panel>\\n</mat-accordion>\\n<br>\\n\\n<mat-grid-list cols=\\\"3\\\" rowHeight=\\\"3em\\\">\\n  \\n  <mat-grid-tile [colspan]=\\\"3\\\" *ngIf=\\\"orders\\\"><h3>Shopping</h3></mat-grid-tile>\\n\\n  <mat-grid-tile *ngIf=\\\"orders\\\">Order #</mat-grid-tile>\\n    \\n  <mat-grid-tile *ngIf=\\\"orders\\\"></mat-grid-tile>\\n\\n  <mat-grid-tile *ngIf=\\\"orders\\\">{{orders.length}}</mat-grid-tile>\\n\\n</mat-grid-list>\\n\\n<mat-accordion *ngIf=\\\"orders\\\"> \\n    <mat-expansion-panel>\\n      <mat-expansion-panel-header>\\n        <mat-panel-title>\\n          Orders\\n        </mat-panel-title>\\n        <mat-panel-description>\\n          Open to see all\\n        </mat-panel-description>\\n      </mat-expansion-panel-header>\\n\\n      <app-user-orders [orders]=\\\"orders\\\"></app-user-orders>\\n  \\n  \\n    </mat-expansion-panel>\\n</mat-accordion>\\n<br>\\n\\n\\n  \\n<mat-grid-list cols=\\\"3\\\" rowHeight=\\\"3em\\\">\\n\\n  <mat-grid-tile [colspan]=\\\"3\\\">\\n  </mat-grid-tile>\\n\\n  <mat-grid-tile *ngIf=\\\"authenticated()\\\">\\n    <button mat-raised-button color=\\\"warn\\\" [disabled]=\\\"!authenticated()\\\" (click)=\\\"logout()\\\">Logout</button>\\n  </mat-grid-tile>\\n  \\n  <mat-grid-tile *ngIf=\\\"authenticated()\\\">\\n      <button mat-raised-button color=\\\"accent\\\" [disabled]=\\\"!authenticated() || !wallet || !havePoints()\\\" (click)=\\\"use()\\\">Use points</button>\\n  </mat-grid-tile>\\n  \\n  <mat-grid-tile *ngIf=\\\"authenticated()\\\">\\n    <button mat-raised-button color=\\\"primary\\\" [disabled]=\\\"!authenticated()\\\" (click)=\\\"gotoUpdate()\\\">Update</button>\\n  </mat-grid-tile>\\n\\n  <mat-grid-tile *ngIf=\\\"!authenticated()\\\" [colspan]=\\\"3\\\">\\n    No user logged in\\n  </mat-grid-tile>\\n\\n</mat-grid-list>\\n\\n\\n  \"","import { Component, OnInit, AfterViewInit, NgZone } from '@angular/core';\nimport { Router, ActivatedRoute, ParamMap } from '@angular/router';\nimport { TagService } from '../tag.service';\nimport { Tag, Registration } from '../tag';\nimport * as firebase from 'firebase/app';\nimport { AuthService } from '../auth.service';\nimport { TrustedScriptString } from '@angular/core/src/sanitization/bypass';\nimport { routerNgProbeToken } from '@angular/router/src/router_module';\nimport { RiderService } from '../rider.service';\nimport { Rider, Bike } from '../rider';\nimport { Wallet } from '../wallet';\nimport { EthcontractService } from '../ethereum/ethcontract.service';\nimport { Observable, of } from 'rxjs';\nimport { first } from 'rxjs/operators';\nimport { Transaction } from '../transaction';\nimport { TransactionService } from '../transaction.service';\nimport { MatDialog, MatDialogRef, MAT_DIALOG_DATA } from '@angular/material';\nimport { QrcodeDialogComponent } from '../qrcode-dialog/qrcode-dialog.component';\nimport { UserTagsComponent } from '../user-tags/user-tags.component';\nimport { OrderService } from '../order.service';\nimport { Order } from '../order';\n\n@Component({\n  selector: 'app-user-profile',\n  templateUrl: './user-profile.component.html',\n  styleUrls: ['./user-profile.component.css'],\n  providers: [TagService]\n})\nexport class UserProfileComponent implements OnInit, AfterViewInit {\n  tags: Tag[];\n  rider: Rider;\n  wallet: Wallet;\n  balance: string;\n  account: string;\n  token: string;\n  points: string;\n  showqr: boolean;\n  result: string;\n  transactions: Observable<Transaction[]>;\n  orders: Order[];\n\n  constructor(\n    private tagService: TagService,\n    private authService: AuthService,\n    private riderService: RiderService,\n    private route: ActivatedRoute,\n    private router: Router,\n    private contractService: EthcontractService,\n    private zone: NgZone,\n    private tnxService: TransactionService,\n    public dialog: MatDialog,\n    private orderService: OrderService\n    ) { }\n\n  ngOnInit() {\n    this.riderService.getRiderByMobile(this.authService.getUserPhone())\n      .subscribe(riders => {\n        if (riders) {\n          if (riders.length > 0) {\n            this.rider = riders[0];\n            this.wallet = this.rider.wallet;\n            if (this.rider.wallet) {\n              this.account = this.rider.wallet.accounts[0];\n              this.contractService.getAccountBalance(this.account)\n                .subscribe((result) => this.zone.run(() => this.balance = `${+result / 1e18}`));\n              this.getBalance().subscribe(results => {\n                this.token = `${+results / 1e18}`;\n              });\n              this.transactions = this.tnxService.getAccountTransactions(this.account);\n              this.transactions.subscribe((tnxs) => {\n                this.contractService.getTokenBalance(this.account)\n                  .subscribe((balance) => {\n                    this.points = `${+balance}`;\n                  });\n              });\n            }\n          }\n        }\n       });\n\n    this.authService.getUser().subscribe(user => {\n      this.orderService.getClientOrders(user.uid).subscribe(orders => this.orders = orders);\n    });\n  }\n\n  ngAfterViewInit() {\n    this.getTags();\n  }\n\n  qrcode(): void {\n    this.showqr = true;\n    const dialogRef = this.dialog.open(QrcodeDialogComponent, {\n      width: '250px',\n      height: '300px',\n      data: {account: this.account, result: null}\n    });\n\n    dialogRef.afterClosed().subscribe(result => {\n      console.log('The dialog was closed');\n      this.result = result;\n    });\n  }\n\n  getTags(): void {\n    this.tagService.getTagsByMobile(this.phone())\n        .subscribe(tags => this.tags = tags);\n  }\n\n  phone(): string | null {\n    return this.authService.getUserPhone();\n  }\n\n  name(): string | null {\n    return this.authService.getUserName();\n  }\n\n  authenticated(): boolean {\n    return this.authService.authenticated();\n  }\n\n  logout(): void {\n    this.authService.logout();\n  }\n\n  gotoUpdate(): void {\n    this.router.navigate([`/update`]);\n  }\n\n  use(): void {\n    this.router.navigate([`/use/${this.account}/${this.points}`]);\n  }\n\n  havePoints(): boolean {\n    return +this.points > 0;\n  }\n\n  gotoTagById(tag: Tag): void {\n    const tagId = tag ? tag.id : null;\n    this.router.navigate([`/tag/${tagId}`]);\n  }\n\n  getAccount(): string | null {\n    if (this.wallet) {\n      return this.wallet.accounts[0];\n    } else {\n      return null;\n    }\n  }\n\n  getAccountBalance(): Observable<string[] | null> {\n    if (!this.wallet) {\n      return of(null);\n    } else {\n      return this.contractService.getAccountBalance(this.wallet.accounts[0]);\n    }\n  }\n\n  getBalance(): Observable<any[] | Error> {\n    if (!this.wallet) {\n      return of(null);\n    } else {\n      return this.contractService.getBalance();\n    }\n  }\n\n  gotoTnx(hash: string): void {\n    this.router.navigate([`/tnx/${hash}`]);\n  }\n\n}\n","module.exports = \"table {\\n    width: 100%;\\n  }\\n\\n.mat-cell .mat-icon {\\n    -webkit-transform: scale(0.6);\\n            transform: scale(0.6);\\n}\"","module.exports = \"<div *ngIf=\\\"tags\\\">\\n  <table *ngIf=\\\"tags.length>0\\\" mat-table [dataSource]=\\\"tags | slice:start:end\\\" class=\\\"mat-elevation-z8\\\">\\n\\n      <!-- Position Column -->\\n      <ng-container matColumnDef=\\\"id\\\">\\n        <th mat-header-cell *matHeaderCellDef> ID </th>\\n        <td mat-cell *matCellDef=\\\"let element\\\"> {{element.id}}</td>\\n      </ng-container>\\n\\n      <!-- Position Column -->\\n      <ng-container matColumnDef=\\\"date\\\">\\n        <th mat-header-cell *matHeaderCellDef> Date </th>\\n        <td mat-cell *matCellDef=\\\"let element\\\"> {{element.regDate}}</td>\\n      </ng-container>\\n    \\n\\n      <!-- Weight Column -->\\n      <ng-container matColumnDef=\\\"link\\\">\\n          <th mat-header-cell *matHeaderCellDef> Details </th>\\n          <td mat-cell *matCellDef=\\\"let element\\\"> <button (click)=\\\"gotoTagById(element)\\\" mat-icon-button> <mat-icon>call_made</mat-icon></button> </td>\\n        </ng-container>\\n    \\n    \\n      <tr mat-header-row *matHeaderRowDef=\\\"displayedColumns\\\"></tr>\\n      <tr mat-row *matRowDef=\\\"let row; columns: displayedColumns;\\\"></tr>\\n    </table>\\n    <br>\\n    \\n<mat-paginator *ngIf=\\\"tags.length>0\\\" [length]=\\\"tags.length\\\"\\n              [pageSize]=\\\"10\\\"\\n              [pageSizeOptions]=\\\"[1, 5, 10, 25, 100]\\\"\\n              (page)=\\\"setPage($event)\\\">\\n</mat-paginator>\\n</div>\"","import { Component, OnInit, Input } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { PageEvent } from '@angular/material';\nimport { Tag } from '../tag';\n\n@Component({\n  selector: 'app-user-tags',\n  templateUrl: './user-tags.component.html',\n  styleUrls: ['./user-tags.component.css']\n})\nexport class UserTagsComponent implements OnInit {\n  @Input() tags: Tag[];\n  start: number;\n  end: number;\n\n  displayedColumns: string[] = ['id', 'date', 'link'];\n\n  constructor(private router: Router) { }\n\n  ngOnInit() {\n    this.start = 0;\n    this.end = 10;\n  }\n\n  gotoTagById(tag: Tag): void {\n    const tagId = tag ? tag.id : null;\n    this.router.navigate([`/tag/${tagId}`]);\n  }\n\n  setPage(e: PageEvent): void {\n    console.log(e);\n    const { pageIndex, pageSize } = e;\n    this.start = pageIndex * pageSize;\n    this.end = this.start + pageSize;\n  }\n\n}\n","module.exports = \"table {\\n    width: 100%;\\n  }\\n\\n.mat-cell .mat-icon {\\n    -webkit-transform: scale(0.6);\\n            transform: scale(0.6);\\n}\"","module.exports = \"<div *ngIf=\\\"transactions\\\">\\n  <table *ngIf=\\\"transactions.length>0\\\" mat-table [dataSource]=\\\"transactions | slice:start:end\\\" class=\\\"mat-elevation-z8\\\">\\n\\n      <!-- Position Column -->\\n      <ng-container matColumnDef=\\\"nonce\\\">\\n        <th mat-header-cell *matHeaderCellDef> # </th>\\n        <td mat-cell *matCellDef=\\\"let element\\\"> {{element.nonce}}</td>\\n      </ng-container>\\n\\n      <!-- Position Column -->\\n      <ng-container matColumnDef=\\\"block\\\">\\n        <th mat-header-cell *matHeaderCellDef> Block </th>\\n        <td mat-cell *matCellDef=\\\"let element\\\"> {{element.block}}</td>\\n      </ng-container>\\n\\n      <!-- Position Column -->\\n      <ng-container matColumnDef=\\\"value\\\">\\n        <th mat-header-cell *matHeaderCellDef> Value </th>\\n        <td mat-cell *matCellDef=\\\"let element\\\"> {{element.value}}</td>\\n      </ng-container>\\n\\n       <!-- Position Column -->\\n       <ng-container matColumnDef=\\\"points\\\">\\n        <th mat-header-cell *matHeaderCellDef> Points </th>\\n        <td mat-cell *matCellDef=\\\"let element\\\"> {{element.points}}</td>\\n      </ng-container>\\n    \\n\\n      <!-- Weight Column -->\\n      <ng-container matColumnDef=\\\"link\\\">\\n          <th mat-header-cell *matHeaderCellDef> Details </th>\\n          <td mat-cell *matCellDef=\\\"let element\\\"> <button (click)=\\\"gotoTnx(element.hash)\\\" mat-icon-button> <mat-icon>call_made</mat-icon></button> </td>\\n        </ng-container>\\n    \\n    \\n      <tr mat-header-row *matHeaderRowDef=\\\"displayedColumns\\\"></tr>\\n      <tr mat-row *matRowDef=\\\"let row; columns: displayedColumns;\\\"></tr>\\n    </table>\\n    <br>\\n    \\n<mat-paginator *ngIf=\\\"transactions.length>0\\\" [length]=\\\"transactions.length\\\"\\n              [pageSize]=\\\"10\\\"\\n              [pageSizeOptions]=\\\"[1, 5, 10, 25, 100]\\\"\\n              (page)=\\\"setPage($event)\\\">\\n</mat-paginator>\\n</div>\"","import { Component, OnInit, Input } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { PageEvent } from '@angular/material';\nimport { Transaction } from '../transaction';\n\n@Component({\n  selector: 'app-user-tnx',\n  templateUrl: './user-tnx.component.html',\n  styleUrls: ['./user-tnx.component.css']\n})\nexport class UserTnxComponent implements OnInit {\n  @Input() transactions: Transaction[];\n  start: number;\n  end: number;\n\n  displayedColumns: string[] = ['nonce', 'block', 'value', 'points', 'link'];\n\n  constructor(private router: Router) { }\n\n  ngOnInit() {\n    this.start = 0;\n    this.end = 10;\n  }\n\n  gotoTnx(hash: string): void {\n    this.router.navigate([`/tnx/${hash}`]);\n  }\n\n  setPage(e: PageEvent): void {\n    console.log(e);\n    const { pageIndex, pageSize } = e;\n    this.start = pageIndex * pageSize;\n    this.end = this.start + pageSize;\n  }\n\n}\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build ---prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: true,\n  firebase:  {\n    apiKey: 'AIzaSyARllasipU-7JhdvtkRV25er--zMyOPEW0',\n    authDomain: 'cloud-firestore-test-d95bf.firebaseapp.com',\n    databaseURL: 'https://cloud-firestore-test-d95bf.firebaseio.com',\n    projectId: 'cloud-firestore-test-d95bf',\n    storageBucket: 'cloud-firestore-test-d95bf.appspot.com',\n    messagingSenderId: '740765205427'\n  }\n};\nexport const version = 'Version 0.0.1.7';\n/*\n * In development mode, to ignore zone related error stack frames such as\n * `zone.run`, `zoneDelegate.invokeTask` for easier debugging, you can\n * import the following file, but please comment it out in production mode\n * because it will have performance impact when throw error\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","export const ProcessingError = {\n    100: 'Incorrect Operation ID',\n    101: 'Incorrect Order ID',\n    102: 'Incorrect Sector ID',\n    103: 'Operation not found',\n    104: 'Order not found',\n    145: 'Sector does not support Authorize',\n};\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.log(err));\n","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */"],"sourceRoot":""}